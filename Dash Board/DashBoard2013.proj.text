// Text of project DashBoard2013.proj written on 6/29/13 at 10:45 PM// Beginning of file DashBoard.ntkc/*DefConst('DashBoard,PP: Ill-placed Blank{GetNagasa: {class: BinCFunction, code: <code>, numArgs: 0, offset: 1804},    PP: Ill-placed BlankSkewzoid: {class: BinCFunction, code: <code>, numArgs: 0, offset: 200},        KakuninSuru: {class: BinCFunction, code: <code>, numArgs: 2, offset: 12}    });*/// End of file DashBoard.ntkc// Beginning of text file RemoveScript.txtRemoveScript := func(partFrame)begin	if debugON then print("calling RemoveScript!");		if GetRoot().|DBminibar:FiveSpeed|.viewCobject then		begin			GetRoot().|DBminibar:Fivespeed|:Close();			KillStdButtonBar(NIL);		end;end// End of text file RemoveScript.txt// Beginning of text file Constants.txtconstant kVsnStr := "Dash Board 1.5.2013d1";constant kPrefsVsn := 8; //NOTE! you must modify the UpdatePrefs() routine tooconstant kMaxScrollHeight := 32767;  //for about window//string constantsconstant kCantOpenNP := "\n\nSorry, the Note Pad could not be opened. (I'm afraid I don't know why.)";//patch funcs//patch for GetRoot().buttonToggleDefineGlobalConstant('kProtoPatchFunc, func(target,template, perpSym)	begin		local patch := EnsureInternal({}); //create a patch frame in heap		foreach sym, val in template do			patch.(EnsureInternal(sym)) := template.(sym); //copy each slot from template into the patch frame, ensuring that frame itself (not necessary for slot contents though) is in heap		patch.(EnsureInternal('_proto)) := target._proto; //set patch's proto to the previous proto of target, so patch's proto chain is now target's old proto chain		patch.(EnsureInternal('tag)) := perpSym; //add a perp slot and set it to the unique symbol(appSymbol variant) of the perpetrator		target._proto := patch; //give target its new proto chain, with my patch at the beginning of it	end);		//tapaction scriptDefineGlobalConstant('kTapActionFn,	func()		begin			// your code goes here!			if GetRoot().(kAppSymbol).viewCObject then				GetRoot().(kAppSymbol):cmdQuit();			else				GetRoot().(kAppSymbol):Open();				return true;  //is this what i need to do here???		end);// part MUST have a text slot for tapAction to be used// text slot is the name seen by the user in Extras//SetPartFrameSlot('text, kAppName) ;SetPartFrameSlot('tapAction, kTapActionFn) ;// End of text file Constants.txt// Beginning of text file InstallScript.txtInstallScript := func(partFrame)begin	AddDeferredCall(func()		begin			 GetRoot().(kAppSymbol):Open();		end, nil);	GetRoot().sleepScreen:RegLogin('|login:DB:FiveSpeed|, func() 		begin			if GetRoot().(kAppSymbol) then 				GetRoot().(kAppSymbol):Open();			AddDelayedSend(GetRoot().(kAppSymbol), 'DB_Refresh, nil, 1000); //is THIS the cause??? LATER!		end);end// End of text file InstallScript.txt// Beginning of text file DoNotInstallScript.txtSetPartFrameSlot('DoNotInstall, func() //return TRUE if not strongarm	begin		local g := Gestalt(kGestalt_SystemInfo);		if g.cputype = 'strongarm then			begin				return NIL;			end		else			begin				GetRoot():Notify(kNotifyALert, TotalClone("Dash Board"), TotalClone("Sorry, Dash Board can only be installed on MessagePad 2000 or MessagePad 2100 machines."));				return TRUE;			end;	end;);// End of text file DoNotInstallScript.txt// Beginning of text file DeletionScript.txtSetPartFrameSlot('DeletionScript, func()	begin		GetRoot():SysBeep();		if ModalConfirm("You are deleting Dash Board. If you do not plan to use Dash Board again in the future, you should also delete its preferences and data. " & 		"\n\nWhat would you like to do?", ["Delete All Data", "Delete Pkg. Only"]) = 0 then			begin				if ModalConfirm("WARNING: This will delete ALL your Dash Board data; your preferences, along with any scripts you have created, will be deleted. This cannot be undone. " &				"\n\nAre you sure you want to continue?", ["Delete It All!", "Delete Pkg. Only"]) = 0 then					begin						local theVictim;												//delete prefs app						if GetRoot().|DashBoardPrefs:FiveSpeed|.viewCObject then							GetRoot().|DashBoardPrefs:FiveSpeed|:Close();							foreach i in GetStores() do 								begin									theVictim := GetPkgRef("DashBoardPrefs:FiveSpeed", i);									if theVictim then										SafeRemovePackage(theVictim);								end;												//delete scripts soup							theVictim := GetUnionSoup("DashBoardPrefs:FiveSpeed");							if theVictim then 								begin									local victimsFamily := theVictim:GetSoupList();									foreach i in victimsFamily do										begin											i:RemoveFromStoreXmit('|uninstall:DB:FiveSpeed|);										end;								end;																		//delete prefs							theVictim := GetAppPrefs('|DashBoard:FiveSpeed|, {});							EntryRemoveFromSoupXmit(theVictim, '|uninstall:DB:FiveSpeed|);							theVictim := GetAppPrefs('|DashBoardPrefs:FiveSpeed|, {});							EntryRemoveFromSoupXmit(theVictim, '|uninstall:DB:FiveSpeed|);							theVictim := GetAppPrefs('|recent:DB:FiveSpeed|, {});							EntryRemoveFromSoupXmit(theVictim, '|uninstall:DB:FiveSpeed|);							theVictim := GetAppPrefs('|builtin:DB:FiveSpeed|, {});							EntryRemoveFromSoupXmit(theVictim, '|uninstall:DB:FiveSpeed|);					end;			end;		AddDeferredCall(TotalCLone(func() begin KillStdButtonBar(NIL) end), NIL);  //ensure we dont leave user with no bbar	end;);// End of text file DeletionScript.txt// Beginning of file foreignClock.protoforeignClock :=    {viewBounds: {left: 6, top: 6, right: 86, bottom: 107},     viewFlags: 1,     viewFormat: 0,     myCity: "London",     viewSetupChildrenScript:       func()       begin              	       	:Update();  //set all non-citypicker items to reflect right time       	       	if not HasSlot(cityPicker, 'params) then       			cityPicker.params := clone(cityPicker.params);       	cityPicker.params.default := [myCountry, myCity];       	       end,     myCOuntry: 'UK,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	local p := GetRoot().(kAppSymbol):DB_GetPrefs();       	if p.(myPrefSlot) and IsArray(p.(myPrefSlot)) and (Length(p.(myPrefSlot)) = 3) then       		begin       			myCity := p.(myPrefSlot)[0];       			myCountry := p.(myPrefSlot)[1];       			myGMT := p.(myPrefSlot)[2];       		end;       	inherited:?ViewSetupFormScript();       end,     Update:       func()       begin       	local theCities := GetCityEntry(myCity);       	       	       //990415:       	//DELETED: local theCity := GetCityEntry(myDefaultCity)[0]; //this city MUST EXIST	       	       	local theCity := NIL;        	       	//NOW WE CHECK to find a city with matching name, country, AND gmt slot, to ensure we       	//get the right city, in cases where there is more than one, because Apple is        	//absolutely retarded in the extreme.       	       	if Length(theCities) > 0 then       		begin       			for i := 0 to Length(theCities)-1 do       				begin       					if (theCities[i].country = myCountry) and (theCities[i].gmt = myGMT) then       						begin       							theCity := theCities[i];       						end;       				end;       		end;              //990415:       	if theCity = NIL then //then we have to re-set the city to the local location.       		begin       			theCity := GetUserConfig('location);       			myCity := theCity.name;       			myCountry := theCity.country;       			myGMT := theCity.gmt;       		end;       		       	//NOW WE SET the various display items to show the right info       			       	SetValue(cityText, 'text, kPopChar & theCity.name);       	local localTime := LocalTime(time(), theCity);       	SetValue(theClock, 'time, localTime);       	       	//NOTE: here we need to force the clock to update its display	       	       	theClock:Refresh();       	       	SetValue(dateText, 'text, ShortDate(localTime));       	SetValue(timeTxt, 'text, TimeStr(theClock.time, ROM_dateTimeStrSpecs.shortTimeStrSpec));       end,     myGMT: 0,     viewSetupDoneScript:       func()       begin       	:Update(); //attempt to make kPopChar show at open wht the FUCKKKKKKKKKKK!       end,     debug: "foreignClock",     viewClass: 74 /* clView */    };theClock :=    {viewBounds: {left: 11, top: 16, right: 69, bottom: 74},     viewJustify: 0,     viewFlags: 1,     debug: "theClock",     _proto: @378 /* protoNewSetClock */    };AddStepForm(foreignClock, theClock);StepDeclare(foreignClock, theClock, 'theClock);cityPicker :=    {params: {spots: ROM_citysoupname, result: NIL},     viewBounds: {left: 1, top: 0, right: 9, bottom: 16},     viewJustify: 2,     entryFont: ROM_FontSystem9Bold,     pickActionScript:       func(itemSelected)  //this shoudl now be full city frame thanks to Steve Weyer's tip/hack       begin       	       	:Parent().myCity := itemSelected.name;       	:Parent().myCountry := itemSelected.country;       	:Parent().myGMT := itemSelected.GMT;              	       	//now save the pref       	local p := GetRoot().(kAppSymbol):DB_GetPrefs();       	p.(myPrefSlot) := [itemSelected.name, itemSelected.Country, itemSelected.gmt];       	EntryChangeXmit(p, kAppSymbol);       	       	citytext:Hilite(NIL);       	       	:Parent():Parent():Update(); //we call update for the timeSlip itself, which calls update for each foreignClock (keeps everything synced)       	       	//now update the defaults for the picker since       	//apparntly our hack prevents the picker from       	//doing it for us       	       	if not HasSlot(self, 'params) then       			params := clone(params);       	params.default := [itemSelected.country, itemSelected.name];       	       	       	inherited:?pickActionScript(itemSelected.name);		// this method is defined internally; use name cuz we hacked it to return entry not just name       	       	       end,     pickCancelledScript:       func()       begin       	citytext:Hilite(NIL);       	inherited:?PickCancelledScript();		// this method is defined internally       end,     label: "",     debug: "cityPicker",     _proto: @634 /* protoCitiesTextPicker */    };AddStepForm(foreignClock, cityPicker);StepDeclare(foreignClock, cityPicker, 'cityPicker);timeTxt :=    {text: "",     viewBounds: {left: 8, top: 74, right: 72, bottom: 90},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388614,     debug: "timeTxt",     _proto: @218 /* protoStaticText */    };AddStepForm(foreignClock, timeTxt);StepDeclare(foreignClock, timeTxt, 'timeTxt);cityText :=    {text: "",     viewBounds: {left: 0, top: 0, right: 80, bottom: 16},     viewFlags: 515,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	text := myCity;       	inherited:?ViewSetupFormScript();       end,     viewClickScript:       func(unit)       begin       	if :TrackHilite(unit) then       		cityPicker:Popit(4);       	true;       	// Return true if click has been completely handled, nil otherwise       end,     viewJustify: 8388614,     debug: "cityText",     _proto: @218 /* protoStaticText */    };AddStepForm(foreignClock, cityText);StepDeclare(foreignClock, cityText, 'cityText);dateText :=    {text: "",     viewBounds: {left: 4, top: 86, right: 76, bottom: 101},     viewJustify: 8388614,     viewFont: ROM_fontSystem9,     debug: "dateText",     _proto: @218 /* protoStaticText */    };AddStepForm(foreignClock, dateText);StepDeclare(foreignClock, dateText, 'dateText);constant |layout_foreignClock.proto| := foreignClock;// End of file foreignClock.proto// Beginning of file RegSlip.tregSlip :=    {viewBounds: {left: 0, top: 0, right: 280, bottom: 280},     viewJustify: 80,     viewFlags: 64,     debug: "regSlip",     _proto: @179 /* protoFloater */    };regSlip_v229_0 :=    {title: "Register Dash Board",     viewBounds: {left: 0, top: -1, right: 160, bottom: 15},     _proto: @229 /* protoTitle */    };AddStepForm(regSlip, regSlip_v229_0);regSlip_v218_0 :=    {text: "",     viewBounds: {left: 28, top: 21, right: -28, bottom: 107},     viewJustify: 48,     viewFormat: 131072,     viewFont: simpleFont9,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin              	local theInfo := GetRoot().(kAppSYmbol):NamaeBango();       	local theWhere := if theInfo.NID then "(from Newton ID)" else "(from Owner Info)";       	local theName := theInfo.name;       	local theSeedNum := "(Seed number: " & theInfo.number & ")";       	text := ParamStr("Thank you for registering Dash Board! Your user name is:\n\n^0 ^1\n^2\n\nPlease enter your registration code below:", [theName, theWhere, theSeedNum]);              	inherited:?ViewSetupFormScript();       end,     _proto: @218 /* protoStaticText */    };AddStepForm(regSlip, regSlip_v218_0);theInput :=    {viewBounds: {left: 30, top: 117, right: 247, bottom: 149},     viewFormat: 143952,     viewLineSpacing: 30,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	AddDeferredCall(func() SetKeyView(self, 9999), NIL);       	inherited:?ViewSetupFormScript();       end,     debug: "theInput",     _proto: @185 /* protoInputLine */    };AddStepForm(regSlip, theInput);StepDeclare(regSlip, theInput, 'theInput);regSlip_v226_0 :=    {     buttonClickScript:       func()       begin       	local theSN := StringToNumber(theInput.text);       	if not theSN then       		begin       			ModalConfirm("That registration code is not valid. Please check the number and try again. \n\nIf you have further difficulties, contact support@fivespeed.com for assistance.", ["OK"]);       			return NIL;       		end;              	if not IsInteger(theSN) then theSN := Floor(theSN);       	GetRoot().(kAppSymbol).dbPrefs.sn := theSN;       	local theResult := GetRoot().(kAppSymbol):DB_Kakunin();       	if theResult then       		begin       			AddDeferredSend(GetRoot(), 'Notify, [kNotifyAlert, kAppName, "Registration was successful.\n\nThank you for your support!"]);       			EntryChangeXmit(GetRoot().(kAppSymbol).dbPrefs, kAppSymbol);       			GetRoot().(kAppSymbol):DB_Kakunin();       			if GetRoot().(kAppSymbol).viewCobject then AddDeferredSend(GetRoot().(kAppSymbol), 'DB_RedoDB, NIL);       			local NIDEntry := GetAppPrefs('|NewtonID:NewtonID|, {});       			if HasSlot(NIDEntry, 'name) then       				begin       					NIDEntry.|DashBoard:FiveSpeed| := theSN;       					EntryChangeXmit(NIDEntry, kAppSymbol);       				end;       			:Parent():Close();       		end       	else       		ModalConfirm("That registration code is not valid. Please check the number and try again. \n\nIf you have further difficulties, contact support@fivespeed.com for assistance.", ["OK"]);       	       end,     text: "Register",     viewBounds: {left: 208, top: 258, right: 270, bottom: 271},     viewFont: ROM_fontSystem9Bold,     _proto: @226 /* protoTextButton */    };AddStepForm(regSlip, regSlip_v226_0);regSlip_v226_0 :=    {     buttonClickScript:       func()       begin       	:Parent():Close();       end,     text: "Cancel",     viewBounds: {left: 133, top: 258, right: 195, bottom: 271},     viewFont: ROM_fontSystem9Bold,     _proto: @226 /* protoTextButton */    };AddStepForm(regSlip, regSlip_v226_0);regSlip_v375_0 :=    {viewBounds: {left: 26, top: -118, right: 251, bottom: -37},     _proto: @375 /* protoAlphaKeyboard */    };AddStepForm(regSlip, regSlip_v375_0);constant |layout_RegSlip.t| := regSlip;// End of file RegSlip.t// Beginning of file GetValue.t_v179_0 :=    {viewBounds: {left: 0, top: 0, right: 280, bottom: 280},     viewJustify: 80,     theTitle: "Script Input",     theMessage: "Enter a value in the entry field provided.",     theAnswer: "",     theOKBtnText: "Enter",     theCancelBtnTxt: "Cancel",     theValType: nil,     enteredText: nil,     _proto: @179 /* protoFloater */    };_v179_0_v229_0 :=    {title: kAppName,     viewBounds: {left: -7, top: -5, right: 145, bottom: 11},     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	title := theTitle;       	inherited:?ViewSetupFormScript();       end,     _proto: @229 /* protoTitle */    };AddStepForm(_v179_0, _v179_0_v229_0);_v179_0_v218_0 :=    {text: "",     viewBounds: {left: 8, top: 26, right: 272, bottom: 106},     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	text := theMessage;       	inherited:?ViewSetupFormScript();       end,     viewFont: ROM_fontSystem10,     viewFormat: 131664,     viewJustify: 0,     _proto: @218 /* protoStaticText */    };AddStepForm(_v179_0, _v179_0_v218_0);_v179_0_v185_0 :=    {viewBounds: {left: 8, top: 119, right: 272, bottom: 159},     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	text := theAnswer;       	enteredText := theAnswer;       	inherited:?ViewSetupFormScript();       end,     text: "",     viewChangedScript:       func(slot, view)       begin       	if slot = 'text then       		enteredText := CLone(self.text);       	nil;       end,     viewSetupDoneScript:       func()       begin       	AddDeferredSend(self, 'SetHilite, [0,999,nil]);       	inherited:?viewSetupDoneScript();		// this method is defined internally       end,     viewFormat: 143952,     viewLineSpacing: 38,     _proto: @185 /* protoInputLine */    };AddStepForm(_v179_0, _v179_0_v185_0);_v179_0_v375_0 :=    {viewBounds: {left: 28, top: -111, right: 253, bottom: -30},     _proto: @375 /* protoAlphaKeyboard */    };AddStepForm(_v179_0, _v179_0_v375_0);okBtn :=    {     buttonClickScript:       func()       begin       	local badValStr := "\n The text entered could not be converted to ^0, which is what this script requires. Please enter ^0, or tap the \"" & theCancelBtnTxt & "\" button.";       	local dbs := "Dash Board Script";       	local theVal;       	       	if StrEqual(enteredText, "") or (enteredText = NIL) then       		begin       			:Notify(kNotifyALert, "Dash Board Script", "\nNo value has been entered. Please enter a value, or tap the \"" & theCancelBtnTxt & "\" button.");       			return NIL;       		end;       	       	if theValType = 'integer then       		begin       			theVal := StringToNumber(enteredText);       			if (not theVal) or (not Ceiling(theVal) = Floor(theVal))  then       				begin       					:Notify(kNotifyAlert, dbs, ParamStr(badValStr, ["an integer"]));       					return;        				end;       			GetRoot().(kAppSymbol).GetValResult := Floor(theVal);       		end       		       	else if theValType = 'real then       		begin       			theVal := StringToNumber(enteredText);       			if not theVal then       				begin       					:Notify(kNotifyAlert, dbs, ParamStr(badValStr, ["a real number"]));       					return;        				end;       			if IsInteger(theVal) then       				theVal := Real(theVal);       			GetRoot().(kAppSymbol).GetValResult := theVal;       		end       		       	else if theValType = 'symbol then       		begin       			theVal := Intern(enteredText);       			GetRoot().(kAppSymbol).GetValResult := theVal;       		       		end       		       	else if theValType = 'string or theValType = NIL then       		begin       			GetRoot().(kAppSymbol).GetValResult := enteredText;       		end;              	:Parent():Close();       end,     text: "Button",     viewBounds: {left: -73, top: -18, right: -5, bottom: -5},     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	local myWidth := Min(130, StdButtonWidth(theOKBtnText));  //get width of button; max poss. is 130 pixel       	text := StyledStrTruncate(Clone(theOKBtnText), myWidth - 4, viewFont); //truncate btn's text if it doesn't fit in the max length       	newBounds := Clone(viewBounds);       	newBounds.left := newBounds.right - myWidth;       	viewBounds := newBounds;       	inherited:?ViewSetupFormScript();       end,     viewJustify: 8388774,     debug: "okBtn",     _proto: @226 /* protoTextButton */    };AddStepForm(_v179_0, okBtn);cancelBtn :=    {     buttonClickScript:       func()  // we set th eresult val to NIL and close on cancel       begin       	GetRoot().(kAppSymboL).GetValResult := NIL;       	:Parent():CLose();       end,     text: "",     viewBounds: {left: -78, top: 0, right: -10, bottom: 0},     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	local myWidth := Min(130, StdButtonWidth(theCancelBtnTxt));  //get width of button; max poss. is 130 pixel       	text := StyledStrTruncate(Clone(theCancelBtnTxt), myWidth - 4, viewFont); //truncate btn's text if it doesn't fit in the max length       	newBounds := Clone(viewBounds);       	newBounds.left := newBounds.right - myWidth;       	viewBounds := newBounds;       	inherited:?ViewSetupFormScript();       end,     viewJustify: 8403142,     debug: "cancelBtn",     _proto: @226 /* protoTextButton */    };AddStepForm(_v179_0, cancelBtn);constant |layout_GetValue.t| := _v179_0;// End of file GetValue.t// Beginning of file whoWhere.twhoWhere :=    {viewBounds: {left: 0, top: 0, right: 220, bottom: 140},     viewJustify: 80,     debug: "whoWhere",     _proto: @180 /* protoFloatNGo */    };whoWhere_v229_0 :=    {title: "Dash Board Owner/Worksite",     viewBounds: {left: -4, top: 5, right: 132, bottom: 21},     _proto: @229 /* protoTitle */    };AddStepForm(whoWhere, whoWhere_v229_0);whoWhere_v497_0 :=    {viewBounds: {left: 8, top: 91, right: 208, bottom: 104},     viewJustify: 4,     _proto: @497 /* protoPersonaPopup */    };AddStepForm(whoWhere, whoWhere_v497_0);whoWhere_v498_0 :=    {viewBounds: {left: 8, top: 124, right: 208, bottom: 137},     _proto: @498 /* protoEmporiumPopup */    };AddStepForm(whoWhere, whoWhere_v498_0);whoWhere_v218_0 :=    {text: "Current Owner:",     viewBounds: {left: 8, top: 72, right: 216, bottom: 88},     viewJustify: 8388616,     viewFont: simpleFOnt9,     _proto: @218 /* protoStaticText */    };AddStepForm(whoWhere, whoWhere_v218_0);whoWhere_v218_0 :=    {text: "Current Worksite:",     viewBounds: {left: 8, top: 105, right: 216, bottom: 121},     viewJustify: 8388616,     viewFont: simpleFOnt9,     _proto: @218 /* protoStaticText */    };AddStepForm(whoWhere, whoWhere_v218_0);whoWhere_v218_0 :=    {     text:       "You can change the current location setting and the current Owner setting (if applicable) below."     ,     viewBounds: {left: 9, top: 24, right: 211, bottom: 64},     viewJustify: 0,     viewFormat: 131664,     viewFont: simpleFOnt9,     _proto: @218 /* protoStaticText */    };AddStepForm(whoWhere, whoWhere_v218_0);constant |layout_whoWhere.t| := whoWhere;// End of file whoWhere.t// Beginning of file timeView.ttimeView :=    {viewBounds: {left: 0, top: 0, right: 288, bottom: 240},     viewSetupDoneScript:       func()       begin       	getroot().(kAppSymbol).timeslip := self;       	:SetupIdle(5000);       end,     viewQuitScript:       // must return the value of inherited:?ViewQuitScript()       func()       begin              	getroot().(kAppSymbol).timeslip := NIL;              	inherited:?ViewQuitScript();       end,     viewIdleScript:       func()       begin       	:Update();       	10000;	// Return the number of milliseconds to delay or nil to end idling.       end,     adjustInProgress:       nil  //set this to true while pop up pickers are popped up       ,     viewSetupChildrenScript:       func()       begin       	datetext.text := shortDate(time());       	clock1Time.text := TimeStr(clock1.time, ROM_dateTimeStrSpecs.shortTimeStrSpec);       	clock1.time := time();              end,     Update:       func()       begin       	fClock1:Update();       	fClock2:Update();       	fClock3:Update();       	       	SetValue(dateText, 'text, ShortDate(Time()));       	SetValue(clock1Time, 'text, TimeStr(clock1.time, ROM_dateTimeStrSpecs.shortTimeStrSpec));       	SetValue(clock1, 'time, Time());       	SetValue(clock1Loc, 'text, GetUserConfig('location).name);       	       end,     viewJustify: 80,     viewFlags: 512,     debug: "timeView",     _proto: @132 /* protoDragger */    };timeView_v229_0 :=    {title: "Dash Board Time Display",     viewBounds: {left: 0, top: 0, right: 288, bottom: 24},     _proto: @229 /* protoTitle */    };AddStepForm(timeView, timeView_v229_0);clock1 :=    {viewBounds: {left: 116, top: 35, right: 174, bottom: 93},     viewJustify: 0,     viewFlags: 1,     hours: 14,     minutes: 10,     debug: "clock1",     _proto: @378 /* protoNewSetClock */    };AddStepForm(timeView, clock1);StepDeclare(timeView, clock1, 'clock1);clock1Loc :=    {viewBounds: {left: 101, top: 19, right: 188, bottom: 35},     viewJustify: 6,     text: "Local Time",     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	text := GetUserConfig('location).name;       	inherited:?ViewSetupFormScript();       end,     debug: "clock1Loc",     _proto: @218 /* protoStaticText */    };AddStepForm(timeView, clock1Loc);StepDeclare(timeView, clock1Loc, 'clock1Loc);clock1Time :=    {text: "",     viewBounds: {left: 101, top: 92, right: 189, bottom: 108},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388614,     debug: "clock1Time",     _proto: @218 /* protoStaticText */    };AddStepForm(timeView, clock1Time);StepDeclare(timeView, clock1Time, 'clock1Time);fClock1 :=    {viewBounds: {left: 21, top: 120, right: 93, bottom: 215},     myPrefSlot: 'fClock2,     myCity: "New York",     myCOuntry: 'USA,     myGMT: -18000,     debug: "fClock1",     _proto: foreignClock    };AddStepForm(timeView, fClock1);StepDeclare(timeView, fClock1, 'fClock1);fClock2 :=    {viewBounds: {left: 109, top: 120, right: 181, bottom: 215},     myPrefSlot: 'fClock1,     debug: "fClock2",     _proto: foreignClock    };AddStepForm(timeView, fClock2);StepDeclare(timeView, fClock2, 'fClock2);fClock3 :=    {viewBounds: {left: 197, top: 120, right: 269, bottom: 215},     myPrefSlot: 'fClock3,     myCity: "Tokyo",     myCOuntry: 'Japan,     myGMT: 32400,     debug: "fClock3",     _proto: foreignClock    };AddStepForm(timeView, fClock3);StepDeclare(timeView, fClock3, 'fClock3);dateText :=    {text: "",     viewBounds: {left: 101, top: 104, right: 189, bottom: 120},     viewJustify: 8388614,     viewFont: ROM_fontSystem9,     debug: "dateText",     _proto: @218 /* protoStaticText */    };AddStepForm(timeView, dateText);StepDeclare(timeView, dateText, 'dateText);timeView_v401_0 :=    {     menuLeftButtons:       [       	{       		_proto: protoTextButton,        		text: "Open Clock",        		buttonClickScript: func() begin GetRoot().alarm:Open(); GetRoot().alarm:MoveBehind(NIL);end       	},               	{       		_proto: protoTextButton,        		text: "Open Time Zones",       		buttonClickScript: func() begin GetRoot().worldClock:Open(); GetRoot().worldclock:MoveBehind(NIL); end       	}              ],     _proto: @401 /* newtStatusBar */    };AddStepForm(timeView, timeView_v401_0);constant |layout_timeView.t| := timeView;// End of file timeView.t// Beginning of file WhiteCtrTxt.proto_v218_0 :=    {text: "Wake Up Call",     viewBounds: {left: 0, top: 0, right: 0, bottom: 16},     viewFont: {family: 'geneva, face: kFaceNormal, size: 9, color: kRGB_Gray1},     viewJustify: 9778,     _proto: @218 /* protoStaticText */    };constant |layout_WhiteCtrTxt.proto| := _v218_0;// End of file WhiteCtrTxt.proto// Beginning of file ltrCmdItem.protoLLCmdItem :=    {viewBounds: {left: 0, top: 0, right: 0, bottom: 13},     viewFlags: 1,     viewFormat: 0,     viewJustify: 9776,     myLtr: "",     myTitle: "",     selected: nil,     myIcon: nil,     debug: "LLCmdItem",     viewClass: 74 /* clView */    };LLCmdItem_v76_0 :=    {icon: nil,     viewBounds: {left: 3, top: 0, right: 16, bottom: 0},     viewFlags: 1,     viewFormat: nil,     viewJustify: 198,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	self.icon := GetRoot().|DashBoard:FiveSpeed|.(myIcon);       	inherited:?ViewSetupFormScript();       end,     nameWidth: nil,     viewClass: 76 /* clPictureView */    };AddStepForm(LLCmdItem, LLCmdItem_v76_0);ltr :=    {text: "",     viewBounds: {left: 20, top: 0, right: 53, bottom: 0},     viewJustify: 8388800,     viewFont: ROM_fontSystem10Bold,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	self.text := myLtr;       	inherited:?ViewSetupFormScript();       end,     debug: "ltr",     _proto: @218 /* protoStaticText */    };AddStepForm(LLCmdItem, ltr);cmdName :=    {text: " ",     viewBounds: {left: 55, top: 0, right: 0, bottom: 0},     viewJustify: 8388848,     viewFont: ROM_fontSystem10,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	self.text := StyledStrTruncate(Clone(myTitle), nameWidth, ROM_fontSystem10);       	inherited:?ViewSetupFormScript();       end,     debug: "cmdName",     _proto: @218 /* protoStaticText */    };AddStepForm(LLCmdItem, cmdName);constant |layout_ltrCmdItem.proto| := LLCmdItem;// End of file ltrCmdItem.proto// Beginning of file aboutSlip.tabout :=    {text: kVsnStr,     viewBounds: {left: 0, top: 0, right: 200, bottom: 192},     viewJustify: 82,     viewFont: {family: 'espy, face: kFaceBold, size: 10, color: kRGB_Gray1},     viewFlags: 514,     viewFormat: 597,     viewIdleFrequency: 120000,     viewEffect: 77987840,     debug: "about",     _proto: @183 /* protoGlance */    };about_v0_0 :=    {text: "©1998, 1999 Five Speed Software, Inc.",     viewFont: {family: 'espy, face: kFaceBold, size: 9, color: kRGB_Gray1},     viewBounds: {left: 0, top: 16, right: 0, bottom: 32},     _proto: _v218_0    };AddStepForm(about, about_v0_0);about_v0_1 :=    {text: "www.fivespeed.com",     viewFont: {family: 'geneva, face: kFaceNormal, size: 9, color: kRGB_Gray1},     _proto: _v218_0    };AddStepForm(about, about_v0_1);about_v0_2 := {text: "", _proto: _v218_0};AddStepForm(about, about_v0_2);about_v0_3 :=    {text: "",     viewFont: {family: 'espy, face: kFaceNormal, size: 10, color: kRGB_Gray1},     _proto: _v218_0    };AddStepForm(about, about_v0_3);about_v0_4 :=    {text: "Perpetrator:",     viewFont: {family: 'espy, face: kFaceBold, size: 9, color: kRGB_Gray1},     _proto: _v218_0    };AddStepForm(about, about_v0_4);about_v0_5 := {text: "Mason Mark", _proto: _v218_0};AddStepForm(about, about_v0_5);about_v0_6 :=    {text: "Special Thanks To:",     viewFont: {family: 'espy, face: kFaceBold, size: 9, color: kRGB_Gray1},     _proto: _v218_0    };AddStepForm(about, about_v0_6);about_v74_0 :=    {viewBounds: {left: 0, top: 128, right: 0, bottom: 176},     viewFlags: 1,     viewFormat: 0,     viewJustify: 48,     viewClass: 74 /* clView */    };AddStepForm(about, about_v74_0);about_v74_0_v0_0 :=    {viewBounds: {left: 0, top: 0, right: 0, bottom: 48},     text:       "Our Heroic Beta Testers!!!       Portishead       Tamami Cat Ueda       Asahi Super Dry",     _proto: _v218_0    };AddStepForm(about_v74_0, about_v74_0_v0_0);about_v0_8 :=    {viewJustify: 8242, text: "comp.sys.newton.programmer", _proto: _v218_0};AddStepForm(about, about_v0_8);constant |layout_aboutSlip.t| := about;// End of file aboutSlip.t// Beginning of file LLHelp.tllhelp :=    {viewBounds: {left: 0, top: 9, right: 272, bottom: -9},     viewJustify: 208,     viewQuitScript:       // must return the value of inherited:?ViewQuitScript()       func()       begin       	GetRoot().(kAppSymbol).llHelpSlip := NIL;       	inherited:?ViewQuitScript();       end,     viewSetupDoneScript:       func()       begin       	if scrolling then        		listBox:RefreshArrows()       	else       		scroller:Hide();       end,     scrolling: nil,     debug: "llhelp",     _proto: @180 /* protoFloatNGo */    };llhelp_v229_0 :=    {title: "Dash Board Letter Launcher Shortcuts",     viewBounds: {left: -6, top: -3, right: 146, bottom: 13},     _proto: @229 /* protoTitle */    };AddStepForm(llhelp, llhelp_v229_0);listbox :=    {viewBounds: {left: 15, top: 31, right: -15, bottom: -25},     viewFlags: 33,     viewFormat: 592,     viewJustify: 240,     viewSetupChildrenScript:       func()       begin       	self.nameWidth := :LocalBox().right - :LocalBox().left - 57;       	listHeight := :LocalBox().bottom - :Localbox().top;       	totalHeight := 0;       	scrollOrigin := 0;       	self.stepChildren := [];       	foreach i in GetRoot().(kAppSymbol):DB_GetLLData().LLData do        		begin       			totalHeight := totalHeight + 13;       			AddArraySlot(self.stepChildren, {_Proto: getLayout("ltrcmdItem.proto"), myIcon: i.cmdItem.icon, myLtr: i.Name, myTitle: i.cmdItem.Text});              		end;       end,     listHeight: 0,     viewSetupDoneScript:       func()       begin       	if totalHeight > listHeight then       		scrolling := true;       end,     ViewScroll2DScript:       func(direction,extras)       begin       	if direction = 'up then       		begin       			if scrollOrigin > 0 then       				scrollOrigin := scrollOrigin - 13;       			else       				begin       					if not extras.stopped then       						begin       							scroller:PlayStopSound();       							extras.stopped := true;       						end;       					return;       				end;       		       		end       	else       		begin       			if scrollOrigin < totalHeight - listHeight then       				scrollOrigin := scrollOrigin + 13;       			else       				begin       					if not extras.stopped then       						begin       							scroller:PlayStopSound();       							extras.stopped := true;       						end;       					return;       				end;       		end;       	       	:SetOrigin(0,scrollorigin);       	:RefreshArrows();       	RefreshViews();                     	Inherited:?ViewScroll2DScript(direction,extras);       end,     scrollOrigin: 0,     totalHeight: 0,     RefreshArrows:       func()       begin       	if scrollOrigin > 0 then       		scroller:SetArrow('up, 'more)       	else       		scroller:SetArrow('up, 'normal);       		       	if scrollOrigin < totalHeight - listHeight then       		scroller:SetArrow('down, 'more)       	else       		scroller:SetArrow('down, 'normal);       	       end,     debug: "listbox",     viewClass: 74 /* clView */    };AddStepForm(llhelp, listbox);StepDeclare(llhelp, listbox, 'listbox);scroller :=    {     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	scrollView := listbox;       	inherited:?ViewSetupFormScript();       end,     viewJustify: 5216,     viewFlags: 1,     debug: "scroller",     _proto: @656 /* protoUpDownScroller */    };AddStepForm(llhelp, scroller);StepDeclare(llhelp, scroller, 'scroller);llhelp_v226_0 :=    {     buttonClickScript:       func()       begin       	local pApp := GetRoot().|DashBoardPrefs:FiveSpeed|;       	if pApp then       		begin       			pApp:Open();       			AddDeferredSend(pApp, 'GoToPanel, ['launcher]);       			:Parent():Close();       		end       	else       		:Notify(kNotifyAlert, kAppName, "Sorry, the Dash Board Prefs package must be installed in order to edit the Letter Launcher shortcuts.");       end,     text: "Edit Shortcuts",     viewBounds: {left: 15, top: -18, right: 109, bottom: -5},     viewJustify: 8388742,     _proto: @226 /* protoTextButton */    };AddStepForm(llhelp, llhelp_v226_0);constant |layout_LLHelp.t| := llhelp;// End of file LLHelp.t// Beginning of file battStatDisplay.protobattStatDisplay :=    {viewBounds: {left: 0, top: 0, right: 280, bottom: 130},     viewJustify: 80,     viewSetupChildrenScript:       func()       begin       	local T; //text to set display to              	local BS := BatteryStatus(0);       	       	if BS.acPower = 'yes then       		T := "AC Adapter"       	else if BS.acPower = 'no then       		T := "Battery"       	else       		T := "???";       	powerSrcTxt.text := Clone(T);       	       	local BT := BS.batteryType;       	if BT = 'alkaline then       		T := "Alkaline"       	else if BT = 'nicd then       		T := "Nickel-Cadmium"       	else if BT = 'nimh then       		T := "Nickel-metal Hydride"       	else if BT = 'lithium then       		T := "Lithium-ion"       	else       		T := "???";       	battTypeTxt.text := Clone(T);       		       	capacityTxt.text := BS.batteryCapacity & "% charged";       	       	local CS := BS.ChargeState;       	if CS = 'notCharging then       		T := "Not Charging"       	else if CS = 'discharging then       		T := "Discharging"       	else if CS = 'preliminaryCharging then       		T := "Preliminary Charging"       	else if CS = 'fastCharging then       		T := "Fast-charging"       	else if (CS = 'trickleChargeContinuous) or (CS = 'trickleCharging) then       		T := "Trickle-charging"       	else       		T := "???";       	chargeStateTxt.text := Clone(T);       	       	       	ambTempTxt.text := Floor(Round(BS.ambientTemp)) & "¡ Celsius / " & (if BS.ambientTemp < 1 then "really?" else Floor(Round((BS.ambientTemp * 1.8) + 32)) & "¡ Fahrenheit");       	battTempTxt.text := Floor(Round(BS.batteryTemp)) & "¡ Celsius / " & (if BS.batteryTemp < 1 then "really?" else Floor(Round((BS.batteryTemp * 1.8) + 32)) & "¡ Fahrenheit");       end,     viewIdleScript:       func()       begin       	:RedoChildren();       	1000;	// Return the number of milliseconds to delay or nil to end idling.       end,     viewSetupDoneScript:       func()       begin       	:SetUpIdle(900);       end,     ReorientToScreen:       func()       begin       	:Close();       end,     debug: "battStatDisplay",     _proto: @180 /* protoFloatNGo */    };powerSrc :=    {text: "Power Source:",     viewBounds: {left: 8, top: 23, right: 108, bottom: 39},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388609,     debug: "powerSrc",     _proto: @218 /* protoStaticText */    };AddStepForm(battStatDisplay, powerSrc);battType :=    {text: "Battery Type:",     viewBounds: {left: 8, top: 39, right: 108, bottom: 55},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388609,     debug: "battType",     _proto: @218 /* protoStaticText */    };AddStepForm(battStatDisplay, battType);capacity :=    {text: "Capacity:",     viewBounds: {left: 8, top: 55, right: 108, bottom: 71},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388609,     debug: "capacity",     _proto: @218 /* protoStaticText */    };AddStepForm(battStatDisplay, capacity);chargeState :=    {text: "Charge Status:",     viewBounds: {left: 8, top: 71, right: 108, bottom: 87},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388609,     viewIdleScript:       func()       begin       	:RedoChildren();       	1000;	// Return the number of milliseconds to delay or nil to end idling.       end,     debug: "chargeState",     _proto: @218 /* protoStaticText */    };AddStepForm(battStatDisplay, chargeState);ambTemp :=    {text: "Ambient Temp.:",     viewBounds: {left: 8, top: 87, right: 108, bottom: 103},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388609,     debug: "ambTemp",     _proto: @218 /* protoStaticText */    };AddStepForm(battStatDisplay, ambTemp);battTemp :=    {text: "Battery Temp.:",     viewBounds: {left: 8, top: 103, right: 108, bottom: 119},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388609,     debug: "battTemp",     _proto: @218 /* protoStaticText */    };AddStepForm(battStatDisplay, battTemp);powerSrcTxt :=    {text: "",     viewBounds: {left: 113, top: 23, right: 273, bottom: 39},     viewFont: ROM_fontSystem10,     debug: "powerSrcTxt",     _proto: @218 /* protoStaticText */    };AddStepForm(battStatDisplay, powerSrcTxt);StepDeclare(battStatDisplay, powerSrcTxt, 'powerSrcTxt);battTypeTxt :=    {text: "",     viewBounds: {left: 113, top: 39, right: 273, bottom: 55},     viewFont: ROM_fontSystem10,     debug: "battTypeTxt",     _proto: @218 /* protoStaticText */    };AddStepForm(battStatDisplay, battTypeTxt);StepDeclare(battStatDisplay, battTypeTxt, 'battTypeTxt);capacityTxt :=    {text: "",     viewBounds: {left: 113, top: 55, right: 273, bottom: 71},     viewFont: ROM_fontSystem10,     debug: "capacityTxt",     _proto: @218 /* protoStaticText */    };AddStepForm(battStatDisplay, capacityTxt);StepDeclare(battStatDisplay, capacityTxt, 'capacityTxt);chargeStateTxt :=    {text: "",     viewBounds: {left: 113, top: 71, right: 273, bottom: 87},     viewFont: ROM_fontSystem10,     debug: "chargeStateTxt",     _proto: @218 /* protoStaticText */    };AddStepForm(battStatDisplay, chargeStateTxt);StepDeclare(battStatDisplay, chargeStateTxt, 'chargeStateTxt);ambTempTxt :=    {text: "",     viewBounds: {left: 113, top: 87, right: 273, bottom: 103},     viewFont: ROM_fontSystem10,     debug: "ambTempTxt",     _proto: @218 /* protoStaticText */    };AddStepForm(battStatDisplay, ambTempTxt);StepDeclare(battStatDisplay, ambTempTxt, 'ambTempTxt);battTempTxt :=    {text: "",     viewBounds: {left: 113, top: 103, right: 273, bottom: 119},     viewFont: ROM_fontSystem10,     debug: "battTempTxt",     _proto: @218 /* protoStaticText */    };AddStepForm(battStatDisplay, battTempTxt);StepDeclare(battStatDisplay, battTempTxt, 'battTempTxt);battStatDisplay_v229_0 :=    {title: "Battery Status Report",     viewBounds: {left: 16, top: -1, right: 112, bottom: 15},     _proto: @229 /* protoTitle */    };AddStepForm(battStatDisplay, battStatDisplay_v229_0);constant |layout_battStatDisplay.proto| := battStatDisplay;// End of file battStatDisplay.proto// Beginning of file DB_MenuItem.protomenuItem :=    {viewBounds: {left: 0, top: 0, right: 0, bottom: 13},     viewFlags: 1,     viewFormat: 0,     viewJustify: 9776,     viewClickScript:       func(unit)       begin       	:Hilite(true);              	// Return true if click has been completely handled, nil otherwise       end,     text: "Menu Item",     DB_Blink:       func()       begin       	:Hilite(nil);       	RefreshViews();       	sleep(5);       	:Hilite(true);       	refreshviews();       	sleep(5);       	:Hilite(nil);       	refreshviews();       	sleep(5);       	:hilite(true);       	refreshviews();       	sleep(5);       	:Hilite(nil);              end,     viewSetupChildrenScript:       func()       begin       	SetValue(iconHolder, 'icon, self.icon);       	local textWidth := mWidth - 24;       	local textRight := 0;       	if self.hasSub then       		begin       			SetValue(subArrow, 'viewFlags, vVisible);       			textRight := textRight - 13;       			textWidth := textWidth - 13;       		end;       	if self.hasScroll then       		begin       			SetValue(subArrow, 'viewBounds, SetBounds(-32,0,-19,0));       			textWidth := textWidth - 16;       			textRight := textRight - 16;       		end;       	       	SetValue(itemText, 'viewBounds, SetBounds(24,0, textRight, 0));       	SetValue(itemText, 'text, StyledStrTruncate(self.text, textWidth, ROM_fontSystem10Bold));       end,     hasSub: nil,     hasScroll: nil,     icon:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);,     height: 13,     debug: "menuItem",     viewClass: 74 /* clView */    };iconHolder :=    {icon: nil,     viewBounds: {left: 3, top: 0, right: 19, bottom: 0},     viewFlags: 1,     viewFormat: nil,     viewJustify: 198,     viewTransferMode: 8,     debug: "iconHolder"     ,     viewClass: 76 /* clPictureView */    };AddStepForm(menuItem, iconHolder);StepDeclare(menuItem, iconHolder, 'iconHolder);subArrow :=    {     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 128}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 128}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewBounds: {left: -16, top: 0, right: -3, bottom: 0},     viewFlags: 0,     viewFormat: nil,     viewJustify: 230,     viewTransferMode: 8,     debug: "subArrow",     viewClass: 76 /* clPictureView */    };AddStepForm(menuItem, subArrow);StepDeclare(menuItem, subArrow, 'subArrow);itemText :=    {viewBounds: {left: 24, top: 0, right: 0, bottom: 0},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388852,     debug: "itemText",     _proto: @218 /* protoStaticText */    };AddStepForm(menuItem, itemText);StepDeclare(menuItem, itemText, 'itemText);constant |layout_DB_MenuItem.proto| := menuItem;// End of file DB_MenuItem.proto// Beginning of file DB_MenuItemDisabled.protomenuItem :=    {viewBounds: {left: 0, top: 0, right: 0, bottom: 13},     viewFlags: 1,     viewFormat: 0,     viewJustify: 9776,     viewClickScript:       func(unit)       begin       	:Hilite(true);              	// Return true if click has been completely handled, nil otherwise       end,     text: "Menu Item",     DB_Blink:       func()       begin       	:Hilite(nil);       	RefreshViews();       	sleep(5);       	:Hilite(true);       	refreshviews();       	sleep(5);       	:Hilite(nil);       	refreshviews();       	sleep(5);       	:hilite(true);       	refreshviews();       	sleep(5);       	:Hilite(nil);              end,     viewSetupChildrenScript:       func()       begin       	SetValue(iconHolder, 'icon, self.icon);       	SetValue(itemText, 'text, self.text);       	if self.hasSub then SetValue(subArrow, 'viewFlags, vVisible);       end,     hasSub: nil,     hasScroll: nil,     icon:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);,     height: 13,     debug: "menuItem",     viewClass: 74 /* clView */    };iconHolder :=    {     icon:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);,     viewBounds: {left: 3, top: 0, right: 19, bottom: 0},     viewFlags: 1,     viewFormat: nil,     viewJustify: 198,     viewTransferMode: 8,     debug: "iconHolder"     ,     viewClass: 76 /* clPictureView */    };AddStepForm(menuItem, iconHolder);StepDeclare(menuItem, iconHolder, 'iconHolder);subArrow :=    {     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 128}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 128}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewBounds: {left: -16, top: 0, right: -3, bottom: 0},     viewFlags: 0,     viewFormat: nil,     viewJustify: 230,     viewTransferMode: 8,     debug: "subArrow",     viewClass: 76 /* clPictureView */    };AddStepForm(menuItem, subArrow);StepDeclare(menuItem, subArrow, 'subArrow);itemText :=    {viewBounds: {left: 24, top: 0, right: 0, bottom: 0},     viewFont: {family: 'espy, face: kFaceBold, size: 10, color: kRGB_Gray9},     viewJustify: 8388852,     debug: "itemText",     _proto: @218 /* protoStaticText */    };AddStepForm(menuItem, itemText);StepDeclare(menuItem, itemText, 'itemText);constant |layout_DB_MenuItemDisabled.proto| := menuItem;// End of file DB_MenuItemDisabled.proto// Beginning of file DB_IconMenuItem.protomenuItem :=    {viewBounds: {left: 0, top: 0, right: 0, bottom: 31},     viewFlags: 1,     viewFormat: 0,     viewJustify: 9776,     viewClickScript:       func(unit)       begin       	:Hilite(true);              	// Return true if click has been completely handled, nil otherwise       end,     text: "Menu Item",     DB_Blink:       func()       begin       	:Hilite(nil);       	RefreshViews();       	sleep(5);       	:Hilite(true);       	refreshviews();       	sleep(5);       	:Hilite(nil);       	refreshviews();       	sleep(5);       	:hilite(true);       	refreshviews();       	sleep(5);       	:Hilite(nil);              end,     viewSetupChildrenScript:       func()       begin       	SetValue(iconHolder, 'icon, self.icon);       	local textWidth := mWidth - 44;       	local textRight := 0;       	if self.hasSub then       		begin       			SetValue(subArrow, 'viewFlags, vVisible);       			textRight := textRight - 13;       			textWidth := textWidth - 13;       		end;       	if self.hasScroll then       		begin       			SetValue(subArrow, 'viewBounds, SetBounds(-32,0,-19,0));       			textWidth := textWidth - 16;       			textRight := textRight - 16;       		end;       	       	SetValue(itemText, 'viewBounds, SetBounds(44,0, textRight, 0));       	SetValue(itemText, 'text, StyledStrTruncate(self.text, textWidth, ROM_fontSystem10Bold));       end              /************BEFORE I RE_ADDED SUBMENU ARROW :P*********       func()       begin       	SetValue(iconHolder, 'icon, self.icon);       	SetValue(itemText, 'text, self.text);       end       *****************************************************/,     hasSub: nil,     hasScroll: nil,     icon:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);,     height: 31,     debug: "menuItem",     viewClass: 74 /* clView */    };iconHolder :=    {icon: nil,     viewBounds: {left: 3, top: 0, right: 40, bottom: 0},     viewFlags: 1,     viewFormat: nil,     viewJustify: 198,     viewTransferMode: 8,     debug: "iconHolder"     ,     viewClass: 76 /* clPictureView */    };AddStepForm(menuItem, iconHolder);StepDeclare(menuItem, iconHolder, 'iconHolder);subArrow :=    {     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 128}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 128}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewBounds: {left: -16, top: 0, right: -3, bottom: 0},     viewFlags: 0,     viewFormat: nil,     viewJustify: 230,     viewTransferMode: 8,     debug: "subArrow",     viewClass: 76 /* clPictureView */    };AddStepForm(menuItem, subArrow);StepDeclare(menuItem, subArrow, 'subArrow);itemText :=    {viewBounds: {left: 44, top: 0, right: 0, bottom: 0},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388852,     debug: "itemText",     _proto: @218 /* protoStaticText */    };AddStepForm(menuItem, itemText);StepDeclare(menuItem, itemText, 'itemText);constant |layout_DB_IconMenuItem.proto| := menuItem;// End of file DB_IconMenuItem.proto// Beginning of file dbMenuSeparator.proto_v74_0 :=    {viewBounds: {left: 0, top: 0, right: 0, bottom: 6},     viewFlags: 1,     viewFormat: 0,     viewJustify: 9776,     HiliteUnique:       func(x)       begin               //do nothing; don't want anything to happen when pen is over separator               end,     height: 6,     viewClass: 74 /* clView */    };_v74_0_v74_0 :=    {viewBounds: {left: 0, top: 3, right: 0, bottom: 4},     viewJustify: 8388660,     viewFlags: 1,     viewFormat: 3,     viewClass: 74 /* clView */    };AddStepForm(_v74_0, _v74_0_v74_0);constant |layout_dbMenuSeparator.proto| := _v74_0;// End of file dbMenuSeparator.proto// Beginning of file dbHierMenu.protodbHierMenu :=    {     viewSetupDoneScript:       func()       begin       	       	if self.scrolling then        		begin       			scroller:Open();       			scroller:SetArrow('down, 'more);       		end;       	       	       	if not HasSlot(originator, 'hierarchy) then       			begin       				if originator.hierarchy then       					mOriginator.hierarchy := Clone(self.hierarchy)       				else       					originator.hierarchy := [];       			end;       			       	local theIndex := Length(originator.hierarchy); //this is ok because length returns the array element + 1 (except for 0)       	       	AddArraySlot(originator.hierarchy, self);                     	inherited:?ViewSetupDoneScript();		// this method is defined internally       end,     hierarchyLevel: nil,     viewFormat: 67109470,     dbChoiceMade: nil,     viewQuitScript:       // must return the value of inherited:?ViewQuitScript()       func()       begin              //if closing only this menu (cancelled), remove it from hierarchy array       //(if choice is made, the DBHandleMenuHit script will close and remove all        //views in hierarchy)              		       			if debugOn then       		begin       			write("\nRemoving element ");       			write(self.hierarchyLevel);       			write(" from originator's hierarchy array.");       		end;       		       			ArrayRemoveCount(originator.hierarchy, self.hierarchyLevel, 1);        			originator:DBMenuCancelled();       		       	inherited:?ViewQuitScript();       end,     DBFixBounds:       func()       begin       	//this didnt work so now this is just an empty func       	//SetValue(self, 'viewBounds, bbox);       end,     DBChildMenuCancelled:       func()       begin              	write("\nMenu (hierarchy level ");       	write(self.hierarchyLevel);       	write(" is calling DBChildMenuCancelled() now...\n");       	       	       	:DBMenuReactivate();       end,     scrolling: nil,     viewBounds: {left: 0, top: 0, right: 110, bottom: 46},     menuCOntents: nil,     _proto: @671 /* protoGeneralPopup */,     originator: nil,     popDown: nil,     viewJustify: 0,     AliasToLittleIcon:       func(theALias)  //modified 990226 to fix bug with snowflake icon appearing for built in apps       begin       	if debugOn then       		begin       			local sTicks := Ticks();       		end;              		local e := ResolveENtryAlias(theAlias);       		local theResult;       	       	if e then       		begin       			if e.Class and (e.class = 'ROMFormEntry or e.class = 'ROMScriptEntry) then //added 990226       				theResult := GetRoot().(kAppSymbol).iPackage       			else if not IsPackageActive(GetPkgRef(e.PackageName, EntryStore(e))) then       				theResult := GetRoot().(kAppSymbol).iSnowflake       			else if (e.class = 'BookEntry) or (e.class = 'HelpBookEntry) then       				theResult := GetRoot().(kAppSymbol).iBook       			else if (e.class = 'AutoEntry) or (e.class = '|????Entry|) then       				theResult := GetRoot().(kAppSymbol).iCube       			else       				theResult := GetRoot().(kAppSymbol).iPackage;       		end       	else       		theResult := GetRoot().(kAppSymbol).iQ;  //return ? icon if alias not resolved.       		       	if debugOn then       		begin       			local eTicks := Ticks();       			Print(eTicks - sTicks);       		end;              	return theResult;       end       ,     DBMenuReactivate:       func()       begin       	SetValue(self, 'viewFillPattern, kRGB_Gray0);       	SetValue(closeHider, 'viewFillPattern, kRGB_Gray0);       	menuItemHolder:DBDeselectAllItems();       end,     popup:       func(bbox)       begin       	SetValue(self, 'realFuckingBounds, bbox);       	SetValue(self, 'viewBounds, SetBounds(-10,-10,-10,-10));  //this hides it to prevent visible jump       	Inherited:?Popup(bbox);       	       	SetValue(self, 'viewBounds, bbox); //this puts it in the right place after it is set up properly.       	       	if self.popDown then          		:Effect(fxPopDownEffect+fxSteps(3)+fxStepTime(0), nil, nil, 'DBFixBounds, []);       	else       		:Effect(fxDrawerEffect+fxSteps(3)+fxStepTime(0), nil, nil, 'DBFixBounds, []);       	//:Show();       end,     GetBigIcon:       func(ikeSym) //takes a symbol for a little icon and returns the corresponding big icon (actual icon data)       begin       	local theIke := GetRoot().(kAppSymbol).bigIkes.(ikeSym);       	if theIke then       		return theIke       	else       		return @233[2].iconPro.unhilited;       end,     AliasToBigIcon:       func(theALias)       begin       	local theEntry := ResolveENtryAlias(theAlias);       	if theEntry then       		begin       			bIcon := if IsInteger(theEntry.iconPro) then       							@233[theEntry.iconPro].iconPro.unhilited        						else if  IsInteger(theEntry.icon) then        							@233[theEntry.icon].iconPro.unhilited       						else if theEntry.iconPro.unhilited then        							theEntry.iconPro.unhilited        						else if theEntry.icon then        							theEntry.icon        						else         							@233[5].iconPro.unhilited;       		end;       end       ,     viewEffect: 6424576,     DBHandleMenuHit:       func(itemIndex, sBounds)         begin       	       	AddDeferredSend(GetRoot().(kAppSymbol), 'DBHandleCommand, [menuContents[itemIndex], sBounds, self.originator]);       	       	if menuContents[itemIndex].submenu then       		:DBMenuDeactivate()       	else       		begin       			self.dbChoiceMade := true;       			originator:DBDestroyHierarchy();       		end;       	       end       ,     debug: "dbHierMenu",     realFuckingBounds: nil,     DBMenuClose:       func()       begin       :Close();       end,     DBMenuDeactivate:       func()       begin       	SetValue(self, 'viewFillPattern, kRGB_Gray3);       	SetValue(closeHider, 'viewFillPattern, kRGB_Gray3);	       end,     viewFillPattern: kRGB_Gray0    };closeHider :=    {viewBounds: {left: -20, top: -20, right: 0, bottom: 0},     viewFlags: 1,     viewFormat: 14,     viewJustify: 160,     viewFillPattern: kRGB_Gray0     ,     debug: "closeHider",     viewClass: 74 /* clView */    };AddStepForm(dbHierMenu, closeHider);StepDeclare(dbHierMenu, closeHider, 'closeHider);menuItemHolder :=    {viewBounds: {left: 0, top: 0, right: 0, bottom: 0},     viewFlags: 513,     viewFormat: 0,     viewJustify: 240,     viewSetupChildrenScript:       //MAIN MENU GENERATION ROUTINE--THIS IS WHERE MENUDATA ARRAYS ARE TURNED INTO MENUS       func()       begin       	if debugOn then       		begin       			write("\n the menuItemHolder's viewSetupChildren script takes ");       			local sTicks := ticks();       		end;       		       	self.stepChildren := [];       	local scrollBool := :Parent().scrolling;       	local theTitle;       	local theIcon;       	local itemsHeight := 0;       	local iHeight;              	       	if not forceBig then       		begin       			for itemIndex := self.index to (self.totalItems - 1) do       				begin       					local i := :Parent().menuContents[itemIndex];       					theTitle := i.text;       					theIcon := if i.icon = 'RunTime then  :AliasToLittleIcon(i.data) else GetRoot().(kAppSymbol).(i.icon); //get icon; 'RunTime means we must calc it at run time       					iHeight := 13; //unless its a separator       					if (i.type = 'sub) or (i.type = 'dynSub) then       							local theMenuItem := {_proto: GetLayout("DB_MenuItem.proto"), text: theTitle, hasScroll: scrollBool, hasSub: true, icon: theIcon}       					else if i.type = 'separator then       						begin       							local theMenuItem := {_proto: GetLayout("dbMenuSeparator.proto")};       							iHeight := 6;       						end       					else if i.type = 'appIcon then       						begin       							theIcon := i.bigIcon;       							local theMenuItem := {_proto: GetLayout("DB_IconMenuItem.proto"), text: theTitle, hasScroll: scrollBool,  hasSub: nil, icon: theIcon};       							iHeight := 31;       						end       					else if i.type = 'folder then       						local theMenuItem := {_proto: GetLayout("DB_MenuItem.proto"), text: theTitle, hasScroll: scrollBool,  hasSub: true, icon: theIcon}       					else if i.type = 'pkg then       							local theMenuItem := {_proto: GetLayout("DB_MenuItem.proto"), text: theTitle,  hasScroll: scrollBool, hasSub: NIL, icon: theIcon};       					else if i.type = 'disabled then       						local theMenuItem := {_proto: GetLayout("DB_MenuItemDisabled.proto"), text: theTitle,  hasScroll: scrollBool, hasSub: NIL, icon: theIcon}	       					else       						local theMenuItem := {_proto: GetLayout("DB_MenuItem.proto"), text: theTitle,  hasScroll: scrollBool, hasSub: NIL, icon: theIcon};       						       					itemsHeight := itemsHeight + iHeight;       					       					if itemsHeight <= self.myHeight then        						self.lastItemIndex := itemIndex       					else       						break;       					AddArraySlot(self.stepChildren, theMenuItem);       				end;       			end       		else  //ELSE WE ARE IN MONDO DOODICAL BIG-IKE MODERZ!       			begin       				for itemIndex := self.index to (self.totalItems - 1) do       					begin       						local i := :Parent().menuContents[itemIndex];       						theTitle := i.text;       						theIcon := i.icon;       						       						if i.fs then       							iHeight := 13       						else       							iHeight := 31; //unless its a separator       							       						if (i.type = 'sub) or (i.type = 'dynSub) then       							begin       								if i.fs then       									local theMenuItem := {_proto: GetLayout("DB_MenuItem.proto"), text: theTitle, hasScroll: scrollBool, hasSub: true, icon: GetRoot().(kAppSymbol).(theIcon)}       								else       									local theMenuItem := {_proto: GetLayout("DB_IconMenuItem.proto"), text: theTitle, hasScroll: scrollBool, hasSub: true, icon: :GetBigIcon(theIcon)};       							end       						else if i.type = 'separator then       							begin       								local theMenuItem := {_proto: GetLayout("dbMenuSeparator.proto")};       								iHeight := 6;       							end       						else if i.type = 'appIcon then       							begin       								theIcon := i.bigIcon;       								local theMenuItem := {_proto: GetLayout("DB_IconMenuItem.proto"), text: theTitle, hasScroll: scrollBool,  hasSub: nil, icon: theIcon};       								iHeight := 31;       							end       						else if i.type = 'folder then       							begin       								if i.fs then       									local theMenuItem := {_proto: GetLayout("DB_MenuItem.proto"), text: theTitle, hasScroll: scrollBool,  hasSub: true, icon: GetRoot().(kAppSymbol).(theIcon)}       								else       									local theMenuItem := {_proto: GetLayout("DB_IconMenuItem.proto"), text: theTitle, hasScroll: scrollBool,  hasSub: true, icon: :GetBigIcon(theIcon)};       							end       						else if i.type = 'pkg then       							begin       								if i.fs then       									local theMenuItem := {_proto: GetLayout("DB_MenuItem.proto"), text: theTitle,  hasScroll: scrollBool, hasSub: NIL, icon: GetRoot().(kAppSymbol).(theIcon)}       								else       									local theMenuItem := {_proto: GetLayout("DB_IconMenuItem.proto"), text: theTitle,  hasScroll: scrollBool, hasSub: NIL, icon: :AliasToBigIcon(i.data)};       							end       						else if i.type = 'disabled then       							begin       								if i.fs then       									local theMenuItem := {_proto: GetLayout("DB_MenuItemDisabled.proto"), text: theTitle,  hasScroll: scrollBool, hasSub: NIL, icon: GetRoot().(kAppSymbol).(theIcon)}	       								else       									local theMenuItem := {_proto: GetLayout("DB_IconMenuItem.proto"), disabled: TRUE, text: theTitle,  hasScroll: scrollBool, hasSub: NIL, icon: :GetBigIcon(theIcon)};       							end       						else       							begin       								if i.fs then       									local theMenuItem := {_proto: GetLayout("DB_MenuItem.proto"), text: theTitle,  hasScroll: scrollBool, hasSub: NIL, icon: GetRoot().(kAppSymbol).(theIcon)}       								else       									local theMenuItem := {_proto: GetLayout("DB_IconMenuItem.proto"), text: theTitle,  hasScroll: scrollBool, hasSub: NIL, icon: :GetBigIcon(theIcon)};       							end;       										       						itemsHeight := itemsHeight + iHeight;       												       						if itemsHeight <= self.myHeight then        							self.lastItemIndex := itemIndex       						else       							break;       						AddArraySlot(self.stepChildren, theMenuItem);       					end;       			end;              	if debugOn then       		begin       			local eTicks := Ticks();       			write(eTicks - sTicks);       			write(" ticks. ***\n");       			print("INDEX, MYHEIGHT, ITEMSHEIGHT, AND LASTITEMINDEX ARE:");       			print(self.index);       			print(myHeight);       			print(itemsHeight);       			print(lastItemIndex);       		end;	       				       end,     viewClickScript:       //THIS ROUTINE handles all menu behavior and passing on        //the menu item selected. It is responsible for determining validity of an item selected and        //passing on valid menu selections.              //980531: added "+ index" to fix bullshit worng item bug when accessing menuCOntents array              func(unit)       begin       Clicker();       	InkOff(unit);       	local myBounds := :GlobalOuterBox(); 								//WARNING!@ DOES THIS THROW OFF TRACKING BY WIDTH OF BORDER (2 PIXELS)??!?       	local oldItem := NIL;       	local currItem := NIL;       	local finalItem := NIL;       	local validItem := NIL;       	local sBounds := NIL;       	local itemViews := :ChildViewFrames();       	       	self.itemRects := [];       	foreach i in :ChildViewFrames() do       		AddArraySlot(self.itemRects, i:GlobalBox());  					//this sucks to do this here but it DOESNT FUCKING WORK anywhere else       	       	while not StrokeDone(unit) do       		begin       			local currPoint := GetPoint(finalXY, unit);  				//the "current" pen point (last one tracked)       			       			if IsPtInRect(currPoint.x, currPoint.y, myBounds) then  	//pen is within menu rect       				begin       					for i := 0 to (Length(itemRects) - 1) do       						begin       							if IsPtInRect(currPoint.x, currPoint.y, itemRects[i]) then       								begin       									currItem := i;       									break;       								end;       						end;  											//now currItem is the item under the pen       									       					if not currItem = oldItem then 						//hilite currItem if it isn't already hilited and isn't a separator       						begin       							if not (menuContents[currItem + index].type = 'separator) and not (menuContents[currItem + index].type = 'disabled) then       								begin       									validItem := currItem;       									itemViews[currItem]:HiliteUnique(true);       									oldItem := currItem;       								end       							else       								:DBDeselectAllItems();					//if curr item is unselectable, still unhilite the last hilited view       						end;       					       					end       			else   														//pen is outside of menu so unhilite everythig and set validItem to NIL       				begin       					if currItem then       						itemViews[currItem]:Hilite(nil);       					validItem := NIL;       				end;       				       			sleep(5);       		end;       	       	local finalPoint := GetPoint(finalXY, unit);  						//pen has been lifted;        	       	if IsPtInRect(finalPoint.x, finalPoint.y, myBounds) then  			//only do something if it was lifted within menu (should we close menu if lifted outside?)       		begin       			       			for i := 0 to (Length(itemRects) - 1) do       			begin       				if IsPtInRect(finalPoint.x, finalPoint.y, itemRects[i]) then       					begin       						finalItem := i;       						break;       					end;       			end;   											//final item now is the item under the pen when it was lifted       		        		 if finalItem then       			begin       				 if not menuContents[finalItem + index].type = 'separator and not menuContents[finalItem + index].type = 'disabled then  //if it isnt a separator, then set validItem to it       				 	validItem := finalItem       				 else       				 	validItem := NIL;       			end;       		 							        		if validItem then  									//if a valid item has been chosen, act on it       			begin       				if not validItem = oldItem then       					itemViews[validItem]:HiliteUnique(true);       				if (menuContents[validItem + index].type <> 'sub) and (menuContents[validItem + index].type <> 'folder) and (menuContents[validItem + index].type <> 'dynSub) then        					itemViews[validItem]:DB_Blink();       				sBounds := itemViews[validItem]:GlobalBox();       				:Parent():DBHandleMenuHit(validItem + index, sBounds);       			end       		else       			begin       				:DBDeselectAllItems();  //NEW AS OF 980527       			end;       		end       	else       		begin       			:DBDeselectAllItems();  //NEW AS OF 980527       		end;              	       	true;              end              // I'm pretty fresh!       ,     DBDeselectAllItems:       func()       begin       	foreach i in :ChildViewFrames() do       		i:Hilite(nil);       end,     itemRects: nil,     index: 0,     totalItems: nil,     displaylength: nil,     DB_ScrollUp:              func(extras)       begin       	local stdHeight := 13;       	if forceBig then stdHeight := 31;       	if self.index > 0 then       		begin              			//HERE WO GO BRO!       			local iHeight, currItem, tempIndex;       			local itemsHeight := 0;       			local postScrollIndex := self.index;       			       			for itemIndex := self.index to 0 by -1 do       				begin       					local currItem := :Parent().menuContents[itemIndex];       					       					if currItem.fs then       						iHeight := 13       					else       						iHeight := stdHeight; //unless its a separator or appIcon       						       					if currItem.type = 'separator then       						iHeight := 6       					else if currItem.type = 'appIcon then       						iHeight := 31;       					itemsHeight := itemsHeight + iHeight;       					       					if itemsHeight >= self.myHeight then        						break       					else       						postScrollIndex := itemIndex;       				end;       				       			self.index := postScrollIndex;                     			:RedoChildren();       			RefreshViews();       			if self.index = 0 then       				begin       					scroller:SetArrow('up, 'normal);       						if extras.prestopped then       							begin       								if not extras.stopped then       									begin       										extras.stopped := true;       										scroller:PlayStopSound();       									end;       							end       						else       							extras.prestopped := true;       						       				end       			else       				scroller:SetArrow('up, 'more);       		scroller:SetArrow('down, 'more);       		end       	else       		begin       			if not extras.stopped then       				begin       					extras.stopped := true;       					scroller:PlayStopSound();       				end;       			scroller:SetArrow('up, 'normal);       		end;       end,     DB_ScrollDown:              func(extras)       begin       	local stdHeight := 13;       	if forceBig then stdHeight := 31;       	       	if self.lastItemIndex + 1 < self.totalItems then       		begin       			local iHeight, currItem, tempIndex;       			local itemsHeight := 0;       			       			local postScrollIndex := self.lastItemIndex;       		       			for itemIndex := self.lastItemIndex to (self.totalItems - 1) do       				begin       					local currItem := :Parent().menuContents[itemIndex];       					       					if currItem.fs then       						iHeight := 13       					else       						iHeight := stdHeight; //unless its a separator or appIcon       					if currItem.type = 'separator then       							iHeight := 6       					else if currItem.type = 'appIcon then       							iHeight := 31;       									       					itemsHeight := itemsHeight + iHeight;       					       					if itemsHeight >= self.myHeight then        						break;       				end;       				       			tempIndex := postScrollIndex;       			       			while itemsHeight < self.myHeight do       				begin       					tempIndex := tempIndex - 1;       					currItem := :Parent().menuContents[tempIndex];       					       					if currItem.fs then       						iHeight := 13       					else       						iHeight := stdHeight; //unless its a separator or appIcon       						       					if currItem.type = 'separator then       							iHeight := 6       					else if currItem.type = 'appIcon then       							iHeight := 31;       									       					itemsHeight := itemsHeight + iHeight;       					       					if itemsHeight >= self.myHeight then        						break       					else       						postScrollIndex := tempIndex;       				       				end;       				       			self.index := postScrollIndex;       			:RedoChildren();       			RefreshViews();       			       			if self.lastItemIndex + 1 = self.totalItems then       				begin       					scroller:SetArrow('down, 'normal);       					if extras.prestopped then  //so it doesnt play stop snd the first time menu scrolls to end, but only after it already at end       						begin       							if not extras.stopped then       								begin       									extras.stopped := true;       									scroller:PlayStopSound();       								end;       						end       					else       						extras.prestopped := true;       				end       			else       				scroller:SetArrow('down, 'more);       			scroller:SetArrow('up, 'more);       		end       	else       		begin       			if not extras.stopped then       				begin       					extras.stopped := true;       					scroller:PlayStopSound();       				end;        			scroller:SetArrow('down, 'normal);       		end;              end,     myHeight: nil,     lastItemIndex: nil,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	self.totalItems := Length(:Parent().menuContents);       	local theHeight := :parent().realFuckingBounds; //set during dad's popup() meth cuz otherwise we get our bogus hack bounds       	self.myHeight := theHeight.bottom - theHeight.top;              	inherited:?ViewSetupFormScript();       end,     debug: "menuItemHolder",     viewClass: 74 /* clView */    };AddStepForm(dbHierMenu, menuItemHolder);StepDeclare(dbHierMenu, menuItemHolder, 'menuItemHolder);scroller :=    {viewFlags: 0,     ViewScroll2DScript:       func(direction,extras)       begin       	if direction = 'up then       		menuItemHolder:DB_ScrollUp(extras)       	else if direction = 'down then       		menuItemHolder:DB_ScrollDown(extras);       	//Inherited:?ViewScroll2DScript(direction,extras);       end,     debug: "scroller",     _proto: @656 /* protoUpDownScroller */    };AddStepForm(dbHierMenu, scroller);StepDeclare(dbHierMenu, scroller, 'scroller);constant |layout_dbHierMenu.proto| := dbHierMenu;// End of file dbHierMenu.proto// Beginning of file dbGenericGreyBtn.prototheBtn :=    {viewFlags: 513,     viewFormat: 0,     viewFillPattern: kRGB_Gray4,     viewBounds: {left: 1, top: 1, right: 48, bottom: 15},     viewClickScript:       func(unit)       begin       	if not self.noBLOT then  //noBLOT slot set to true for L button to prevent BLOT then BL btn turn off       		if GetRoot().(kAppSymbol):BLOT() then return true;              	       	if :TrackHilite(unit) then       		begin       			:Hilite(true);       			:ButtonClickScript();       		end;       		       	return true;       		       	// Return true if click has been completely handled, nil otherwise       end,     buttonPressedScript:       func()       begin       end,     buttonClickScript:       func()       begin              	:Hilite(nil); //unhilite button after action completes       end,     text: "",     DBMenuCancelled:       func()       begin              	if Length(self.hierarchy) > 0 then 		//then menu cancelled was not last, must reactivate older menu       		begin       			local hLevel := Length(self.hierarchy) - 1;       			self.hierarchy[hLevel]:DBMenuReactivate();       		end       	else									//the menu cancelled was last; we should unhilite        		begin       			:Hilite(nil);       		end;              end,     DBDestroyHierarchy:       func()       begin              	if debugOn then print("Calling DBDestroyHierarchy() now...");       	       	i := Length(self.hierarchy) - 1; 	       	       	while i > -1 do       	begin       		self.hierarchy[i]:Close();       		i := i -1;       	end;       	       	self.hierarchy := [];       	       	:Hilite(nil);       end,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	if not self.dontCalcBounds then       		self.viewBounds := :DB_CalcBounds(self.viewBounds);       	inherited:?ViewSetupFormScript();       end,     debug: "theBtn",     viewClass: 74 /* clView */    };theBtn_v74_0 :=    {viewBounds: {left: 1, top: 1, right: 0, bottom: 0},     viewFlags: 1,     viewFormat: 14,     viewJustify: 240,     viewFillPattern:       kRGB_Gray7  //orig 11       ,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	local TheO := GetRoot().(kAppSymbol).Orient;       	if theO = 3 then       		self.viewFillPattern := kRGB_Gray0       	else       		RemoveSlot(self, 'viewFillPattern);              	inherited:?ViewSetupFormScript();       end,     viewClass: 74 /* clView */    };AddStepForm(theBtn, theBtn_v74_0);theBtn_v74_0 :=    {viewBounds: {left: 0, top: 0, right: -1, bottom: -1},     viewFlags: 1,     viewFormat: 14,     viewJustify: 240,     viewFillPattern:       kRGB_Gray0  //originally gray0!       ,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	local TheO := GetRoot().(kAppSymbol).Orient;       	if theO = 3 then       		self.viewFillPattern := kRGB_Gray7       	else       		RemoveSlot(self, 'viewFillPattern);              	inherited:?ViewSetupFormScript();       end,     viewClass: 74 /* clView */    };AddStepForm(theBtn, theBtn_v74_0);theBtn_v74_0 :=    {viewBounds: {left: 1, top: 1, right: -1, bottom: -1},     viewFlags: 1,     viewFormat: 14,     viewJustify: 240,     viewFillPattern:       kRGB_Gray2  //originally gray3 or gray4!       ,     viewClass: 74 /* clView */    };AddStepForm(theBtn, theBtn_v74_0);iconBox :=    {viewBounds: {left: 1, top: 1, right: -1, bottom: -1},     viewFlags: 33,     viewFormat: 0,     viewJustify: 246,     debug: "iconBox",     viewClass: 74 /* clView */    };AddStepForm(theBtn, iconBox);StepDeclare(theBtn, iconBox, 'iconBox);iconBox_v76_0 :=    {viewBounds: {left: 0, top: 0, right: 0, bottom: 0},     viewJustify: 8388854,     viewFormat: 0,     viewFlags: 1,     viewTransferMode: 8,     viewClass: 76 /* clPictureView */    };AddStepForm(iconBox, iconBox_v76_0);theBtn_v218_0 :=    {viewBounds: {left: 1, top: 1, right: -1, bottom: -1},     viewJustify: 8388854,     viewFormat: 0,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	SetValue(self, 'text, :Parent().text);       	inherited:?ViewSetupFormScript();       end,     viewFont: ROM_fontSystem9,     text: "Btn",     _proto: @218 /* protoStaticText */    };AddStepForm(theBtn, theBtn_v218_0);constant |layout_dbGenericGreyBtn.proto| := theBtn;// End of file dbGenericGreyBtn.proto// Beginning of file volPopup.protovolpopup :=    {viewBounds: {left: 0, top: 0, right: 126, bottom: 60},     popup:       func(bbox)       begin       	SetValue(self, 'viewBounds, SetBounds(0,0,0,0));  //this hides it to prevent visible jump       	Inherited:?Popup(bbox);       	SetValue(self, 'viewBounds, bbox); //this puts it in the right place after it is set up properly.       	       end,     Affirmative:       func()       begin       	if context then       		context:Hilite(nil);       end;,     debug: "volpopup",     _proto: @671 /* protoGeneralPopup */    };volpopup_v74_0 :=    {viewBounds: {left: 0, top: 0, right: 126, bottom: 60},     viewFormat: 0,     viewFlags: 1,     volValArray:       [       	-32768.0,       	-31.9760,       	-29.6920,       	-27.4080,       	-25.1240,       	-22.8400,       	-20.5560,       	-18.2720,       	-15.9880,       	-13.7040,       	-11.4200,       	-9.13599,       	-6.85199,       	-4.56799,       	-2.28400,       	0.00000       ],     viewClass: 74 /* clView */    };AddStepForm(volpopup, volpopup_v74_0);volpopup_v74_0_v218_0 :=    {text: "Volume",     viewBounds: {left: 0, top: 6, right: 0, bottom: 22},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388658,     _proto: @218 /* protoStaticText */    };AddStepForm(volpopup_v74_0, volpopup_v74_0_v218_0);slider :=    {     changedSlider:       func()       begin       	GetRoot().(kAppSymbol):DB_SetSystemVolume(volValArray[viewValue]);       	:SysBeep();       end,     viewBounds: {left: 0, top: 26, right: 60, bottom: 35},     viewSetupFormScript:       func()       begin       	       	//For some reason, LSearch() couldnt find the val in the array (?!)       	       	local vVal := 0;       	local currVol := GetSystemVolume();       	for i := 1 to 15  do       		if volValArray[i] <= currVol then vVal := i;       		       	viewValue := vVal;       	       	// set the initial values for the slider       end,     viewValue: 15,     minValue: 0,     maxValue: 15,     viewJustify: 18,     debug: "slider",     _proto: @212 /* protoSlider */    };AddStepForm(volpopup_v74_0, slider);StepDeclare(volpopup, slider, 'slider);muteBtn :=    {     buttonClickScript:       func()       begin       	if Muted then  //do unmute       		begin       			local umVol := GetRoot().(kAppSymbol).dbPrefs.muteVol;       			if not umVol then umVol := -18.2720;       			GetRoot().(kAppSymbol):DB_SetSystemVolume(umVol);       			:sysBeep();       			:lockscreen(true);	//hacky way to redraw slider!       			slider:close();	       			slider:open();       			refreshviews();       			:lockscreen(nil);       			:Parent():Parent():Close();       		end       	else	//do mute       		begin       			GetRoot().(kAppSymbol).dbPrefs.muteVol := GetUserConfig('soundVolumeDB);       			GetRoot().(kAppSymbol):DB_SetSystemVolume(-32768.0);       			SetValue(slider, 'viewValue, 0);       			:Parent():Parent():Close();       			EntryChangeXmit(GetRoot().(kAppSymbol).dbPrefs, kAppSYmbol);       		end;       		       end,     text: "Mute",     viewBounds: {left: 36, top: 42, right: 92, bottom: 54}     ,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	if GetUserConfig('soundVolumeDB) <= -32768.0 then       		begin       			self.Muted := true;       			self.text := "Unmute";       		end       	else       		begin       			self.Muted := NIL;       			self.text := "Mute";       		end;       	inherited:?ViewSetupFormScript();       end,     Muted: nil,     debug: "muteBtn",     _proto: @226 /* protoTextButton */    };AddStepForm(volpopup_v74_0, muteBtn);StepDeclare(volpopup, muteBtn, 'muteBtn);constant |layout_volPopup.proto| := volpopup;// End of file volPopup.proto// Beginning of file dbIconBtn.proto_v76_0 :=    {     icon:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);,     viewBounds: {left: 1, top: 1, right: 33, bottom: 30},     viewFlags: 513,     viewFormat: nil,     dbPkg: nil,     icon2:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);,     viewJustify: 6,     icon1:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin              	//IF PKG THEN GET ICON(S).       	       	if self.dbPkg then       		begin       			local theEntry := ResolveEntryAlias(dbPkg);       			       				self.icon1 := if IsInteger(theEntry.iconPro) then       						@233[theEntry.iconPro].iconPro.unhilited        					else if  IsInteger(theEntry.icon) then        						@233[theEntry.icon].iconPro.unhilited       					else if theEntry.iconPro.unhilited then        						theEntry.iconPro.unhilited        					else if theEntry.icon then        						theEntry.icon        					else        						GetRoot().(kAppSymbol).iBigPkg;       				       				self.icon2 := if IsInteger(theEntry.iconPro) then       						@233[theEntry.iconPro].iconPro.hilited        					else if  IsInteger(theEntry.icon) then        						@233[theEntry.icon].iconPro.hilited       					else if theEntry.iconPro.hilited then        						theEntry.iconPro.hilited        					else        						NIL;       				       			self.icon := self.icon1;       		end;       	       		local iWidth, iHeight;       		if self.icon.bounds then       			begin       				 iWidth := self.icon.bounds.right - self.icon.bounds.left;       				 iHeight := self.icon.bounds.bottom - self.icon.bounds.top;       			end       		else       			begin       				iWidth := 26;       				iHeight := 26;       			end;       		       		local newbounds := Clone(self.viewBounds);       		local theO := GetRoot().(kAppSymbol).Orient;       		if theO = 0 or theO = 2 then 							//then shrink horizontally       			newBounds.right := self.viewbounds.left + iWidth;       		else													//else shrink vertically       			newbounds.bottom := self.viewBounds.top + iHeight;       		self.viewBounds := newBounds;       		:Parent().totalIconWidth := :Parent().totalIconWidth + iWidth;       		:Parent().totalIconHeight := :Parent().totalIconHeight + iHeight;       		       	inherited:?ViewSetupFormScript();       end,     viewClickScript:       func(unit)       begin       	       	if :BLOT() then return true;              	if not self.dbPkg then return true;       	InkOff(unit);       	Clicker();       	if self.icon2 then        		SetValue(self, 'icon, self.icon2)       	else       		:Hilite(true);       		RefreshViews();       		       	local startPoint := GetPoint(firstXY, unit);       	local currPoint, dontLaunch;       	local dragResult := 0;              	While not StrokeDone(unit) do       		begin       			currPoint := GetPoint(finalXY, unit);       			if (ABS(currPoint.x - startPoint.x) > 12) or (ABS(currPoint.y - startPoint.y) > 12) then       				begin       					dontLaunch := true;       					if not self.noDrag then //noDrag must be set for fixed entries, like the Extras icon.       						dragResult := :DND(unit, :globalbox(), getroot():globalbox(), nil, [{types: ['|icon:db:fivespeed|], view: self, dragRef: nil}]);       					break;       				end;       		Sleep(3);       		end;       				              	if (dragResult = 0) and (not dontLaunch) then       		:DBHandleCommand({type: 'pkg, text: Clone(ResolveEntryAlias(dbPkg).text), submenu: NIL, data: dbPkg, icon:'iPackage}, nil, nil);       	else if dragResult = 1 then       		GetRoot().(kAppSymbol):DBHandleIconRemove(dbPkg);       	       	SetValue(self, 'icon, self.icon1);       	:Hilite(nil);       	RefreshViews();       	true;       end,     viewTransferMode: 8,     ViewGetDropTypesScript:       func(currentPoint)        begin       	return  ['|icon:db:fivespeed|];  //only can handle drag of icon from dash board (to rearrange icons)       	//return an array of symbols       end,     ViewDropScript:       func(dropType,dropData,dropPt)       begin       	:DBHandleIconDrop(dropType,dropData,dropPt);              end,     ViewGetDropDataScript:       func(dragType,dragRef)       begin       	return {type: 'dbIcon, droppedIndex: dropIndex};       	//return a frame containing the actual data to be dropped       end,     ViewDropRemoveScript:       func(dragRef)       begin       	 return nil;       	//return true or nil       end,     ViewDropMoveScript:       func(dragRef,offset,lastDragPt,copy)       begin       	if debugOn then PRINT("view Drop Move ascript!");       	return nil;       	//return true or nil       end,     DND:       func(a,b,c,d,e)  //( unit, dragBounds, limitBounds, copy, dragInfo));       begin       	call kDragAndDropLtdFunc with (self,a,b,c,d,e);       end,     ViewDropApproveScript:       func(destView)       begin       	if not destView then       		return NIL;       		       	if destView.dbType = '|dbIconBtn:FiveSpeed| then       		return true       	else       		return nil; //we dont allow any dropping, because actually we trigger on rejected drop       end,     dbType: '|dbIconBtn:FiveSpeed|,     viewClass: 76 /* clPictureView */    };constant |layout_dbIconBtn.proto| := _v76_0;// End of file dbIconBtn.proto// Beginning of file contrastPopup.protocPopup :=    {viewBounds: {left: 0, top: 0, right: 126, bottom: 46},     popup:       func(bbox)       begin       	SetValue(self, 'viewBounds, SetBounds(0,0,0,0));  //this hides it to prevent visible jump       	Inherited:?Popup(bbox);       	SetValue(self, 'viewBounds, bbox); //this puts it in the right place after it is set up properly.       	       end,     Affirmative:       func()       begin       	if context then       		context:Hilite(nil);       end;,     debug: "cPopup",     _proto: @671 /* protoGeneralPopup */    };cPopup_v74_0 :=    {viewBounds: {left: 0, top: 0, right: 126, bottom: 46},     viewFlags: 1,     viewFormat: 0,     viewClass: 74 /* clView */    };AddStepForm(cPopup, cPopup_v74_0);cText :=    {text: "Contrast",     viewBounds: {left: 0, top: 6, right: 0, bottom: 22},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388658,     debug: "cText",     _proto: @218 /* protoStaticText */    };AddStepForm(cPopup_v74_0, cText);cSlider :=    {     changedSlider:       func()       begin       	SetUserConfig('lcdContrast, viewValue);       end,     viewBounds: {left: 0, top: 29, right: 60, bottom: 38},     viewSetupFormScript:       func()       begin       	local contHack;       	if getUserConfig('UniC) then       		contHack := GetUserConfig('UniC)       	else       		contHack := 0;       	       	self.maxValue := 16 + contHack;       	self.minValue := -16 + contHack;       	self.viewValue := GetUserConfig('lcdContrast);       	       	       	// set the initial values for the slider       end,     viewValue: 50,     trackSlider:       func()       begin       	SetLCDContrast(viewValue);       end,     minValue: -16,     maxValue: 16,     viewJustify: 18,     debug: "cSlider",     _proto: @212 /* protoSlider */    };AddStepForm(cPopup_v74_0, cSlider);constant |layout_contrastPopup.proto| := cPopup;// End of file contrastPopup.proto// Beginning of file dbTimeBtn.proto_v0_0 :=    {     dbButtonClickScript:       func()       begin       	GetRoot().alarm:Toggle();       end,     _proto: theBtn    };_v0_0_v226_0 :=    {viewBounds: {left: 0, top: 0, right: 0, bottom: 0},     viewJustify: 8388854,     viewFormat: 0,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	SetValue(self, 'text, TimeStr(time(), ROM_dateTimeStrSpecs.shortestTimeStrSpec));       	:SetUpIdle(10000);       	inherited:?ViewSetupFormScript();       end,     buttonClickScript:       func()       begin       :parent():dbButtonClickScript();       end,     viewIdleScript:       func()       begin       	SetValue(self, 'text, TimeStr(time(), ROM_dateTimeStrSpecs.shortestTimeStrSpec));       	return 10000;	// Return the number of milliseconds to delay or nil to end idling.       end,     viewFont: ROM_fontSystem9,     _proto: @226 /* protoTextButton */    };AddStepForm(_v0_0, _v0_0_v226_0);constant |layout_dbTimeBtn.proto| := _v0_0;// End of file dbTimeBtn.proto// Beginning of file screenRebuildSlip.trbslip :=    {viewBounds: {left: 0, top: 0, right: 320, bottom: 296},     viewFlags: 609,     viewFormat: 1,     viewJustify: 0,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin              	local params := GetAppParams();       	self.viewbounds :=       		if GetRoot().buttons.soft then       			UnionRect(params.appAreaBounds, OffsetRect(params.buttonBarBounds, -params.appAreaGlobalLeft, -params.appAreaGlobalTop));       		else       			params.appAreaBounds;inherited:?ViewSetupFormScript();       end,     ReorientToScreen:       func()       begin       	:Close();       end,     viewClickScript:       func(unit)       begin       :close();       true;       	// Return true if click has been completely handled, nil otherwise       end,     rotation: NIL,     viewSetupDoneScript:       func()       begin       	       	//print("RESBUILD SLIP::");       	//print(self);       	//print(rotation);       	       	       	if rotation = NIL then       		begin       			rebuildingPic:Hide();       			return;       		end;       		       	//otherwise, lets make sure the view reflects how we are rotating.       		       	rebuildingPic.icon := MakeBitmap(320,320, nil);       	realview:ViewIntoBitmap(nil, nil, rebuildingPic.icon);       			       	if rotation = 'R then       		MungeBitmap(rebuildingPic.icon, 'rotateRight, nil)       	else if rotation = 'L then       		MungeBitmap(rebuildingPic.icon, 'rotateLeft, nil)       	else       		MungeBitmap(rebuildingPic.icon, 'rotate180, nil);       		       	realview:Dirty();       	RefreshViews();              		                     end,     debug: "rbslip",     viewClass: 74 /* clView */    };realview :=    {viewBounds: {left: 0, top: 0, right: 320, bottom: 100},     viewFlags: 1,     viewFormat: 0,     viewJustify: 80,     debug: "realview",     viewClass: 74 /* clView */    };AddStepForm(rbslip, realview);StepDeclare(rbslip, realview, 'realview);realview_v218_0 :=    {text: "Dash Board is rebuilding the display",     viewBounds: {left: 0, top: 22, right: 242, bottom: 54},     viewFont: ROM_fontSystem10Bold,     viewJustify: 8388634,     _proto: @218 /* protoStaticText */    };AddStepForm(realview, realview_v218_0);realview_v218_0 :=    {text: "Please wait a few seconds...",     viewBounds: {left: 0, top: 60, right: 0, bottom: 76},     viewFont: SimpleFont9     ,     viewJustify: 8388662,     _proto: @218 /* protoStaticText */    };AddStepForm(realview, realview_v218_0);rebuildingPic :=    {icon: nil,     viewBounds: {left: 0, top: 0, right: 0, bottom: 0},     viewFlags: 1,     viewFormat: 257,     viewJustify: 246,     debug: "rebuildingPic",     viewClass: 76 /* clPictureView */    };AddStepForm(rbslip, rebuildingPic);StepDeclare(rbslip, rebuildingPic, 'rebuildingPic);constant |layout_screenRebuildSlip.t| := rbslip;// End of file screenRebuildSlip.t// Beginning of file miniBar.tminibar :=    {viewBounds: {left: 3, top: -35, right: 91, bottom: -21},     viewFlags: 576,     viewFormat: 33555038,     viewClickScript:       func(unit)       begin       	:Drag(unit, GetAppParams().AppAreaBounds);       	:MoveBehind(NIL);       	       	true;       end,     viewFillPattern: kRGB_Gray5,     DB_CalcBounds:       func(bounds)       begin       	return bounds; //dummy method, not used in minibar but needed to allow generic grey button proto to work without having to override every one       end,     viewSetupDoneScript:       func()       begin       	//:SetUpIdle(1000);       	       	self.bar := true; //ADDED 1.5.1b1 to work around conflict with TapBar; this prevent tapbar from closing DB minibar       	       	GetRoot().|DBminibar:fivespeed| := self;       end,     viewIdleScript:       func()       begin       //	if (HasSlot(newtMenuBtn, 'hierarchy) = NIL) or (Length(newtMenuBtn.hierarchy) = 0) then       //		:MoveBehind(NIL);       	1000;	// Return the number of milliseconds to delay or nil to end idling.       end,     viewQuitScript:       // must return the value of inherited:?ViewQuitScript()       func()       begin              	RemoveSlot(GetRoot(), '|DBminibar:fivespeed|);       	inherited:?ViewQuitScript();       end,     viewJustify: 128,     ReorientToScreen:       func()       begin       	AddDeferredSend(self, 'EnsureMyBoundsAreCool, NIL);       end,     ToggleMinimize:       func() //toggle between minimized minibar and normal minibar.       begin       	       	local okBounds := GetAppParams().appAreaBounds;       	local myBounds := Clone(self.viewBounds);       	       	if self.viewbounds.right - self.viewbounds.left > 7 then       		begin       			SetValue(self, 'viewBounds, SetBounds(myBounds.left, myBounds.top, myBounds.left + 7, myBounds.bottom));       		end       	else       		begin       			if myBounds.left + 91 > okBounds.right then				//89 = 87 width + 2 for border       				begin       					myBounds.left := okBounds.right - 91;       				end;       				       			myBounds.right := myBounds.left + 89;       			SetValue(self, 'viewBounds, myBounds);       		end;       	RefreshViews();       end,     EnsureMyBoundsAreCool:       func()   //make sure we are on screen and okay ot rok and rol       begin       	local gBounds := :GlobalOuterBox();       	local aBounds := GetAppParams().appAreaBounds;       	       	if (gBounds.left < aBounds.left) or (gBounds.right > aBounds.right) or (gBounds.top < aBounds.top) or (gBounds.bottom > aBounds.bottom) then       		begin       			SetValue(self, 'viewBounds, self.defaultBounds);       		end;       	:MoveBehind(NIL);       end,     defaultBounds: SetBounds(3, -35, 91,-21),     DeferredClearDisplayGlitches:       func()       begin              	local funky := func() begin if GetRoot().|DBminibar:FiveSpeed| then  GetRoot().|DBminibar:FiveSpeed|:Dirty() end;       	       	AddDeferredCall(funky, NIL)              end,     debug: "minibar",     viewClass: 74 /* clView */    };newtMenuBtn :=    {viewBounds: {left: 9, top: 0, right: 25, bottom: 14},     menuCOntents: [],     text: "",     DBDestroyHierarchy:       func()       begin              	if debugOn then print("Calling DBDestroyHierarchy() now...");       	       	i := Length(self.hierarchy) - 1; 	       	       	while i > -1 do       	begin       		self.hierarchy[i]:Close();       		i := i -1;       	end;       	       	self.hierarchy := [];       	       	:Hilite(nil);       	       	:Parent():DeferredClearDisplayGlitches() //added 990301 moments before release!! 1.5       end,     DBMenuCancelled:       func()       begin              	if Length(self.hierarchy) > 0 then 		//then menu cancelled was not last, must reactivate older menu       		begin       			local hLevel := Length(self.hierarchy) - 1;       			self.hierarchy[hLevel]:DBMenuReactivate();       		end       	else									//the menu cancelled was last; we should unhilite        		begin       			:Hilite(nil);       			:Parent():DeferredClearDisplayGlitches() //added 990301 moments before release!! 1.5       		end;              end,     buttonClickScript:       func()       begin	       	       	:Hilite(true);       	local myBounds := :GlobalBox();              	       	local menuData := Clone(GetRoot().(kAppSymbol):DB_GetNMenuData().nMenu);  //this clone and shit immediately below are NEW in 1.5d23       	AddArraySlot(menuData, {type: 'separator, text: "", submenu: NIL, data: nil, icon: 'iNone});       	AddArraySlot(menuData, {type: 'folder, text: "Button Bar Icons", submenu: TRUE, icon: 'iFolder, data: '_buttonbar});       	AddArraySlot(menuData, {type: 'separator, text: "", submenu: NIL, data: nil, icon: 'iNone});       	AddArraySlot(menuData, {type: 'cmd, text: "Show Button Bar", submenu: NIL, data: 'DB_UnHide, icon: 'iShowBB});       	       	GetRoot().(kAppSymbol):DBBuildHierMenu(myBounds, menuData, self);       		       	       end,     dontCalcBounds: true,     debug: "newtMenuBtn",     _proto: theBtn    };AddStepForm(minibar, newtMenuBtn);StepDeclare(minibar, newtMenuBtn, 'newtMenuBtn);newtMenuBtn_v76_0 :=    {     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 197}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewBounds: {left: 1, top: 1, right: -1, bottom: -1},     viewFlags: 1,     viewFormat: nil,     viewTransferMode: 8,     viewJustify: 240,     viewClass: 76 /* clPictureView */    };AddStepForm(newtMenuBtn, newtMenuBtn_v76_0);extrasbtn :=    {viewBounds: {left: 25, top: 0, right: 41, bottom: 14},     buttonClickScript:       func()       begin       	GetRoot().extrasdrawer:Open();       	GetRoot().extrasDrawer:MoveBehind(NIL);       	:Parent():MoveBehind(NIL);       	:Hilite(nil); //unhilite button after action completes       	       	:Parent():DeferredClearDisplayGlitches() //added 990301 moments before release!! 1.5       end,     debug: "extrasbtn",     _proto: theBtn    };AddStepForm(minibar, extrasbtn);extrasbtn_v76_0 :=    {     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 202}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewBounds: {left: 1, top: 1, right: -1, bottom: -1},     viewFlags: 1,     viewFormat: nil,     viewJustify: 246,     viewTransferMode: 8,     viewClass: 76 /* clPictureView */    };AddStepForm(extrasbtn, extrasbtn_v76_0);upBtn :=    {viewBounds: {left: 41, top: 0, right: 57, bottom: 14},     buttonPressedScript:       func()       begin       PostCommand('viewfrontmost, 45);       RefreshViews();              :Parent():DeferredClearDisplayGlitches() //added 990301 moments before release!! 1.5       end,     debug: "upBtn",     _proto: theBtn    };AddStepForm(minibar, upBtn);upBtn_v76_0 :=    {     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                 resource: 4000}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                   resource: 4000}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewBounds: {left: 1, top: 1, right: -1, bottom: -1},     viewFlags: 1,     viewFormat: nil,     viewJustify: 246,     viewTransferMode: 8,     viewClass: 76 /* clPictureView */    };AddStepForm(upBtn, upBtn_v76_0);ovBtn :=    {viewBounds: {left: 57, top: 0, right: 73, bottom: 14},     buttonClickScript:       func()       begin       	PostCommand('viewFrontmost, 51);       	AddDeferredSend(self, 'Hilite, [nil]);       	       	:Parent():DeferredClearDisplayGlitches() //added 990301 moments before release!! 1.5       end,     debug: "ovBtn",     _proto: theBtn    };AddStepForm(minibar, ovBtn);ovBtn_v76_0 :=    {     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                 resource: 4002}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                   resource: 4002}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewBounds: {left: 1, top: 1, right: -1, bottom: -1},     viewFlags: 1,     viewFormat: nil,     viewJustify: 246,     viewTransferMode: 8,     viewClass: 76 /* clPictureView */    };AddStepForm(ovBtn, ovBtn_v76_0);downbtn :=    {viewBounds: {left: 73, top: 0, right: 89, bottom: 14},     buttonPressedScript:       func()       begin       	PostCommand('viewfrontmost, 46);       	RefreshViews();       	       	:Parent():DeferredClearDisplayGlitches() //added 990301 moments before release!! 1.5       end,     debug: "downbtn",     _proto: theBtn    };AddStepForm(minibar, downbtn);downbtn_v76_0 :=    {     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                 resource: 4001}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                   resource: 4001}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewBounds: {left: 1, top: 1, right: -1, bottom: -1},     viewFlags: 1,     viewFormat: nil,     viewJustify: 246,     viewTransferMode: 8,     viewClass: 76 /* clPictureView */    };AddStepForm(downbtn, downbtn_v76_0);dragger :=    {     icon:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                   resource: 128}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);,     viewBounds: {left: 0, top: 0, right: 9, bottom: 14},     viewFlags: 513,     viewFormat: nil,     viewClickScript:       func(unit)       begin       	Clicker();       	local startPoint := GetPoint(firstXY, unit);       	local currPoint;       	local itsADrag := NIL;       	local dragResult := 0;              	While not StrokeDone(unit) do       		begin       			currPoint := GetPoint(finalXY, unit);       			if (ABS(currPoint.x - startPoint.x) > 2) or (ABS(currPoint.y - startPoint.y) > 2) then       				begin       					itsADrag := true;       					:Parent():Drag(unit, NIL);       					break true;       				end;       		Sleep(3);       		end;       				              	if not itsADrag then       		:Parent():ToggleMinimize();       		       	:Parent():Movebehind(NIL);       		       	true;	       	       	// Return true if click has been completely handled, nil otherwise       end,     debug: "dragger",     viewClass: 76 /* clPictureView */    };AddStepForm(minibar, dragger);constant |layout_miniBar.t| := minibar;// End of file miniBar.t// Beginning of file main.tdashBoard :=    {     cmdSleep:       func()       begin       	PowerOff('user);       end,     AliasIdiots:       //RUPERT SCHLICK DEBUG INFO ADDED 990226. REMOVE ALL PRINT STATEMENTS BEFORE RELEASE.              func()       begin       	local biPrefs := GetAppPrefs('|BuiltIn:DB:FiveSpeed|, {init: NIL});       	if biPrefs.init then return; //dont run unless we've never done this before.       		       	local idiotSyms :=       		'[paperroll, extrasDrawer, cardFile, cardFile, iobox, callapp, calculator, calendar, card, stylePalette, Connection,       		worldClock, preferenceRoll, undo, alarm, Formulas, findDrawer, assistant, setup, handwritingpractice       		];       	       	local theC, theE, theI, theSym;       	theC := GetRoot().extrasdrawer:GetPartCursor(nil,nil,'_all);       	theE := theC:Entry();       	while theE do        		begin       			theI := GetRoot().extrasdrawer:GetPartEntryData(theE);       			theSym := theI.appSymbol;       			if LSearch(idiotSyms, theSym, 0, '|=|, nil) then       				begin       					biPrefs.(theSym) := MakeEntryAlias(theE);       					//PRINT("AliasIdiots() found and added this package:"); //LATER       					//PRINT(theE); //LATER       				end;       			theE := theC:Next();       		end;       		       	theC := GetRoot().extrasdrawer:GetPartCursor(nil,nil,'_buttonbar);       	theE := theC:Entry();       	while theE do        		begin       			theI := GetRoot().extrasdrawer:GetPartEntryData(theE);       			theSym := theI.appSymbol;       			if LSearch(idiotSyms, theSym, 0, '|=|, nil) then       				begin       					biPrefs.(theSym) := MakeEntryAlias(theE);       					//PRINT("AliasIdiots() found and added this package (BB cursor):"); //LATER       					//PRINT(theE); //LATER       				end;       			theE := theC:Next();       		end;       		       		       	biPrefs.init := TRUE; //mark that we've done this before       	EntryChangeXmit(biPrefs, kAppSymbol);       end,     cmdNewMtg:       func()       begin       	:DB_NewDatesItem('meeting);       end,     iSpeakerMute:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 251}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdSysInfo:       func()       begin       	       end,     cmdRotate90L:       func()       begin       	:DB_Rotate('L);       end,     iLCard0:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 192}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 192}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DB_UndoRecentPatch:       func()       begin       	//RemoveSlot(GetRoot(), 'buttonToggle);  //OLD SHIT PRE PROTO PATCHIN!       	//RemoveSlot(GetRoot().TinyTim, 'OpenHelpBook);       	       	if GetRoot().(kAppSymbol).btp and (GetRoot().(kAppSymbol).btp.tag = kAppSymbol) then ReplaceObject(GetRoot().(kAppSymbol).btp, GetRoot().(kAppSymbol).btp._proto);       	if GetRoot().(kAppSymbol).ttp and (GetRoot().(kAppSymbol).ttp.tag = kAppSymbol) then ReplaceObject(GetRoot().(kAppSymbol).ttp, GetRoot().(kAppSymbol).ttp._proto);       end;,     UpdatePrefs:       func()       begin              		       	if not HasSlot(dbPrefs, 'pVsn) then  //then we need to update prefs to Prefs Version 2       		begin       			GetRoot().(kAppSymbol).dbPrefs := :CreateDefaultPrefs();       		end;       	       	if dbPrefs.pVsn < 8 then  //then nuke & rebuild prefs       		begin       			GetRoot().(kAppSymbol).dbPrefs := :CreateDefaultPrefs();       		end;              	dbPrefs.pVsn := kPrefsVsn;  //update prefs version to reflect current build's kPrefsVsn number       	EntryChangeXmit(dbPrefs, kAppSymbol);              end,     ButtonToggleOverride:       func(theSelf)       begin              	       	if theSelf.appSymbol = '|PNNames:SilverWare| then       		begin       			:PNButtonTapped();       			return true;       		end       	else       		return NIL; //Continue running ButtonToggle patch code       end,     dynRunning:       func()  //try to get list of running apps       begin       	if debugON then Print("\n$$$$$$$$$$$$$$$$$$$$$$$$ Beginning dynRunning() print dump. (Hello, Michael.)  :-) $$$$$$$$$$$$$$$$$$$$$$$$$$$");              	if debugOn then local sTicks := Ticks();       	       	local mData := [];       	local bIcon, theName, itemData;       	local biList := GetAppPrefs('|BuiltIn:DB:FiveSpeed|, {init:NIL});              	foreach slotSym,slotVal in GetRoot() do       		begin       			bIcon := NIL;       			itemData := NIL;       			theName := "Unknown Pkg! Please report.";       			if (LSearch('[root, buttons, |DashBoard:FiveSpeed|, notification, filingslip, currentkeyboard], slotSym, 0, '|=|, nil) = NIL) and (IsFrame(slotVal)) and (slotVal.viewCobject) then       				begin       					if debugON then PRINT("iteratiing thru the dynRecent() loop, looking for:");       					if debugON then PRINT(slotSym);       					local pRef := NIL;       					local theProto := Getroot().(slotSym);       					while not pRef do  //can't just use _proto slot, because if app is patched with proto-patch technique, the real prot may be farther down the chain       						begin       							theProto := theProto._proto;       							if theProto = NIL then break;       							pRef:=ObjectPkgRef(theProto);       						end;       					       					if pRef then        						begin       							if debugON then PRINT("this app seems to be in a PACKAGE");       							local pInfo:=getpkgrefinfo(pRef);       							if IsPackageActive(pRef) then        								begin       									local partCurse := GetRoot().extrasDrawer:getPartCursor(pInfo.title, pInfo.store, '_all);  //MUST ALSO RUN FOR BUTTON BAR TOO! STUPID ASSHOLES!       									local partCurse2 := GetRoot().extrasDrawer:getPartCursor(pInfo.title, pInfo.store, '_buttonbar);        									local e1 := partCurse:ENtry();       									local e2 := partCurse2:Entry();       									while e1 or e2 do       										begin       											if e1 then       												begin       													if e1.app = slotSym then       														begin       															itemData := MakeEntryAlias(e1);       															if e1.text then theName := Clone(e1.text);       															bIcon := :DB_EntryBigIcon(e1);       															if debugON then Print("the entry corresponding to" && SPrintObject(slotSym) && "has been located.");       															break;       														end;       												end;       											if e2 then       												begin       													if e2.app = slotSym then       														begin       															itemData := MakeEntryAlias(e2);       															if e2.text then theName := Clone(e2.text);       															bIcon :=  :DB_EntryBigIcon(e2);       															if debugON then Print("the entry corresponding to" && SPrintObject(slotSym) && "has been located.");       															break;       														end;       												end;       											e1 := partCurse:Next();       											e2 := partCurse2:Next();       										end;              								end       							else       								begin       									if debugOn then Print("pRef was located, but IsPackageActive() call returned NIL for" && SPrintObject(slotSym));       								end;       						end       					else if slotSym = 'TinyTim then       						begin       							if debugON then PRINT(" This app appears to be a TinyTim book.........");       							bIcon := @233[1].iconPro.unhilited;       							local bpRef := ObjectPkgRef(getroot().tinytim.bookref);       							local bISBN := getroot().tinytim.bookref.isbn;       							if bpRef then        								begin       									local bpInfo := GetPkgRefInfo(bpRef);       									local bCurse := GetRoot().extrasdrawer:GetPartCursor(bpInfo.title, bpInfo.store, '_all);       									local bCurse2 := GetRoot().extrasdrawer:GetPartCursor(bpInfo.title, bpInfo.store, '_buttonbar);       									local b1 := bCurse:Entry();       									local b2 := bCurse2:Entry();       									while b1 or b2 do        										begin       											if b1 then       												begin       													if StrEqual(b1.isbn, bISBN) then       														begin       															if b1.text then theName := b1.text;       															itemData := MakeEntryAlias(b1);        															break;       														end;       												end;       											if b2 then       												begin       													if StrEqual(b2.isbn, bISBN) then       														begin       															if b2.text then theName := b2.text;       															itemData := MakeEntryAlias(b2);       															break;       														end;       												end;       											b1 := bCurse:Next();       											b2 := bCurse2:Next();       										end;       								end;       						end       					else if slotSym = 'copperfield then       						begin       							if debugON then PRINT(" This app appears to be a Copperfield book.........");       							bIcon := @233[0].iconPro.unhilited;       							local bpRef := ObjectPkgRef(getroot().copperfield.library.(Intern(GetRoot().copperfield.isbn)).book);       							local bISBN := GetRoot().copperfield.isbn;       							if bpRef then        								begin       									local bpInfo := GetPkgRefInfo(bpRef);       									local bCurse := GetRoot().extrasdrawer:GetPartCursor(bpInfo.title, bpInfo.store, '_all);       									local bCurse2 := GetRoot().extrasdrawer:GetPartCursor(bpInfo.title, bpInfo.store, '_buttonbar);       									local b1 := bCurse:Entry();       									local b2 := bCurse2:Entry();       									while b1 or b2 do        										begin       											if b1 then       												begin       													if StrEqual(b1.isbn, bISBN) then       														begin       															if b1.text then theName := b1.text;       															itemData := MakeEntryAlias(b1);        															break;       														end;       												end;       											if b2 then       												begin       													if StrEqual(b2.isbn, bISBN) then       														begin       															if b2.text then theName := b2.text;       															itemData := MakeEntryAlias(b2);       															break;       														end;       												end;       											b1 := bCurse:Next();       											b2 := bCurse2:Next();       										end;       								end;       						end       					else    //else (i think) it must be a built in app, cuz it not in any package and not book       						begin       							if debugON then PRINT("This app appears to be BUILT IN");       							itemData := biList.(slotSym);       							if itemData then       								begin       									local theEntry := ResolveEntryAlias(itemData);       									       									//BEGIN 1.1 BUG FIX       									if not theEntry then       										begin       											PRINT("DashBoard says: 1.1 bug fixing the idiots frame....");       											:AliasIdiotsForced();       											 biList := GetAppPrefs('|BuiltIn:DB:FiveSpeed|, {init:NIL});       				 							itemData := biList.(slotSym);       											theEntry := ResolveEntryAlias(itemData);       										end;       									//END 1.1 BUG FIX       									       									if IsInteger(theEntry.iconPro) then       										bIcon := @233[theEntry.iconPro].iconPro.unhilited;       									else       										bIcon := if theEntry.iconPro.unhilited then theEntry.iconPro.unhilited else if theEntry.icon then theEntry.icon else GetRoot().(kAppSymbol).iBigPkg;       									theName := if theEntry.text then Clone(theEntry.text) else "no Text!?";       								end;       						end;       					       					if not itemData then       						begin       							if debugON then PRINT("dynRecent() says: *******@!!!!!!*@*@*@**@*@@*@*@**!@!@* UN_ADDABLE ITEM!!! : " & SPrintObject(slotSym));       						end       					else       						begin       							AddArraySlot(mData, {type: 'appIcon, text: theName, icon: 'iPackage, bigIcon: bIcon, data: itemData});       						end;       				end;		       		end;              	if debugOn then       		begin        			eTicks := Ticks();       			PRINT("TICKZOIDS for dynRUNNING():" && (eTicks - sTicks));       		end;       	       	if debugON then Print("$$$$$$$$$$$$$$$$$$$$$$$$ End of dynRunning() print dump. $$$$$$$$$$$$$$$$$$$$$$$$$$$");              	return mData;       end       ,     iCard0:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 161}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 161}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     HandleHackos:       func() //here is where we handle bad pkgs which conflict with dash board       begin       		       	:ManHandleHacko("ButtonBar Plus:SAS", 'dieBBP, "Button Bar Plus");       	:ManHandleHacko("StartBar:SAS", 'dieSB, "Start Bar");       end,     viewSetupDoneScript:       func()       begin              	//HANDLE DEATH CONDITIONS       	if self.dieBBP then       		begin       			:RejectHacko("Button Bar Plus");       		end       	else if self.dieSB then       		begin       			:RejectHacko("Start Bar");       		end       	else if self.death then       		begin       			:Notify(kNotifyAlert, kAppName, "Dash Board can't launch because the button bar has been altered in an unsupported way. " &       			"Utilities that modify the system button bar may prevent Dash Board from working properly. To use Dash Board, please disable any such utilities.");       			AddDeferredSend(self, 'close, nil);       		end;       		       	:compatCheckFreezing();       	       	:SetupIdle(dbPrefs.refresh);       	       	AddDeferredSend(self, 'DB_Nagasa, NIL);       	       	AddDelayedSend(self, 'DB_Refresh, nil, 1000);       	       	RegSoupChange("packages", '|pSoup:db:fivespeed|, func(a,b,c,d) if getroot().(kAppSymbol) then getroot().(kAppSymbol):DBPSoupChange(a,b,c,d););              	RegUserConfigChange(kAppSymbol, func(x) begin if GetRoot().(kAppSymbol) then GetRoot().(kAppSymbol):UCfg(x) end);       	       	if IsFrame(battStatSlip) then       		if battStatSlip.viewCObject then battStatSlip:Close();       		       		       end,     UCfg:       func(x)       begin       	if debugOn then       		begin       			PRINT("USER CONFIG CHANGE, SYM IS:");       			PRINT(x);       		end;       	       	//ERROR: I beleive that this is the cause of the mysterious errors on reboot/install with GL installed        	// (even tho i cant see why GL must be installed)       	// but anyway i install it in a try block        	       	try       		if x = 'soundVolumedB then       			volBtn:Update()       		else if x = 'defaultStoreSig then       			storeBtn:Update()       		else if x = 'blessedApp then       			begin       				:Pope();       				:DB_RedoDB();       			end       		else if x = 'timeformat then       			timeBtn:Update()       	onexception |evt.ex| do       		begin       			if debugOn then Print("¥¥¥¥¥UCfg exception handler is supressing an exception raised with UCfg( " & SPrintObject(x) & ")...");       		end;       end,     iShowBB:       MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                 resource: 4011}),           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                 resource: 4011}),           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                   resource: 4011}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);,     iMenu:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 132}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 132}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdInProgress: nil,     newtIcon: nil,     timeSlip: nil,     DBRunScript:       func(commandItem)       begin       	local scriptEntry;       	       	If IsEntryAlias(commandItem.data) then       		begin       			if debugOn then Print("YES IT IS A SCRIPT ALIAS (dbRunSript())");       			scriptEntry := ResolveEntryAlias(commandItem.data);       		end       	else 	//else this must be a fake entry passed from DB Prefs Script Editor for testing! data will then contain raw script text string       		scriptEntry := commandItem.data;       		       	// 1. TRY TO RESOLVE THE SCRIPT ALIAS       	if not scriptEntry then       		begin       			:Notify(kNotifyAlert, "Dash Board Missing Script", "The selected script, \"" & commandItem.text & "\", could not be found. It has either been deleted or is on a card that has been removed. " &       			"(Verifying Dash Board's preferences in the Dash Board Prefs app will remove invalid references).");       			return;       		end;       		       	//666. make a newfangled script frame to insert the script in       	local scriptFrame :=        		{       			_proto: GetRoot().(kAppSymbol),       			_parent: GetRoot(),       			|scriptFunc:FiveSpeed|: NIL, //here is where script should go.       			|scriptName:FiveSpeed|: commandItem.text,       			       			//next shit is all for GestureLaunch compatibility       			icon: NIL,         			stroke: NIL,       			parm: NIL,       			config: {text: "Dash Board does not support this GestureLaunch feature"},       			scriptclass: NIL,       			word: NIL,       			       			//whatever else later       		};       	       	scriptFrame.script := scriptframe.|scriptFunc:FiveSpeed|; //this is cuz DB stores it in tagged slot, GL in 'script       	       	// 2. TRY TO COMPILE THE TEXT SCRIPT CODE       	try       		//local x := Compile(scriptEntry.scriptText)       		scriptFrame.|scriptFunc:FiveSpeed| := Compile(scriptEntry.scriptText)       	onexception |evt.ex| do       		begin       			if not dbPrefs.ignoreSErrs then       				begin       					print("Message from Dash Board: An exception was thrown while attempting to compile the script \"" & commandItem.text & "\"");       					print("Message from Dash Board: Here is the exception that was thrown:");       					print(currentexception());       					:Notify(kNotifyAlert, "Dash Board Compile Error", "An exception was thrown while attempting to compile the script \"" & commandItem.text & "\"");       				end;       			ReThrow();       		end;       		       	// 3. TRY TO EXECUTE THE COMPILED CODE       	try       		//call x with ()       		scriptFrame:|scriptFunc:FiveSpeed|();       	onexception |evt.ex| do       		begin       		if not dbPrefs.ignoreSErrs then       				begin       					print("Message from Dash Board: An exception was thrown while attempting to execute the script \"" & commandItem.text & "\"");       					print("Message from Dash Board: Here is the exception that was thrown:");       					print(currentexception());       					:Notify(kNotifyAlert, "Dash Board Script Error", "An exception was thrown while attempting to execute the script \"" & commandItem.text & "\"");       				end;       			ReThrow();       		end       end,     cmdKbd2:       func()       begin       	GetRoot().numericKeyboard:Open();       end,     O1:       '[       	initialized,       	              ],     cmdMIMtg:       func()       begin       	if GetRoot().|MI:SilverWARE| then       		GetRoot().|MI:SilverWARE|:AddNewMeeting(NIL);       	else       		:SysBeep();       end,     iSleep:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 196}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 196}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewFormat: 14,     iRotate90L:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 147}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 147}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdBLOff:       func()       begin       	BackLight(NIL);       end,     iTimeDate:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 258}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     db_SpecialItems:       [       	{type: 'cmd, data: 'cmd61, icon: 'i61, text: "-10061 Fix"},       	{type: 'cmd, data: 'cmdAlignPen, icon: 'iAlignPen, text: "Align Pen"},        	{type: 'cmd, data: 'cmdAbout, icon: 'iAbout, text: "About Dash Board"},       	{type: 'cmd, data: 'cmdBLOn, icon: 'iBLOn, text: "Backlight On"},       	{type: 'cmd, data: 'cmdBLOff, icon: 'iBLOff, text: "Backlight Off"},       	{type: 'cmd, data: 'cmdQuit, icon: 'iClose, text: "Close Dash Board"},        	{type: 'cmd, data: 'cmdConnect, icon: 'iConnect, text: "Connect"},        	{type: 'cmd, data: 'cmdSDS1, icon: 'cardIcon, text: "Default Card 1"},       	{type: 'cmd, data: 'cmdSDS2, icon: 'cardIcon, text: "Default Card 2"},       	{type: 'cmd, data: 'cmdSDS0, icon: 'newtIcon, text: "Default Internal"},       	{type: 'cmd, data: 'cmdGuestModeOn, icon: 'iGuestMode, text: "HWR Guest Mode On"},        	{type: 'cmd, data: 'cmdGuestModeOff, icon: 'iGuestModeOff, text: "HWR Guest Mode Off"},        	{type: 'cmd, data: 'cmdInsertTime, icon: 'iTime, text: "Insert Time"},       	{type: 'cmd, data: 'cmdInsertDate, icon: 'iDate, text: "Insert Date"},       	{type: 'cmd, data: 'cmdInsertTimeDate, icon: 'iTimeDate, text: "Insert Date & Time"},       	{type: 'cmd, data: 'cmdKbd1, icon: 'ikbd1, text: "Keyboard"},        	{type: 'cmd, data: 'cmdKbd2, icon: 'iKbd234, text: "Keyboard (Numeric)"},        	{type: 'cmd, data: 'cmdKbd3, icon: 'iKbd234, text: "Keyboard (Phone)"},        	{type: 'cmd, data: 'cmdKbd4, icon: 'iKbd234, text: "Keyboard (Date)"},       	{type: 'cmd, data: 'cmdMIAAG, icon: 'iMI, text: "MI At A Glance"},       	{type: 'cmd, data: 'cmdMICall, icon: 'iMICall, text: "MI New Call"},       	{type: 'cmd, data: 'cmdMIEvent, icon: 'iMIEvent, text: "MI New Event"},       	{type: 'cmd, data: 'cmdMIMtg, icon: 'iMIMtg, text: "MI New Meeting"},       	{type: 'cmd, data: 'cmdMITodo, icon: 'iMIToDo, text: "MI New To Do"},       	{type: 'cmd, data: 'cmdNewCall, icon: 'iCall, text: "New Call"},       	{type: 'cmd, data: 'cmdNewChecklist, icon: 'iChecklist, text: "New Checklist"},       	{type: 'cmd, data: 'cmdNewEvt, icon: 'iEvent, text: "New Event"},       	{type: 'cmd, data: 'cmdNewMtg, icon: 'iMtg, text: "New Meeting"},       	{type: 'cmd, data: 'cmdNewNote, icon: 'iNote, text: "New Note"},       	{type: 'cmd, data: 'cmdNewOutline, icon: 'iOutline, text: "New Outline"},       	{type: 'cmd, data: 'cmdNewRec, icon: 'iRecord, text: "New Recording"},       	{type: 'cmd, data: 'cmdNewTodo, icon: 'itodo, text: "New Todo"},       	{type: 'cmd, data: 'cmdReboot, icon: 'iReboot, text: "Reset Newton"},        	{type: 'cmd, data: 'cmdRegister, icon: 'iDollar, text: "Register Dash Board"},       	{type: 'cmd, data: 'cmdRotate180, icon: 'iRotate180, text: "Rotate 180¡"},       	{type: 'cmd, data: 'cmdRotate90L, icon: 'iRotate90L, text: "Rotate 90¡ Left"},       	{type: 'cmd, data: 'cmdRotate90R, icon: 'iRotate90R, text: "Rotate 90¡ Right"},       	{type: 'cmd, data: 'cmdToggleBB, icon: 'iToggleBB, text: "Toggle Button Bar"},       	{type: 'cmd, data: 'cmdMute, icon: 'iSpeakerMute, text: "Volume Mute"},       	{type: 'cmd, data: 'cmdUnmute, icon: 'iSpeaker, text: "Volume Unmute"},       	{type: 'cmd, data: 'cmdWhoWhere, icon: 'iWhoWhere, text: "Set Owner/Worksite"},       	{type: 'cmd, data: 'cmdLLHelp, icon: 'iLLHelp, text: "Show LL Shortcuts"},       	{type: 'cmd, data: 'cmdSleep, icon: 'iSleep, text: "Sleep"}       ]              //NOTE! if you add items, dont forget to update the DB Prefs app's GetHelpStr() routine to include new shit       ,     UpdateAlphaScripts:       func()  //updates alpha scripts with new slots. LATER! BETA!       begin       	local uSoup := :GetScriptSoupRef();       	local c := uSoup:query(NIL);       	local e:=c:entry();       	       	while e do       		begin       			if not HasSlot(e, 'info) then       				e.info := "";       			if not HasSlot(e, 'id) then       				e.id := Intern(GetUserConfig('name) & ":" & TimeInSeconds());       			EntryChangeXmit(e, kAppSymbol);       			e := c:next();       		end;       end,     cmdInsertTime:       func()       begin       	local theText := HourMinute(time());       	:DashBoardInsertText(theText);       end,     cmdBtnsT:       func()       begin              	local e1, e3;              	local x := GetUserConfig('buttonBarPositions);       	if not IsArray(x) then       		begin       			e1 := 'right;       			e3 := 'right;       		end       	else       		begin       			e1 := x[1];       			e3 := x[3];       		end;       	SetUserConfig('buttonBarPositions, ['top,e1,'top,e3]);              end,     DBHandleCommand:       // COMMAND ITEM TYPES:       // 1. 'sub - data slot contains an array of menu items; generates submenu       // 2. 'script - data slot contains alias to sdcript soup entry       // 3. 'pkg - data slot contains a pkg entry alias; launches app       // 4. 'cmd - internally defined method (data contains symbol of meth name_)       // 5. 'folder - a folder submenu, needs to be built on the fly <--NEW! (diff from reg submenu cuz 1 item expand to many       // 6. 'dynSub - dynamically built submenu, data is method name sent to DB to generate menudata       // 7. 'appSym - an app symbol, the app should be opened and brougt to front       //              func(commandItem, sBounds, mOriginator) //not all command objects need all these parameters       begin              	GetRoot().(kAppSymbol).cmdInProgress := true;   //set flag to prevent invocation of the patched func that adds recent       		       	if commandItem.type = 'sub then       		begin       			:DBBuildHierMenu(sBounds, commandItem.data, mOriginator); //submenu arrays should be sorted when they are saved, not onl the fly       		end       		       	else if commandItem.type = 'dynSub then       		begin       			local mData := Perform(GetRoot().(kAppSymbol), commandItem.data, NIL);       			:DBBuildHierMenu(sBounds, mData, mOriginator);       		end       		       	else if (commandItem.type = 'appSym) then       		begin       			:DBLaunchAppSym(commandItem);       		end       	       	else if commandItem.type = 'pkg  or (commandItem.type = 'appIcon) then       		begin       			:DBLaunchPkgEntryAlias(commandItem);       		end       	       	else if commandItem.type = 'script then       		begin       			:DBRunScript(commandItem);       		end       	       	else if commandItem.type = 'folder then       		begin       			:DBBuildHierMenu(sBounds, :DB_FolderSymToMenuData(commandItem.data), mOriginator);       		end       	       	else if commandItem.type = 'cmd then       		begin       			Perform(GetRoot().(kAppSymbol), commandItem.data, []);       		end       				       	//ADD CODE TO HANDLE NEW TYPES AS THEY ARISE       	       	else       		begin       			print("RED ALERT!! Unknown command item type encountered in DBHandleCommand()!!!!! The command item is:");       			print(commandItem);       			:SysBeep();       			ModalConfirm("RED ALERT!", ["Check Inspector"]);       		end;       	       	//now NIL the flag that prevents our recent apps patch from invoking (prevent double DB_AddRecent());       	AddDeferredCall(func() begin if GetRoot().(kAppSymbol) then GetRoot().(kAppSymbol).cmdInProgress := NIL; end, NIL);         	       	if (commandItem.type <> 'dynSub) and (commandItem.type <> 'sub) and (commandItem.type <> 'folder) and (commandItem.data <> 'cmdRegister) and (commandItem.data <> cmdQuit) then       		begin       			local rodman := :DB_Nagasa();       			if rodman = 2 then  //more than 14 days       				begin       					AddDeferredSend(GetRoot(), 'Notify, DB_RemSleep[1]);       				end       			else if rodman = 1 then  //7-14 days       				begin       					if timeinseconds() mod 3 = 0 then   //make sur eit doesnt warn EVERY time       						AddDeferredSend(GetRoot(), 'Notify, DB_RemSleep[0]);       				end;       		end;       end,     DB_TempThawPkg:       func(pRef, pName, pStore) //thaws a pkgRef and sets up refreeze frame for it.       begin              	if debugOn then        		begin       			Print("Calling DB_TempThawPkg.....");       			local sT := Ticks();       		end;       	       	call kShowBusyBoxFunc with (true);       	       	ThawPackage(pRef);       	       	if (not dbPrefs.rf) or (not dbPrefs.launchFrozen) then  //ABORT IF REFREEZING PREF IS OFF; or if laucnhFrozen is off cuz then it'd refreeze immediately       		return TRUE;       		       	local thawedPartCursor := GetRoot().extrasDrawer:GetPartCursor(pName,pStore, '_all);       	       	local thawedPart := thawedPartCursor:Entry();       	local refreezeFrame := {pkg: pRef, parts: []}; //store list of parts for refreeze routines.              	while thawedPart do 					       		begin       			if thawedPart.class <> '|????Entry| and thawedPart.class <> 'AutoEntry then //we do not add autoparts for refreezing, cuz it is meaningless as no indication of when to refreeze       				AddArraySlot(refreezeFrame.parts, {partClass: thawedPart.class, partSym: thawedPart.app, partISBN: thawedPart.isbn});       			thawedPart := thawedPartCursor:Next();       		end;       		       	if Length(reFreezeFrame.parts) > 0 then       		begin       			if debugOn then Print("Sending parts to the ReFreezer....");       			AddDelayedCall(func()        				begin       					if GetRoot().(kAppSymbol).viewCobject then        						begin       							AddArraySlot(GetRoot().(kAppSymbol).refreezees, refreezeFrame);       							GetRoot().(kAppSymbol):SetupIdle(1500);       						end;       				end, nil, 5000);       		end;              	if debugOn then       		begin       			local eT := Ticks();       			Print("DB_TempThawPkg() took" && (eT - sT) && "ticks to execute.");       		end;       end,     DBBuildHierMenu:       func (sBounds, mContents, mOriginator)       begin       	if debugOn then       	begin       		print("dbHierMenu is calling DBBuildHMenu() and building the hierarchical menu...");       		local sTicks := Ticks();       	end;       	       	// 2013: deleted: local sOne := call DashBoard.Skewzoid with ();  				//Skewzoid checks if we are over the limit, returns 0 (nice demo), 1 (7 days-14 days), 2 (14-18 days), 3 (18+)       	local sOne := 0; // 2013: the line above uses the Long Lost Native C++ Code to check demo status... let's try just always returning 0?        	       	if sOne > 2 then       		mContents := DB_Skew;										//i fmore than 18 days, show superannoyng menu instead       		       	if not HasSlot(mOriginator, 'hierarchy) then					//if originating object not yet have 'hierarchy slot (i.e., this is 1st menu) then       			begin													//make sure it does       				if mOriginator.hierarchy then       					mOriginator.hierarchy := Clone(self.hierarchy)       				else       					mOriginator.hierarchy := [];       			end;       	       	local theIndex := Length(mOriginator.hierarchy); 				//this is ok because length returns the array element + 1 (except for 0)              	local stdHeight := 13;											//standard height of menu item, change if forcing big icons       	local xtraWidth := 0;											//extra width to use, change to 20 if bigIcons       	local forceBigIcons := NIL;       	if dbPrefs.iLvl = 2 then       		begin       			stdHeight := 31;       			forceBigIcons := true;       			xtraWidth := 20;       		end       	else if (dbPrefs.iLvl = 1) and (theIndex > 0) then       		begin       			stdHeight := 31;       			forceBigIcons := true;       			xtraWidth := 20;       		end;       	       	if Length(mContents) = 0 then       		mContents := [{type: 'disabled, data: NIL, submenu: NIL, icon: 'iQ, text: "Empty Menu"}];       	local l, t; 											//the left and top bounds       	local needsArrow := NIL; 								//whether menu needs to scroll       	local screenRight := GetRoot():GlobalBox().right; 		//maybe better way to get bounds        	local screenBottom := GetRoot():GlobalBox().bottom; 	//maybe better way to get bounds        	local menuWidth := 70; 									//min width       	local menuHeight := 0;       	local maxHeight := 0;       	local popDown := NIL; 									//should menu pop down instead of up?       	local calcHeight := true;						//nil this flag when we can stop calcing height and calc only width (for performance)       	       	foreach i in mContents do  						//Calculate menu width and height       		begin       			local itemWidth := StrFontWidth(i.text, ROM_fontsystem10bold) + xtraWidth;	//get width of this item's string (plus extra if applicable)       			if i.submenu then 												//then add space for submenu arrow       				itemWidth := itemWidth + 16; 								//16 pixels for submenu arrow (3 spacing)       			       			if calcHeight then 										//then calc the height       				begin       					if i.type = 'separator then										//add this item's height to the total menuHeight       						menuHeight := menuHeight + 6       					else if i.type = 'appIcon then       						begin       							menuHeight := menuHeight + 31;							//appicon items are 31 pixels high       							if xtraWidth = 0 then itemWidth := itemWidth + 20; 							//add space for extra icon width if not already        						end       					else       						if i.fs then										//is fs then we force small       							menuHeight :=  menuHeight + 13;       						else       							menuHeight := menuHeight + stdHeight;       				end;       					       			menuWidth := Max(itemWidth, menuWidth);							//increase menuWidth value if necessary              			if (menuHeight + 4) > screenBottom then 						//stop calculating if menu is already taller than screen, and       				calcHeight := NIL;														//ensure that maxHeight reflects the last valid menuHieght       			else       				maxHeight := menuHeight; 							// ( maxHeight will be the last menuHeight value that is under the limit )       		end;       		       		       	menuWidth := menuWidth + 28; 							//8 to compensate for  side offsets, and 20 for item icon (plus spacing)       	menuWidth := Min(menuWidth,300);						//max menu width is 300 (shuold be more for landscape?)       	       	       	       	// Now set the menu's vertical position on the screen.       	       	if (sBounds.bottom - (menuHeight + 4)) >= 0 then				// if enuf space to pop up the menu (& border)from bottom of originator then       		t := sBounds.bottom - menuHeight - 2;						// set t to bottom of originator - menuHeight - 2 (2 so bottom border is flush)       	else if ((sBounds.top + menuHeight + 4) <= screenBottom) then	// else if space to pop DOWN the menu (& border) from top of originator then       		begin       			t := sBounds.top + 2;									// set bounds to 2 pixels below top of originator (so border is flush)       			popDown := true;										//menu should pop down       		end       	else 															// else there is no space above or below, so we must make it extend both directions       		begin       			if (menuHeight + 4) > screenBottom then					//if menu is longer than the screen         				begin												       					t := 2;											//set t to 2 so top menu border is flush with top of screen       					menuHeight := maxHeight; 						//set menuHeight to the last valid height that is less than screen height       					needsArrow := true;								//menu needs a scroll arrow       					menuWidth := menuWidth + 16; 					//expand width to compensate for scroll arrows       					topSpace := sBounds.top;						//topSpace = the space above the originator       					bottomSpace := screenBottom - sBounds.bottom;       					if bottomSpace > topSpace then       						popDown := true;       				end       			else													//else if menu is not taller than screen, just taller than free space above and below originatior       				begin       					local topSpace, bottomSpace;					       					topSpace := sBounds.top;						//topSpace = the space above the originator       					bottomSpace := screenBottom - sBounds.bottom;	//bottomSpace = space below originator       					if topSpace > bottomSpace then					//if there's more space above than below       						begin       							t := 2;									//set t to top of screen (+ 2 for border)       						end       					else											//else if there's more space below than above       						begin       							popDown := true;						//menu should pop down       							t := screenBottom - menuHeight - 4;		//set t to bottom of screen - menuHieght and border widths       						end;       				end;       		end;       	       	       	//Now set the menu's horizontal position on the screen       	       	if (sBounds.right + (menuWidth + 4)) <= screenRight then		// if enuf space to the right       		begin       			l := sBounds.right + 2;									//set left to 2 pixels left of origniator       		end       	else if (sBounds.left - (menuWidth + 4)) >= 0 then				//else if not enuf space to right but space to left then       		begin       			l := sBounds.left - menuWidth - 2;						//set bounds to left - menuWidth & border       		end       	else															//else if not enuf space on either side then       		begin       			local rightSpace, leftSpace;       			rightSpace := screenRight - sBounds.right;				//rightSpace = amt of space on right side of orig.       			leftSpace := sBounds.left;								//leftSpace = amt of space on left       			if leftSpace > rightSpace then							//if more space on left       				begin       					//OLD BOGUS SHIT->menuWidth := leftSpace - 4;       					l := 2;											//set l to left edge of screen       				end       			else       				begin       					//OLD BOGUS SHIT->menuWidth := rightSpace - 4;       					//OLD BOGUS SHIT->l := sBounds.right + 2;       					l := screenRight - menuWidth - 4;				//set l to screenRight - menuWidth & borders       				end;       		end;					       		              	if GetRoot().(kAppSymbol).Orient = 3 then						//in Orient 3, our bounds are actually negative 46 pixels       			l := l - 46;       			       	local mBounds := SetBounds(l, t, l + menuWidth , t + menuHeight);	//make bounds frame based on l and t as set above			       	       	local thePopup := BuildContext(GetLayout("dbHierMenu.proto"));	//build it and they will come - make menu object and give it its data       	thePopup.menuContents := mContents;	       	thePopup.forceBig := forceBigIcons;							       	thePopup.originator := mOriginator;       	thePopup.hierarchyLevel := theIndex;       	thePopup.mWidth := menuWidth;       	if needsArrow then       		thePopup.scrolling := true;	       	if popDown then       		thePopup.popDown := true;       	       	//AddArraySlot(mOriginator.hierarchy, thePopup);   //?????????????????????????????????????? WHAT THE FUCK?       	thePopup:New(mBounds, mOriginator);	       	       	       	if debugOn then       	begin       		local eTicks := Ticks();       		write("Building the hierarchical menu took ");       		write(eTicks - sTicks);       		write(" ticks.\n");       		       		//write("\nThe originator is: ");       		//write(mOriginator);       		write("\nThe hierarchyLevel is ");       		write(theIndex);       		write("\nScrolling is ");       		write(needsArrow);       	end;       		       	       end,     viewQuitScript:       // must return the value of inherited:?ViewQuitScript()       func()       begin              	if debugOn then Print("viewQuitScript is starting");       	       	if dbPrefs.recPatch then       		:DB_UndoRecentPatch();       		       	:DeathPenalty();       				       	if GetRoot().(kAppSymbol).refreezees and Length(refreezees) = 0 then       		RemoveSlot(GetRoot().(kAppSYmbol), 'refreezees);		              		       	UnRegSoupChange("packages", '|pSoup:db:fivespeed|);              	UnregUserConfigChange(kAppSymbol);       	GetRoot().sleepScreen:UnRegLogin('|login:DB:FiveSpeed|);       	       	GetRoot().sleepscreen:UnregLogin('|loginrp:db:fivespeed|);       	       	       	if debugOn then PRINT("viewQuitScript is done");       	       	inherited:?ViewQuitScript();       end,     cmdNewCall:       func()       begin       	local theApp := GetRoot().callapp;       	if not theApp.viewCObject then theApp:Open();       	if theApp.viewCObject then       		begin       			theApp:MoveBehind(nil);       			theApp:AddEntryFromStationery('CallLog);       		end       	else       		:Notify(kNotifyAlert, kAppName, "Sorry, I couldn't open the Calls app for some reason.");       end,     DBPSoupChange:       func(a,b,c,d) //soupname, appsym, changetype, changedata       begin       	if debugOn then PRINT("P Soup has changed!");       	GetRoot().(kAppSymbol):DBRedoIcons();       	GetRoot().(kAppSymbol).storeBtn:Update();       	nil;       end,     DB_CalcBounds:       func(oBounds) //calculates the proper bounds for the miniButtons, depending on Dash Boards Orient slot (orientation)       begin       	local TheO := GetRoot().(kAppSymbol).Orient;       	local l,t,r,b;       	if theO = 0 then       		return oBounds       	else if theO = 1 then       		begin       			l := oBounds.top + 2; //+ 1 cuz it too cramped, icons often wider than they are tall       			t := oBounds.left;       			r := oBounds.bottom + 2;       			b := oBounds.right;       		end       	else if theO = 2 then       		begin       			l := oBounds.left + 45;       			t := oBounds.top;       			r := oBounds.right + 45;       			b := oBounds.bottom       		end       	else if theO = 3 then       		begin       			l := -1;       			t := oBounds.left;       			r := 13;       			b := oBounds.right;       		end	;       	return SetBounds(l,t,r,b);       end,     iNewt3:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 156}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DBPrint:       func(printItems)       begin       	foreach i in printItems do       		Print(i);       end,     iQ:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 185}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DB_EnsurePartIsThawed:       func(theEntry) //return TRUE if it was frozen, NIL if it wasn't       begin       	       	if debugOn then :DBPrint(["Calling DB_EnsurePartIsThawed with:", theEntry]);              	local pName := theEntry.packageName;       	local pStore := EntryStore(theEntry);       	local pRef := GetPkgRef(pName, pStore);       	if pRef then			       		begin       			If not IsPackageActive(pRef) then        				begin       					:DB_TempThawPkg(pRef, pName, pStore);       					return TRUE;       				end       			else       				begin       					return NIL;       				end;       		end;       	       	if debugOn then :DBPrint(["DB_EnsurePartIsThawed() says that the part is not in a package."]); //will only print if not pRef       	return NIL;              		       end,     testfunc:       func()       begin              	GetRoot().(kAppSymbol).screenRebuildSlip := BuildContext(GetLayout("screenRebuildSlip.t"));       	GetRoot().(kAppSymbol).screenRebuildSlip:Open();       	GetRoot().(kAppSymbol).screenRebuildSlip:MoveBehind(NIL);              end,     idiotSyms:       '[       paperroll, extrasDrawer, cardFile, cardFile, iobox, callapp, calculator, calendar, card, stylePalette, Connection,       worldClock, preferenceRoll, undo, alarm, Formulas, findDrawer, assistant, setup, handwritingpractice       ],     iPackage:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 129}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DB_GetLLData:       func()       begin       	return GetAppPrefs('|LLData:DB:FiveSpeed|, {LLData: []});       end,     cmdBtnsL:       func()       begin              	local x := GetUserConfig('buttonBarPositions);       	if not IsArray(x) then       		begin       			e0 := 'bottom;       			e2 := 'bottom;       		end       	else       		begin       			e0 := x[0];       			e2 := x[2];       		end;              	SetUserConfig('buttonBarPositions, [e0,'left,e2,'left]);       	       end,     DashBoardInsertText:       func(theText)       begin       	local theCaretInfo := GetCaretInfo();       	       	if not theCaretInfo then       		begin       			:SysBeep();       			return NIL;       		end;       	       	local theView := theCaretInfo.view;       	try       			local theRange := theView:GetHiliteRange();       			theView:Replace(theRange, {text: theText}, true)       	onexception |evt.ex| do       		begin       			//create an insert frame       			local theInsertionFrame :=        			{insertItems: theText};       			       			//insert the items       			InsertItemsAtCaret(theInsertionFrame);       		end;              end,     DB_BaloneyToAppItem:       func(theSelf) //returns an app cmmand item or nil  //LATER: needs to work with bad apps with no appSymbol (builtin or not) and handle books.        begin       	       	local theSYm := theSelf.appSymbol;		//TRY ONE : simple and usually works, just get app symbol       	if theSym then //then we have appSymbol to play with       		begin       			local try1 := :DB_SymToActiveAppItem(theSym);       			if try1 then return try1;						//ABORT IF FOUND       		end;       		       	theSym := theSelf.preallocatedcontext;       	if theSym then    //TRY TWO: shold work for those bad built in apps.       		begin       			local try2 := :DB_SymToActiveAppItem(theSym);       			if try2 then return try2;						//ABORT IF FOUND       		end;       	         //else we have no app symbol and we have to hackificate and try to find the corresponding app       	if debugON then PRINT("WOOP WOOP WOOP! NO APP SYMBOL! HERE WE GOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO!!!!!!");       	if debugON then DefGlobalVar('baloney, theSelf);	       	       	return nil; //we are only returning NIL here if nothing has worked previously and we are stumped.       	       	       end,     iMIMtg:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 150}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 150}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iRight:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 177}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 177}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iExtras:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 202}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iBLOff:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 153}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdNewNote:       func()       begin       	:DB_NewNote('paperroll);       	       end,     cmdNewTodo:       func()       begin       	:DB_NewDatesItem('todo);       end,     DB_Refresh:       func() //refresh and return num milliseconds to wait befo next idle loop       begin       	       	if not GetRoot().(kAppSymbol).viewCObject then   //to rpevent NIL VIEW errors after view has been closed       		return NIL;       	       	if debugOn then local sTicks := Ticks();       	       	if GetRoot().buttons.viewCobject then         		GetRoot().buttons:MoveBehind(self);  // is this still necessary? no right? YES FREAK              	       	 //refresh icons is done via soup change noitification       	        	//990413: added if clauses below to help prevent BugTrap bogus err reports       	       	timeBtn:Update(); //update time display       	       	battLevel:Update(); //update batt level       	       	//volBtn:Update();       	       	BLBtn:update();              	heapBtn:Update(); //update heap display       	       	//:DB_DoRecentPatch(); //We now super hardcore enforce this mugg //NOT ANYMORE Now that we use proto patching       	if dbPrefs.rf then       		:ReFreeze();       		       	if debugOn then       		begin       			local eTicks := Ticks();       			GetRoot().(kAppSymbol).rTicks := (eTicks - sTicks);       		end;       		       	if dbPrefs.rf and Length(GetRoot().(kAppSymbol).refreezees) > 0 then       		return 1500;       	else       		return dbPrefs.refresh;       	       end,     cmdMICall:       func()       begin       	if GetRoot().|MI:SilverWARE| then       		GetRoot().|MI:SilverWARE|:AddNewCall(NIL,TRUE);       	else       		:SysBeep();       end,     DB_AddRecent:       func(theItem)  //should be used only for part entries! (*at least in current form)       begin       	if debugOn then       		begin       			print("Calling DB_AddRecent with this item: " & theItem.text);       		end;       		       	if not GetRoot().(kAppSymbol).viewCObject then return NIL;  //to prevent crash when this gets sent after DB closes!       		       	local recApps := :GetRecentArray();       	local oldOne :=  LSearch(recApps.apps, theItem.text, 0, '|str=|, 'text);       	       	if theItem.bigIcon then theItem.bigIcon := NIL; //nil it out to save space...no need to store that shit.       	       	if oldOne then       		begin       			ArrayRemoveCount(recApps.apps, oldOne, 1);       		end;       	ArrayInsert(recApps.apps, theItem,0);       	If Length(recApps.apps) > dbPrefs.recentNum then       		SetLength(recApps.apps, dbPrefs.recentNum);       		       	EntryChangeXmit(recApps, kAppSymbol);       end,     cmdNewChecklist:       func()       begin       	:DB_NewNote('checklist);       end,     cmdNewName:       func()       begin       end,     cmdAbout:       func()       begin       	GetRoot().(kAppSymbol).aboutSlip := BuildContext(GetLayout("aboutSlip.t"));       	GetRoot().(kAppSymbol).aboutSlip:Open();       end,     iClose:       MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 180}),           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 180}),           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 180}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);,     cmdCtrlsL:       func()       begin       	GetRoot().(kAppSymbol).dbPrefs.ctrlsLeft := true;       	EntryCHangeXmit(GetRoot().(kAppSymbol).dbPrefs, kAppSymbol);       	:DB_RedoDB();       end,     viewFlags: 1,     iRotate:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 165}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 165}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iLCard2:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 191}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 191}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     RejectHacko:       func(uName)       begin       	:Notify(kNotifyAlert, kAppName, "Dash Board cannot be opened because \"" & uName & "\" is installed and active. \"" &       			uName & "\" prevents Dash Board from working properly. To use Dash Board, you must disable \"" & uName & ".");       			AddDeferredSend(self, 'close, nil);       end,     funcRecPatchBT:       func()  //thisfunc is what we use to patch the system's GetRoot().buttonToggle method with       begin              	if GetRoot().(kAppSymbol) and GetRoot().(kAppSymbol):ButtonToggleOverride(self) then return;       	       	//NOTE: above call buttonToggleOverride allows us to handle special cases       	//like PowerNames. the call must do everything that we do here, cuz code       	//below wont be executed.       	//if buttonToggleOverride returns NIL then the code        	//below will execute as normal              	inherited:?buttonToggle();       	if GetRoot().(kAppSymbol) and (GetRoot().(kAppSymbol).cmdInProgress = NIL) then       		GetRoot().(kAppSymbol):DB_HandleBaloney(self);       		       	if GetRoot().|DBminibar:FiveSpeed|.viewCObject then       		GetRoot().|DBminibar:FiveSpeed|:MoveBehind(NIL);       end;,     cmdMIEvent:       func()       begin       	if GetRoot().|MI:SilverWARE| then       		GetRoot().|MI:SilverWARE|:AddNewEvent(NIL);       	else       		:SysBeep();       end,     DB_GetPrefs:       func()       begin                     	       	local thePrefs := GetAppPrefs(kAppSymbol, {initialized: NIL});       	       	if not thePrefs.initialized then thePrefs := :CreateDefaultPrefs();       	       	return thePrefs;       						              end,     viewIdleScript:       func()       begin       	return :DB_Refresh(); //DB_Refresh() routine now returns the amount of time to idle (depends on if there are refreezees to deal wit or not       	//return dbPrefs.refresh;	// Return the number of milliseconds to delay or nil to end idling.       end,     iCard2:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 157}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 157}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdSDS0:       func()       begin       	SetDefaultStore(GetStores()[0]);       end,     CreateDefaultPrefs:       func()       begin       	if debugON then Print("Calling CreateDefaultPrefs().........");       	       	local dNMenuData := :DB_GetDefaultMenuData();       	local lasIdiotas := :GetIdiots();       	       	local nMenuPrefs := :DB_GetNMenuData();       	nMenuPrefs.nMenu := dNMenuData;       	EntryChangeXmit(nMenuPrefs, kAppSymbol);       	       	local LLPrefs := :DB_GetLLData();       	LLPrefs.LLData := [       						{name: "N", cmdItem: {type: 'pkg, icon: 'iPackage, text: "Names", data: lasIdiotas.cardfile}},       						{name: "NO", cmdItem: {type: 'pkg, icon: 'iPackage, text: "Notes", data: lasIdiotas.paperroll}},       						{name: "D", cmdItem: {type: 'pkg, icon: 'iPackage, text: "Dates", data: lasIdiotas.calendar}},       						{name: "IO", cmdItem: {type: 'pkg, icon: 'iPackage, text: "InOut", data: lasIdiotas.iobox}},       						{name: "C", cmdItem: {type: 'pkg, icon: 'iPackage, text: "Calculator", data: lasIdiotas.calculator}},       						{name: "A", cmdItem: {type: 'pkg, icon: 'iPackage, text: "Assist", data: lasIdiotas.assistant}},       						{name: "P", cmdItem: {type: 'pkg, icon: 'iPackage, text: "Prefs", data: lasIdiotas.preferenceRoll}},       						{name: "S", cmdItem: {type: 'pkg, icon: 'iPackage, text: "Styles", data: lasIdiotas.stylePalette}},       						{name: "F", cmdItem: {type: 'pkg, icon: 'iPackage, text: "Find", data: lasIdiotas.findDrawer}},       						{name: "CL", cmdItem: {type: 'pkg, icon: 'iPackage, text: "Clock", data: lasIdiotas.alarm}},       						{name: "TZ", cmdItem: {type: 'pkg, icon: 'iPackage, text: "Time Zones", data: lasIdiotas.worldClock}},       						{name: "K", cmdItem: {type: 'pkg, icon: 'iPackage, text: "Dock", data: lasIdiotas.connection}},       						{name: "?", cmdItem: {type: 'cmd, icon: 'iLLHelp, text: "Show LL Shortcuts", data: 'cmdLLHelp}},       						{name: "61", cmdItem: {type: 'cmd, icon: 'i61, text: "-10061 Fix", data: 'cmd61}},       					]; //ADD MORE TO MAKE IT COMPLETE LATER       	EntryChangeXmit(LLPrefs, kAppSymbol);              	local dPrefs :=       		{	       			initialized: true, //prefs inited by Dash Board itself, not DB Prefs       			refresh: 5000, 	//amount of time to idle between refreshing refreshees       			tBtn: 0, //0=dash board time view, 1=clock, 2=time zones       			ctrlsLeft: NIL, //scrollers on left in horizontal       			ignoreSErrs: NIL,  //if true, dont trap and print exceptions when running scripts       			gcOnTap: true, //value of garbageCollectFrames in getHeapStats() call       			recentNum: 15, //how many recent apps to track       			triBtn: NIL, //do we split the Newton menu into 3?       			recPatch: true, //do we install our patch to track recent apps?       			iLvl: 0, //level of bigIconUse 0 = RA only, 1 = RA + all submenus, 2 = all menus       			blot: NIL, //do we turn on backlight on any click in DB area?       			blotch: NIL, //if we do Back Light On Tap, do we handle the click?       			rf: NIL, //do we refreeze pkgs we thaw?       			launchFrozen: NIL, //do we launch frozen packages whern chosen from menu (otherwise just thaw);       			scriptFont: {family: 'geneva, face: kFaceNormal, size: 9},       			//ALWAYS TAG PREFS WITH NUEW PREFS VERSION WHEN ADDING SLOTS (and update the UpdatePrefs() routine as necesaary       			pVsn: kPrefsVsn,       		};       		       	local sSoup := :GetScriptSoupRef();       	local sCursor := sSoup:Query(nil);       	if sCursor:CountEntries() = 0 then       		begin       			:AddDefaultScripts();       		end;       		       	//NOW NUKE ANY EXISTING PREFS       	local pEntry := GetAppPrefs(kAppSymbol, {});       	EntryRemoveFromSoupXmit(pEntry, kAppSymbol);       	       	//BETA! LATER!! fix old shit caused by typo       	local stupid := GetAppPrefs('|nMenu:DB:Fivepeed|, {});       	EntryRemoveFromSoupXmit(stupid, kAppSymbol);       	stupid := GetAppPrefs('|LLData:DB:Fivepeed|, {});       	EntryRemoveFromSoupXmit(stupid, kAppSymbol);              	       	local nuPrefs := GetAppPrefs(kAppSymbol, dPrefs);       	return nuPrefs;       	       		       	       end,     DB_DoRecentPatch:       func()       begin       	if not dbPrefs.recPatch then        		return NIL;       		       	local btPatchTemplate := {buttonToggle: TotalClone(GetRoot().(kAppSymbol).funcRecPatchBT)}; //GetRoot().ButtonToggle patch func       	local ttPatchTemplate := {OpenHelpBook: TotalClone(GetRoot().(kAppSymbol).funcRecPatchTT)}; //TinyTim.OpenHelpBook patch func       	       	GetRoot().(kAppSymbol).btp := call kProtoPatchFunc with (GetRoot(), btPatchTemplate, kAppSymbol);       	GetRoot().(kAppSymbol).ttp := call kProtoPatchFunc with (GetRoot().tinytim, ttPatchTemplate, kAppSymbol);       	       	return TRUE;       end              ,     iNewt0:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 160}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DB_OpenMiniBar:       func()       begin       	if not GetRoot().|DBminibar:FiveSpeed|.viewCObject then       		begin       			GetRoot().|DBminibar:FiveSpeed| := BuildContext(GetLayout("miniBar.t"));       			GetRoot().|DBminibar:FiveSpeed|:Open();       		end;       		       end,     cmdMITodo:       func()       begin       	if GetRoot().|MI:SilverWARE| then       		GetRoot().|MI:SilverWARE|:AddNewTodo(NIL);       	else       		:SysBeep();       end,     DB_EntryBigIcon:       func(theEntry)       begin       	return if IsInteger(theEntry.iconPro) then       		@233[theEntry.iconPro].iconPro.unhilited        	else if  IsInteger(theEntry.icon) then        		@233[theEntry.icon].iconPro.unhilited       	else if theEntry.iconPro.unhilited then        		theEntry.iconPro.unhilited        	else if theEntry.icon then        		theEntry.icon        	else        		GetRoot().(kAppSymbol).iBigPkg;       							       end,     IsBookOpen:       func(theISBN) //true or nil whether copperfield book is open       begin       	if not theISBN then       		begin       			if debugOn then Print("*******************WARNING! RED ALERT! MOON DOG! ARF! IsBookOpen() called without valid ISBN numero! ***");       			return NIL;       		end;       	else if GetRoot().copperfield.viewCObject and StrEqual(GetRoot().copperfield.isbn, theISBN) then       		return TRUE       	else       		return NIL;       end,     llHelpSlip: nil,     dynBooks:       func()       begin       	local bookArray := [];       	local helpBookArray := [];       	local pRef, pInfo, c, e, theBook;       	       	foreach isbnSym, bookFrame in getroot().copperfield.library do       		begin       			pRef := ObjectPkgRef(bookFrame);       			if pRef then       				begin       					pInfo := GetPkgRefInfo(pRef);       					c := GetRoot().extrasdrawer:GetPartCursor(pInfo.title, pInfo.store, '_all);       					e := c:Entry();       					       					if not e then       						begin       							c := GetRoot().extrasdrawer:GetPartCursor(pInfo.title, pInfo.store, '_buttonbar);       							e := c:Entry();       						end;       						       					if e then       						begin       							if e.class = 'BookEntry then       								begin       									theBook := MakeEntryAlias(e);       									AddArraySlot(bookArray, {type: 'pkg, text: e.text, data: theBook, icon:'iBook});       								end;       						end;       				end;       		end;       		       	return bookArray;       		       end,     iOutline:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 200}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     whoWhere:       nil  //ref to whoWhere view stored in this slot when it opens       ,     DashBoardDoDialog:       func(theValType, theMessage, theTitle, theAnswer, theCancelBtnTxt, theOkBtnText)       begin       	GetRoot().(kAppSymbol).GetValResult := NIL;       	       	local theDialog := BuildContext(GetLayout("GetValue.t"));       	       	if theValType then       		theDialog.theValType := theValtype;       		       	if theMessage then       		theDialog.theMessage := theMessage;       		       	if theTitle then       		theDialog.theTitle := theTitle;       		       	if theAnswer then       		theDialog.theAnswer := theAnswer;       		       	if theCancelBtnTxt then								//note this is Txt not Text--too lazy to make consistent       		theDialog.theCancelBtnTxt := theCancelBtnTxt;       		       	if theOkBtnText then       		theDialog.theOkBtnText := theOkBtnText;       		       	theDialog:ModalDialog();  //dialog will set baseview GetValResult slot when it close;       	       	local theResult := GetRoot().(kAppSymbol).GetValResult;       	RemoveSlot(GetRoot().(kAppSymbol), 'GetValResult);       	return theResult;       		       	       end ,     cmdKbd4:       func()       begin       	GetRoot().dateKeyboard:Open();       end,     dynExtras:       func()       begin       	local xFolders := GetFolderList('extrasdrawer, TRUE);       	AddArraySLot(xFolders, '_extensions);       	AddArraySLot(xFolders, '_help);       	AddArraySlot(xFolders, '_setup);       	       	local itemArray := [];       	foreach i in xFolders do       		begin       			AddArraySlot(itemArray, {type: 'folder, data: i, submenu: true, text: GetFolderStr(i), icon: 'iFolder});       		end;       	       	Sort(itemArray, '|str<|, 'text);       	ArrayInsert(itemArray, {type: 'folder, data: NIL, submenu: true, text: GetFolderStr(NIL), icon: 'iFolder}, 0);       	       	return itemArray;       	       end,     DB_GetPopupBounds:       func(pWidth, pHeight, oBounds) //popup width, popup height, and originating object's bounds (globalbox())       begin       	local l, t, r, b;       	       	local screenRight := GetRoot():GlobalBox().right;       	local screenBottom := GetRoot():GlobalBox().bottom;       	       	if (oBounds.right + (pWidth + 4)) > screenRight then  //then no room for popup with border on right side       		begin       			if (oBounds.left - (pWidth + 4)) > 0 then //then room for popup with border on left side       				l := oBounds.left - (pWidth + 2); //set popup's left bounds to pWidth + 2 pixels to left of originator (+2 so border will be even)       			else       				:FSFatalError("No space on the screen to draw the popup!"); //no space on right or left; maybe: draw popup in middle or something       		end       	else       		l := oBounds.right + 2; //set popup's left bounds to 2 pixels to right of originator (to accomodate border)       		       	if (oBounds.bottom - (pHeight + 4)) < 0 then //then there is no room for complete popup with border abovethe originator)       		begin       			if (oBounds.top + (pHeight + 4)) < screenBottom then //then there is room for popup & border below originator       				t := oBounds.top + 2 //set popup's top bounds to 2 pixels below top of originator (so border is flush)       			else       				:FSFatalError("No space on the screen to draw the popup!"); //no space above or below; maybe: draw popup in center or sompin       		end       	else       		t := oBounds.bottom - (pHeight + 2); //set popup's top bounds to pHeight + 2 pixels above bottom of the originator       	       	if GetRoot().(kAppSymbol).Orient = 3 then       		l := l - 46;							//in Orient 3, our bounds are actually negative by 46 pixels       		       	local pBounds := SetBounds(l, t, l + pWidth , t + pHeight);       		       	return pBounds;       end,     cmdMIName:       func()       begin       	if GetRoot().|MI:SilverWARE| then       		GetRoot().|MI:SilverWARE|:OpenAddNewName();       	else       		:SysBeep();       end,     iMICall:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 231}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 231}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DB_CloseMiniBar:       func()       begin       	if getroot().|DBminibar:Fivespeed|.viewCObject then       			getroot().|DBminibar:Fivespeed|:Close();       			       	RemoveSlot(GetRoot(), '|DBminibar:FiveSpeed|);       end,     cmdPrefs:       func()       begin       	if GetRoot().|DashBoardPrefs:FiveSpeed| then       		GetRoot().|DashBoardPrefs:FiveSpeed|:Open()       	else       		:Notify(kNotifyAlert, "Dash Board", "The Dash Board Prefs package is not currently installed (perhaps it is on a storage card that is not currently inserted). To edit Dash Board's preferences, you will need to reinstall it.");       end,     iSpeaker:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 151}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdWhoWhere:       func()       begin       	GetRoot().(kAppSymbol).whoWhere := BuildContext(GetLayout("whoWhere.t"));       	GetRoot().(kAppSymbol).whoWhere:Open();       end,     iAbout:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 134}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdNewEvt:       func()       begin       	:DB_NewDatesItem('cribNote);       end,     Pope:       func()  //store system blessed app (backdrop) in BD slot in prefs.       begin       	dbPrefs.BD := :T_SymToAlias(GetUserConfig('blessedApp));       end,     viewBounds: {left: 0, top: 234, right: 320, bottom: 280},     cmdNewRec:       func()       begin       	local notepad := GetRoot().paperroll;       	if not notepad.viewCObject then notepad:Open();       	if notepad.viewCObject then       		begin       			notepad:MoveBehind(nil);       			notepad:AddEntryFromStationery('|soundpaper:NSG|);       			try       				local theBtn := notepad:ChildViewFrames()[0]:ChildViewFrames()[0]:ChildViewFrames()[0]:ChildViewFrames()[0]:ChildViewFrames()[0].recorder.recordbutton;       				theBtn:buttonClickScript()       			onexception |evt.ex| do       				:Notify(kNotifyAlert, kAppName, "Agh! Evil Hack Error -666 (can't find record button");       		end       	else       		:Notify(kNotifyAlert, kAppName, kCantOpenNP);       end,     cmdGuestMode:       func()       begin       	       	local gMode := GetUserConfig('guestAccessOption);       	       	if gMode = NIL then       		begin       			if debugOn then print("GUEST MODE WAS OFF, tuirning ON");       			SetUserConfig('savedWritingStyleOptions, GetUserSettings());       			SetDefaultUserSettings();       			SetUserConfig('guestAccessOption, TRUE);       		end       	else       		begin       			if debugOn then print("GUEST MODE WAS ON, turning OFF");       			SetDefaultUserSettings();       			SetUserSettings(GetUserConfig('savedWritingStyleOptions));       			SetUserConfig('savedWritingStyleOptions, NIL);       			SetUserConfig('guestAccessOption, NIL);       		end;       end,     DB_GetBookFromPkgRef:       func(theISBN, thePkgRef, bookTypeSym)  //return NIL if not found, else part entry Alias       begin       	if debugOn then       		begin       			Print("Enteringg DB_GetBookFromPkgRef()........here are theISBN and ThePkgRef:");       			Print(theISBN);       			Print(thePkgRef);       		end;       		       	local pInfo := GetPkgRefInfo(thePkgRef);       	       	local c1 := GetRoot().extrasdrawer:GetPartCursor(pInfo.title, pInfo.store, '_all);       	local c2 := GetRoot().extrasdrawer:GetPartCursor(pInfo.title, pInfo.store, '_buttonbar);       	       	local e1 := c1:Entry();       	local e2 := c2:Entry();       	       	local theBook := NIL;       	       	while e1 or e2 do       		begin       			if e1 then       				begin       					if (e1.class = bookTypeSym) and (e1.isbn = theISBN) then       						begin       							theBook := MakeEntryAlias(e1);       							break;       						end;       				end;       			if e2 then       				begin       					if (e2.class = bookTypeSym) and (e2.isbn = theISBN) then       						begin       							theBook := MakeEntryAlias(e2);	//WOAHG! this was e1, not e2, until DB 1.2b10! Why never notcied!??       							break;       						end;       				end;       			e1 := c1:Next();       			e2 := c2:Next();       		end;       	       	if debugON then Print("DB_GetBookFromPkgRef() is returning:");       	if debugOn then Print(theBook);       	       	return theBook;       end,     iRecord:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 144}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iTime:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 254}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 254}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iMIEvent:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 149}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DB_ShowScreenRebuildSlip:       func(dir)  //dir is the direction we are rotating ('L, 'R, or 'Flip), NIL if not rotating.       begin       	GetRoot().(kAppSymbol).screenRebuildSlip := BuildContext(GetLayout("screenRebuildSlip.t"));       	GetRoot().(kAppSymbol).screenRebuildSlip.rotation := dir;       	GetRoot().(kAppSymbol).screenRebuildSlip:Open();       	GetRoot().(kAppSymbol).screenRebuildSlip:MoveBehind(NIL);       	SetValue(GetRoot().(kAppSymbol).screenRebuildSlip, 'viewBounds, SetBounds(0,0,320,480)); //HACK! this forces it to show, dunno why it didnt before       	RefreshViews();       end,     Orient:       2        //this is DASH BOARD'S orientation, not screen orientation, tho they are related;       // 0 = portrait mode, controls right       // 1 =  landscape mode, buttons right       // 2 = portrait mode, controls left       // 3 = landscape mode, buttons left       ,     dynScripts:       func()  //GetListOfScripts       begin	       	local menuData := [];       	local uSoup := :GetScriptSoupRef();       	local theCursor := uSoup:Query({indexpath: ['name, 'date]});       	local theEntry := theCursor:Entry();       	local thePopup := [];       	       	       	while theEntry do         		begin       			AddArraySlot(menuData, {type: 'script, text: DeepClone(theEntry.name), submenu: NIL, data: MakeEntryAlias(theEntry), icon: 'iScript});       			theEntry := theCursor:Next();       		end;       	return menuData;         end,     cmdClearRecent:       func()       begin       	local recApps := :GetRecentArray();       	recApps.apps := [];       	EntryChangeXmit(recApps, kAppSymbol);       end,     AliasGenius:       func()  //store system blessed app (backdrop) in BD slot in prefs. store alias to DB in DB slot       begin       	dbPrefs.DB := :T_SymToAlias(kAppSymbol);       end,     cmdGuestModeOn:       func()       begin       	       	local gMode := GetUserConfig('guestAccessOption);       	       	if gMode = NIL then       		begin       			if debugOn then print("GUEST MODE WAS OFF, tuirning ON");       			SetUserConfig('savedWritingStyleOptions, GetUserSettings());       			SetDefaultUserSettings();       			SetUserConfig('guestAccessOption, TRUE);       		end       end,     funcRecPatchTT:       func(x)  //This patch is what we use to replace the tinytim bookreader's OpenHelpBook func       begin       	inherited:?OpenHelpBook(x);       	if GetRoot().(kAppSymbol) and (GetRoot().(kAppSymbol).cmdInProgress = NIL) then       		GetRoot().(kAppSYmbol):HBCrap(x);       	if GetRoot().|DBminibar:FiveSpeed|.viewCObject then       		GetRoot().|DBminibar:FiveSpeed|:MoveBehind(NIL);              end;,     IsPkgInstalled:       func(thePkgName)  //takes pkgName and returns true if its installed and active, NIL otherwise;       begin       	       	local foundPkg := NIL;       	local cPkg;       	foreach cStore in getStores() do       		begin       			cPkg := GetPkgRef(thePkgName, cStore);       			if cPkg then        				begin       					foundPkg := cPkg;       					break;       				end;       		end;       		       	if foundPkg and (IsPackageActive(foundPkg)) then       		return true;       	else       		return NIL;              end,     iMIToDo:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 136}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 136}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DBHandleIconRemove:       func(theAlias)       begin       	local removee := ResolveEntryAlias(theAlias);       	if not removee then       		begin       			:Notify(kNotifyAlert, "Dash Board Missing Package", "In the beginning, there was a black bomb, that blew apart. Transdimensional Wormhole Manager error (°). dbPkg does not exist.");       		end       	else       		begin       			If ModalConfirm("Are you sure you want to remove \"" & removee.text & "\" from the button bar? It will be moved to the Extras drawer (into Unfiled Icons).", ["Yes, Move It To Extras", "Cancel"]) = 0 then       				begin       					call kSetExtrasInfoFunc with (removee, {labels: nil});       					GetRoot().(kAppSymbol):DBRedoIcons();       				end;       		end;       end,     DB_SymToIdiotItem:       func(theSym) //take appSymbol and return idiot alias menu item or NIL       begin	       	local idiotSyms :=       		'[paperroll, extrasDrawer, cardFile, cardFile, iobox, callapp, calculator, calendar, card, stylePalette, Connection,       		worldClock, preferenceRoll, undo, alarm, Formulas, findDrawer, assistant, setup, handwritingpractice       		];       		       	if LSearch(idiotSyms, theSym, 0, '|=|, nil) then       		local theAlias := GetAppPrefs('|BuiltIn:DB:FiveSpeed|, {init: NIL}).(theSym);       	else       		return NIL;       		       	local theEntry := ResolveEntryAlias(theAlias);       	if theEntry then       		return {type: 'pkg, icon: 'iPackage, bigIcon: NIL, data: theALias, text: theEntry.text};       end,     DB_FolderSymToSubMenuItem:       func(theSym) //takes folder symbol and returns a submenu item       begin       	// get text and handle case where symbol is not same as string       	local theText := GetFolderStr(theSym);       	       	local newItem := {type: 'folder, text: theText, submenu: TRUE, icon: 'iFolder, data: theSym};       	       	return newItem;              end,     DB_Nagasa:       func()       begin       	try       		if GetRoot().(kAppSymbol).viewCObject then       			 begin       			 	local res := call DashBoard.GetNagasa with ();       			 	return res;       			 end       		 else       		 	begin       		 		//Print("VCO arahen de!");       		 		return 0       		 	end;       	onexception |evt.ex| do       		begin        			print("compoung multiplex mgr err supressed +++++++++++++");       		end;       	        end,     DB_GetNMenuData:       func()       begin       	return GetAppPrefs('|nMenu:DB:FiveSpeed|, {nMenu: []});       end,     DB_RemSleep:       [       	[       		kNotifyAlert,        		kAppName && "Demo",        		"Thanks for trying the Dash Board demo! If you want to continue using the software," &&       			"please remember to register your copy. See the documentation or http://www.fivespeed.com for details."       	],       	       	[       		kNotifyAlert,        		kAppName && "Demo",        		"Thanks for trying the Dash Board demo! This demo copy will expire soon. If you want to continue using the software," &&       			"please register your copy. See the documentation or http://www.fivespeed.com for details."       	],       	[       		kNotifyALert,       		kAppName && "Expired Demo",       		"This demo copy of Dash Board has expired. To unlock your copy, you must register. Please see the documentation or" &&       			"http://www.fivespeed.com for details"       	]        ],     iPrefs:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 179}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 179}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdUnmute:       func()       begin       	local umVol := GetRoot().(kAppSymbol).dbPrefs.muteVol;       	if not umVol then umVol := -18.2720;       	GetRoot().(kAppSymbol):DB_SetSystemVolume(umVol);       	:sysBeep();              		       end,     iWhoWhere:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 186}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DBLaunchPkgENtryAlias:       func(theItem)  //can we handle backdrop and runnng apps here?       begin       	       	if debugOn then :DBPrint(["Calling DBLaunchPkgEntryAlias with this theItem:", theItem]);       	       	if IsSameEntry(dbPrefs.BD, theItem.data) then												//HANDLE BACKDROP APP!       		begin       			if debugOn then PRINT("DBLaunchPkgEntryAlias() is launching the Blessed App_>_>_>");       			GetRoot().(GetUserConfig('blessedApp)):MoveBehind(nil);  							//investigate movebehind('skip) later!!!!       			:DB_AddRecent(theItem);       			return nil;       		end;       		       	if IsSameEntry(dbPrefs.DB, theItem.data) then												//HANDLE DASH BOARD!       	begin       		:SysBeep();       		if debugOn then PRINT("DBLaunchPkgEntryAlias() is NOT launching Dash Board. It just plain refuses! It says, \"do it yerself, punk!\"<_<_<");       		return nil;       	end;	       				       	//SETUP       	local theEntry := ResolveEntryAlias(theItem.data);       	local theText := if theEntry then theEntry.text else NIL; //get text name, so we can try to launch right part entry in cases where we unfreeze a multipart package and don't know which part entry to launch after thawing       	local pNotFound := if theEntry then NIL else TRUE;       	       	if debugOn then :DBPrint(["Here is theEntry:",theEntry]);       	       	if theEntry = NIL then															//BEEP & return if entry cant be resolved.       		begin       			:SysBeep();       			return NIL;       		end;       		       	if theEntry.class = 'FrozenEntry then 											//HANDLE FROZEN ENTRIES THEMSELVES        		begin					       			if debugOn then Print("**class of entry is FrozenEntry");       			local pName := theEntry.packageName;       			local pStore := EntryStore(theEntry);       			local pRef := GetPkgRef(pName, pStore);       			:DB_TempThawPkg(pRef, pName, pStore);       			       			if dbPrefs.launchFrozen then       				begin       					local thawedPartCursor := GetRoot().extrasDrawer:GetPartCursor(pName,pStore, '_all);       					local thawedPart := thawedPartCursor:Entry();       					local numPkgs := thawedPartCursor:CountEntries();       					local partToLaunch := thawedPart;		 							//default to the first part found, but use next loop to try and match the part entry's text       		       					if debugOn then :DBPrint(["thawedPart:",thawedPart,"pkgs found:" && numPkgs, "Searching packages' part entries for text:" && theText]);       					       					if numPkgs > 1 then       						begin					       							while thawedPart do 					 //in case of multiple parts try to get the right part by comparing  its 'text slot to the one we want       								begin								//next we should ensure we get an app or book entry if there are any, and not launch autoparts.       									if (IsString(thawedPart.text) and IsString(theText) and StrEqual(theText,thawedPart.text))        									or ((thawedPart.class <> 'AutoEntry) and (thawedPart.class <> '|????Entry|) and (partToLaunch.class = '|????Entry|) or (partToLaunch.class = 'AutoEntry)) then       										begin       											partToLaunch := thawedPart;       											if debugOn then Print("Matched part entry's text:" && theText);       										end;       									thawedPart := thawedPartCursor:Next();       								end;       						end;       					       					GetRoot().extrasDrawer:LaunchPartEntry(partToLaunch);       					:DB_AddRecent({type: 'pkg, data: MakeEntryAlias(partToLaunch), text: Clone(partToLaunch.text), icon: 'iPackage});       				end; //end if dbPrefs.launchFrozen statement       		end       		       	else if theEntry.class = 'HelpBookEntry then   								//HANDLE TINY TIM BOOKS - becuase system default behavior is close it even if not frontmost       		begin       			if :IsHelpBookOpen(theEntry.isbn) then       				begin       					GetRoot().tinyTim:MoveBehind(NIL);       					:DB_AddRecent(theItem);       				end       			else       				begin       					if GetRoot().TinyTim.viewCobject then GetRoot().TinyTim:Close(); //close and launch, cuz sys default behavior is WACK!       					local wasFrozen := :DB_EnsurePartIsThawed(theEntry);       					if (not wasFrozen) or (dbPrefs.launchFrozen) then        						begin       							GetRoot().extrasDrawer:LaunchPartEntry(theEntry);       							:DB_AddRecent(theItem);       						end;       				end;       		end       		       	else if theEntry.class = 'BookEntry then									//HANDLE COPPERFIELD BOOKS       		begin       			if :IsBookOpen(theEntry.isbn) then       				begin       					GetRoot().copperfield:MoveBehind(NIL);       					:DB_AddRecent(theItem);       				end       			else       				begin       					local wasFrozen := :DB_EnsurePartIsThawed(theEntry);       					if (not wasFrozen) or (dbPrefs.launchFrozen) then       						begin       							GetRoot().extrasDrawer:LaunchPartEntry(theEntry);       							:DB_AddRecent(theItem);       						end;       				end;       		end       	       	else if (theEntry.class = 'AutoEntry) or (theEntry.class = '|????Entry|) then		//HANDLE AUTOPARTS       		begin       			if :DB_EnsurePartIsThawed(theEntry) = NIL then						//if TRUE that means that we should simply unfreeze it (which we did) and not launch it.       				GetRoot().extrasDrawer:LaunchPartEntry(theEntry);				//we don't add autoparts to recent menu. (unless they have tapAction slot maybe? naw fuck that never!       		end       		       	else if (theEntry.class = 'ROMFormEntry) or (theEntry.class = 'RomScriptEntry) then  //HANDLE BUILTIN       		begin       			GetRoot().extrasDrawer:LaunchPartEntry(theEntry);       			:DB_AddRecent(theItem);       		end       		       	else	//else part entry is not in frozenEntry, not a Book, not a Help Book, but may still be in frozen pkg       		begin       			local wasFrozen := :DB_EnsurePartIsThawed(theEntry);       			if (not wasFrozen) or (dbPrefs.launchFrozen) then       						begin       							GetRoot().extrasDrawer:LaunchPartEntry(theEntry);       							:DB_AddRecent(theItem);       						end;       		end;              end       ,     iSpecials:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 182}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DB_NewDatesItem:       func(itemTypeSymbol)       begin       	local datesApp := GetRoot().calendar;       	datesApp:Open();       	datesApp:DisplayDate(time(), NIL);       	datesApp:MoveBehind(NIL);       	foreach index, typeSym in datesApp.statusbar.newButton.builtinpopupelts do       		begin       			if typeSym = itemTypeSymbol then       				begin       					datesApp.statusbar.newButton:pickActionScript(index);       					break;       				end;       		end;       end,     DB_Kakunin:       func()       begin       	       	local DocNZ := 'punkAss;       	       	local serNum := dbPrefs.sn;       	if not IsInteger(serNum) then serNum := 0;       	       	local valRes := call DashBoard.KakuninSuru with (:NamaeBango().number, serNum);              	       	if debugOn then       		begin	       			Write("\nExiting DBKakunin(), valRes is: ");       			Write(" / ");       			Write(valRes);       			Write(" ...\n");       		end;       			       	return valRes;       	       end,     iGuestMode:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 140}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdKbd1:       func()       begin       	GetRoot().alphaKeyboard:Open();       end,     iStore:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 157}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 157}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     PNButtonTapped:       func()       begin       	if GetRoot().|PNNames:SilverWARE| and GetRoot().|PowerNames:SilverWare| then       		GetRoot().|PNNames:SilverWARE|:DoPopup(0, 434, NIL, NIL)       	else       		:Notify(kNotifyAlert, "PowerNames Not Installed", "PowerNames is not currently installed (or is frozen). This button works only with PowerNames from SilverWARE.");       end,     O0:       '[       	shutDownInProgress,       	deathRow,       	okToCloseDB       ]	,     iCube:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 209}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     blot:       func() //BackLight On Tap - should return TRUE if processing click should stop (ie BL was off and we turn on and ignore click), else nil.       begin       	if dbPrefs.blot then       		begin       			if debugOn then print("BLOT CODE INITIATING...");       			if not BacklightStatus() then       				begin       					if debugOn then print("BLOT CODE ENABLING BACKLIGHT...");       					BackLight(TRUE);       					AddDeferredSend(BLBtn, 'DB_Blink, NIL);       					BLBtn:Update();       					if not dbPrefs.blotch then       						begin       							if debugOn then print("BLOT CODE RETURNING TRUE (ignore BLOT click)...");       							return TRUE;       						end;       				end;       		end;       	return NIL;       end,     iMtg:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 150}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 150}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iX:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 194}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 194}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     FSNomNum:       func()       begin       	       	SetVolume(4);       	PlaySoundSync(GetRegisteredSound('oneBeep));       	       	GetRoot():Notify(kNotifyQAlert, "Message from Five Speed", "\nPirating Newton software is really lame. This market is already so small that if people pirate " &        	"our software, we can't afford to keep supporting the Newton. Think about that.");        	       	return {number: 43758};       end,     cmdLLHelp:       func()       begin       	GetRoot().(kAppSymbol).llHelpSlip := BuildContext(GetLayout("LLHelp.t"));       	llHelpSlip:Open();       end,     DB_RedoDB:       func()       begin       	GetRoot():Lockscreen(true);       	AddDeferredCall(func() GetRoot().(kAppSymbol):Open(), nil);       	GetRoot().(kAppSymbol):Close();       end,     iFolder:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 207}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     deathRow:       '[       	death,       	whoWhere,       	aboutSlip,       	timeTxt,       	battLevel,       	llHelpSlip,       	battStatSlip,       	battBtn,       	cmdInProgress,       	tapFilter,       	Orient,       	dbPrefs,       	newtIcon,       	cardIcon,       	lCardicon,       	TimeBtn,       	viewbounds,       	gleanedText,       	dieBBP,       	dieSB,       	btp,       	ttp,       	regSlip,       	screenRebuildSlip,       	timeSlip       ],     cmdSDS2:       func()       begin       	if Length(GetStores()) >= 3 and (not GetStores()[2]:IsReadOnly()) then       		begin       			SetDefaultStore(GetStores()[2]);       		end       	else       		:SysBeep();       end,     iNewt2:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 162}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DBLaunchAppSym:       func(cmdItem)       begin       	       	//TRY exception handling ??       	       	GetRoot().(cmdItem.data):Open();       	GetRoot().(cmdItem.data):MoveBehind(NIL);       	       	// DB_ADDRECENT() NOW FOR APPICON AND PKG TYPES ONLY!  //:DB_AddRecent(cmdItem);       	       end,     DB_Unhide:       func()       begin       	:DB_ShowScreenRebuildSlip(NIL);       	GetRoot():LockScreen(true);       	GetRoot().(kAppSymbol).youCantSeeMe := nil;       	GetRoot().(kAppSymbol).hideInProgress := NIL; //just to be sure this gets set right       	AddDeferredCall(func() GetRoot().(kAppSymbol):Open(), nil);       	KillStdButtonBar(NIL);       	GetRoot().(kAppSymbol):Close();       	AddDeferredSend(GetRoot(), 'LockScreen, [NIL]);       end,     ikbd1:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 145}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     GetBBarIconsSubmenuItem:       func()  //return a submenu item containing all the icons on the button bar       begin       	       end,     dynSpecials:       func()       begin       	return GetRoot().(kAppSymbol).db_SpecialItems;       end,     IsAppOpen:       func(theAppSym) //is this app open?       begin       	if debugOn then	       		begin       			Print("Calling IsAppOpen(" & SPrintObject(theAppSym) & ")");       		end;       		       	if not theAppSYm then       		begin       			if debugON then print("IsAppOpen() is returning nil");       			return nil;       		end       	else if getRoot().(theAppSym).viewCObject then       		begin       			if debugON then print("IsAppOpen() is returning TRUE");       			return true;       		end       	else       		begin       			if debugON then print("IsAppOpen() is returning nil");       			return nil;       		end;       end              ,     DB_Skew:       [       	{type: 'disabled, text: "Sorry! This demo version",  data:NIL, icon: 'iDollar},       	{type: 'disabled, text: "of Dash Board has expired.",  data:NIL, icon: 'iDollar},       	{type: 'separator, text: "",  data: nil, icon: 'iNone},       	{type: 'disabled, text: "To register and unlock",  data:NIL, icon: 'iDollar},       	{type: 'disabled, text: "your copy of Dash Board,",  data:NIL, icon: 'iDollar},       	{type: 'disabled, text: "please refer to the",  data:NIL, icon: 'iDollar},       	{type: 'disabled, text: "documentation, or visit",  data:NIL, icon: 'iDollar},       	{type: 'disabled, text: "http://www.fivespeed.com",  data:NIL, icon: 'iDollar},       	{type: 'separator, text: "", submenu: NIL, data: nil, icon: 'iNone},       	{type: 'cmd, text: "Enter Registration Code...", data: 'cmdRegister, icon: 'iDollar},       	{type: 'separator, text: "", submenu: NIL, data: nil, icon: 'iNone},       	{type: 'cmd, data: 'cmdQuit, icon: 'iClose, text: "Close Dash Board"},        ],     DeathPenalty:       func()       begin       	foreach i in self.deathRow do       		begin       			if IsFrame(self.(i)) then       				begin       					if self.(i).viewCobject then self.(i):Close();       				end;       			RemoveSlot(self, i);       		end;       end,     iLLhelp:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 195}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 195}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iRecent:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 183}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iSnowflake:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 225}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 225}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdConnect:       func()       begin       	getroot().connection:Open();       	getroot().connection._defaultButton:ButtonClickScript();       end,     iCall:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 231}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 231}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdInsertDate:       func()       begin       	local theText := LongDateStr(Time(), ROM_dateTimeStrSpecs.longDateStrSpec);       	:DashBoardInsertText(theText);       end,     GetRecentArray:       func()       begin       	return GetAppPrefs('|recent:DB:FiveSpeed|, {apps: []});       end,     cmdQuit:       func() //Quit Dash Board       begin       	if IsSameEntry(dbPrefs.DB, dbPrefs.BD) then  //Ntify user that DB can't be closed if it si the backdrop       		begin       			:FSNotify("Dash Board cannot be closed because it is the backdrop application. If you really want to close Dash Board, go to the Extras Drawer and choose another app to be the backdrop.");       			return NIL;       		end;       		       	local prefsWarn := "";       	if GetRoot().|DashBoardPrefs:FiveSpeed|.viewCobject then       		prefsWarn := "The Dash Board Prefs program will also be closed, and any changes you have made to the preferences will not be saved. ";       		       	if ModalConfirm("Are you sure you want to close Dash Board?" & prefsWarn, ["Close", "Cancel"]) = 0 then       		begin       			:DB_CloseMiniBar(); //closes only if open       			RemoveSlot(GetRoot().(kAppSymbol), 'youCantSeeMe);  //kill this slot so next bbar show is full bar       			if debugOn then print("killing b bar...");       			       			:DB_ShowScreenRebuildSlip(NIL);       			GetRoot():LockScreen(true);       			       			if GetRoot().|DashBoardPrefs:FiveSpeed|.viewCObject then       				GetRoot().|DashBoardPrefs:FiveSpeed|:Close();       			GetRoot().(kAppSymbol):Close();       			AddDeferredCall(func() begin KillStdButtonBar(NIL) end, NIL);       			AddDeferredSend(GetRoot(), 'LockScreen, [NIL]);       		end;       			       end,     DashBoardDoSpecialItem:       func(itemSym)  //runs a special item (for use from script). Always returns NIL.       begin       	       	local badParamMsg := "WARNING: The currently executing script (\"^0\") called the DashBoardDoSpecialItem() method with bad parameteters. (^1).";       	local myName := self.|scriptName:FiveSpeed|;       	if not IsString(myName) then myName := "ERR: Can't Get Script Name";       	       	if not IsSymbol(itemSym) then       		begin       			:Notify(kNotifyAlert, "Dash Board Script", ParamStr(badParamMsg, [myName, "parameter is not a symbol"]));       			return NIL;       		end;       		       	if not GetRoot().(kAppSymbol).(itemSym) then //check if special item really exists       		begin       			:Notify(kNotifyAlert, "Dash Board Script", ParamStr(badParamMsg, [myName, "parameter is not a valid command symbol"]));       			return NIL;       		end;       		       	//now we ready to rock;       	Perform(GetRoot().(kAppSymbol), itemSym, NIL);       	return NIL;       	       end,     iLCard1:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 193}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 193}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     NamaeBango:       func()       begin              	//convert userName into a number       	if debugOn then print("Entering boo dnag...");       	       	//get NewtonID name if present, otherwise current owner name       	local useNID;       	local stringName;       	local NIDEntry := GetAppPrefs('|NewtonID:NewtonID|, {});       	if HasSlot(NIDEntry, 'name) then       		begin       			useNID := true;       			stringName := NIDEntry.name;       		end       	else       		begin       			local stringName := GetUserConfig('name);       			if not IsString(stringName) then stringName := "Please set your user name in Owner Info";       			useNID := NIL;       		end;       		       	local nameStr := Clone(stringName);       	nameStr := stringFilter(nameStr, "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", 'passAll);       	nameStr := SubstituteChars(nameStr, "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", "9876543219876");       	       	if StrLen(nameStr) > 8 then       		begin       			local x := "";       			for i := 0 to 7 do       				x := x & nameStr[i];       			nameStr := x;       		end;       	while StrLen(nameStr) < 8 do       		nameStr := nameStr & "0";       	       	local nameNum := Floor(StringToNumber(nameStr));       	       	if debugOn then       		begin       			Print("the name to num routine is () is returning the following name and number:");       			print(stringName);       			print(nameNum);       		end;       		       	return {name: stringName, number: nameNum, NID: useNID};       	       end,     DB_HandleBaloney:       func(theSelf) //called when we get passed a 'self' from our recent tracking button toggle patch       begin       	local theItem := :DB_BaloneyToAppItem(theSelf);       	       	if debugOn then       		begin       			print("DB_HandleBaloney() reports that DB_BaloneyToAppItem() is returning this result:");       			Print(theItem);       		end;       		       	if theItem then :DB_AddRecent(theItem);       end,     cmdAlignPen:       func()       begin       	CalibrateTablet();       end,     iEvent:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 149}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DB_Rotate:       func(whichWay) //'L, 'R, or 'Flip       begin              	:DB_ShowScreenRebuildSlip(whichWay);       	GetRoot():LockScreen(true);       	local cOrient := GetOrientation();       	local nOrient;       	if whichWay = 'L then       		nOrient := cOrient + 1       	else if whichWay = 'R then       		nOrient := cOrient - 1       	else if whichWay = 'Flip then       		nOrient := cOrient + 2;       		       	if nOrient = -1 then       		nOrient := 3       	else if nOrient = 4 then       		nOrient := 0       	else if nOrient = 5 then       		nOrient := 1;       		       	if debugOn then :DBPrint(["DB_Rotate(): CORIENT & NORIENT!!!",corient,norient]);       	SetScreenOrientation(nOrient);       	GetRoot():LockScreen(NIL);       end,     cmd61:       func() //-10061 fix code       begin       	DoProgress('vGauge,       	  {closeBox: nil,       	   statusText: "Re-caching all activated packages (-10061 fix hack)",       	   barber: nil,       	   gauge: 0,       	   maxGauge: Length(GetGlobals().ActivePackageList) - 1,       	   type: 'vGauge},       	  func(cv) begin       	    local i := 0;       	    foreach pkg in GetGlobals().ActivePackageList do begin       	      local pkgName := GetPkgRefInfo(pkg).title;       	      cv:SetStatus('vGauge, {gauge: i, titleText: pkgName});       	      RefreshViews();       	      i := i + 1;       	    end;       	  end       	);       	PlaySound(@380);              end,     iCard1:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 163}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 163}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdReboot:       func()       begin       	if ModalConfirm("Are you sure you want to reset the Newton device?", ["Yes, Reboot", "No, Don't Reboot"]) = 0 then Reboot();       end,     cmdMute:       func()       begin       	if GetUserConfig('soundVolumeDB) > -32768.0 then       		begin       			GetRoot().(kAppSymbol).dbPrefs.muteVol := GetUserConfig('soundVolumeDB);       			EntryChangeXmit(GetRoot().(kAppSymbol).dbPrefs, kAppSYmbol);       		end;       	GetRoot().(kAppSymbol):DB_SetSystemVolume(-32768.0);              end,     cmdNull:       func()       begin       	nil;       end,     SlaughterFreezoids:       func() //move frozen entries off the button bar.       begin       	local buttHeads := GetRoot().extrasDrawer:GetPartCursor(nil, nil, '_buttonbar);       	local iconsMoved := 0;       	       	local theEHackArray := [];       	local theE := buttheads:Entry();       	       	while theE do       		begin       			AddArraySlot(theEHackArray, theE);       			theE := buttheads:Next();       		end;       		       	       	foreach i in theEHackArray do       		begin       			if i.class = 'FrozenEntry then       				begin       					GetRoot().extrasdrawer:SetExtrasInfo(i, {labels: NIL});       					iconsMoved := iconsMoved + 1;       				end;       		end;       		       	if iconsMoved > 0 then       		begin       			local baseMsg := "Dash Board cannot operate with frozen icons on the button bar.";       			local baseMsg2 := "moved to the Extras Drawer.";       			local varMsg := "icons were";       			if iconsMoved = 1 then       				varMsg := "icon was";       				       		:Notify(kNotifyAlert, kAppName, baseMsg && iconsMoved && varMsg && baseMsg2);       		       		end;       end,     iNote:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 208}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iTodo:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 136}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 136}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdKbd3:       func()       begin       	GetRoot().phoneKeyboard:Open();       end,     cmdToggleBB:       func()       begin       	if GetRoot().|dbminibar:fivespeed|.viewCObject then       		:DB_Unhide();       	else       		:DB_Hide();       end,     compatCheckFreezing:       func()       begin              	if (dbPrefs.rf = NIL) and (dbPrefs.launchFrozen = NIL) then	       	begin       		return NIL;       	end;              	local badPkgMsg := "Dash Board's package refreezing option was enabled, but an incompatible package is installed (\"^0\"). You should use this app to handle refreezing; Dash Board's refreezing option has been turned off.";              	       	if :IsPkgInstalled("FreezeMan:SAS") then	//DIE if freezeman is installed;       		begin       			dbPrefs.rf := NIL;       			dbPrefs.launchFrozen := NIL;       			EntryChangeXmit(dbPrefs, kAppSymbol);       			:FSNotify(ParamStr(badPkgMsg, ["FreezeMan"]));       			GetRoot().(kAppSymbol).refreezees := [];       		end;       		       	if :IsPkgInstalled("NewtCasePkgMgr:ICS") then	//DIE if freezeman is installed;       		begin       			dbPrefs.rf := NIL;       			dbPrefs.launchFrozen := NIL;       			EntryChangeXmit(dbPrefs, kAppSymbol);       			:FSNotify(ParamStr(badPkgMsg, ["NewtCase Package Manager"]));       			GetRoot().(kAppSymbol).refreezees := [];       		end;              end,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	if not GetAppPrefs('|BuiltIn:DB:FiveSpeed|, {init: NIL}).init then  //ensure builtin apps are aliased as DB needs       		:AliasIdiots();       	       	:SlaughterFreezoids();       		       	self.dbPrefs := :DB_GetPrefs();       	:UpdatePrefs();  //this is called to update prefs file for new pref slots added as DB is developed       	       	:DB_DoRecentPatch();		       	:HandleHackos();       	:Pope();       	:AliasGenius();       	:GetRecentArray();       	       	self.refreezees := [];       	       	       	//set current Newt and Card icons so they always match the actual state of the Newton       	local theO := GetOrientation();       	if theO = 0 then       		begin       			newtIcon := iNewt0;       			cardIcon := iCard0;       			lCardIcon := iLCard0;       		end       	else if theO = 1 then       		begin       			newtIcon := iNewt1;       			cardIcon := iCard1;       			lCardIcon := iLCard1;       		end       	else if theO = 2 then       		begin       			newtIcon := iNewt2;       			cardIcon := iCard2;       			lCardIcon := iLCard2;       		end       	else if theO = 3 then       		begin       			newtIcon := iNewt3;       			cardIcon := iCard3;       			lCardIcon := iLCard3;       		end;       		              	if youCantSeeMe then 											//////then we are in Hide mode!       		begin       				self.viewBounds := SetBounds(0,0,0,0);       			if not GetRoot().|DBminibar:FiveSpeed|.viewCObject then       				:DB_OpenMiniBar();       			GetRoot().|DBminibar:FiveSpeed|:MoveBehind(NIL);       		end       	else  															////else button bar is not hidden       		begin       			:DB_CloseMiniBar(); //closes if open otherwise does nothing       				       			local bBounds := GetAppPArams().buttonBarBounds;       			if bBounds.right - bBounds.left = 320 and bBounds.bottom - bBounds.top = 46 then  //then we are in an okay position for horizontal bar       				begin       					if dbPrefs.ctrlsLeft then        						self.Orient := 2       					else       						self.Orient := 0;       					self.viewBounds := Clone(bBounds);       				end;       			else if bBounds.right - bBounds.left = 46 and bBounds.bottom - bBounds.top = 320 then  //then vertical bar ok to go       				begin       					if bBounds.left = 0 then       						begin       							self.Orient := 3;		//SPECIAL CASE need to fix bounds cuz bBounds are global coordinates (negative app coords)       							local myFixedBounds := Clone(bBounds);       							myFixedBounds.right := bBounds.right - 46;       							myFixedBounds.left := bBounds.left - 46;       							self.viewBounds := myFixedBounds;       						end       					else       						begin       							self.Orient := 1;       							self.viewBounds := Clone(bBounds);       						end;       				end       			else  //else unsupported bar config       				begin       					self.death := true;       				end;       		end;	       		       	inherited:?ViewSetupFormScript();       end,     cmdGuestModeOff:       func()       begin       	       	local gMode := GetUserConfig('guestAccessOption);       	       	if gMode then       		begin       			if debugOn then print("GUEST MODE WAS ON, turning OFF");       			SetDefaultUserSettings();       			SetUserSettings(GetUserConfig('savedWritingStyleOptions));       			SetUserConfig('savedWritingStyleOptions, NIL);       			SetUserConfig('guestAccessOption, NIL);       		end;       end,     iChecklist:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 138}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 138}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iName:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);,     iConnect:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 146}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdRotate180:       func()       begin       	:DB_Rotate('Flip);       end,     dynRecent:       func()   ///this newer vesrion gets icons at menu build time to handle cases where apps change their icons       begin              	if debugOn then       		begin       			local sTicks := Ticks();       		end;       		       	local recApps := :GetRecentArray();       	local currIndex := 0;       	local saveChanges := NIL;       	if Length(recApps.apps) > dbprefs.recentNum then       		SetLength(recApps.apps, dbPrefs.recentNum);       	if Length(recApps.apps) > 0 then       		begin        			foreach i in recApps.apps do       				begin       					local theEntry := ResolveEntryAlias(i.data);       					if theEntry then       						begin       							local bIcon :=  :DB_EntryBigIcon(theEntry);       							i.bigIcon := bIcon;       							i.type := 'appIcon;       						end       					else  //else ENtry is invalid, lets kill it       						begin       							saveChanges:= true;       							ArrayRemoveCount(recApps.apps, currIndex, 1);       						end;       					currIndex := currIndex + 1;       				end;       			local rData := Clone(recApps.apps);       			AddArraySlot(rData, {type: 'separator, text: "", submenu: NIL, data: nil, icon: 'iNone});       			AddArraySlot(rData, {type: 'cmd, text: "Clear Recent Menu", submenu: NIL, data: 'cmdClearRecent, icon: 'iX, fs: TRUE});       			       			if saveChanges then EntryChangeXmit(recApps, kAppSymbol);       			       			if debugOn then       				begin       					local eTicks := Ticks();       					PRINT("DYNRECENT() [with icon lookup] takes this many ticks:" && (eTicks - sTicks));       				end;       					       			return rData;       		end;       	else       		return [];       end,     GetIdiots:       func()       begin       	if not GetAppPrefs('|BuiltIn:DB:FiveSpeed|, {init: NIL}).init then       		:AliasIdiots();       	return GetAppPrefs('|BuiltIn:DB:FiveSpeed|, {init: NIL});       end,     DB_OpenTimeSlip:       func()       begin       	if timeSlip and timeSlip.viewCObject then       		timeSlip:MoveBehind(NIL)       	else       		begin       			BuildContext(GetLayout("timeView.t")):Open();       		end;       end,     DB_NewNote:       func(noteSym)       begin       	local notepad := GetRoot().paperroll;       	if not notepad.viewCObject then notepad:Open();       	if notepad.viewCObject then       		begin       			notepad:MoveBehind(nil);       			notepad:AddEntryFromStationery(noteSym);       		end       	else       		:Notify(kNotifyAlert, kAppName, kCantOpenNP);       end,     ManHandleHacko:       func(pName, slotSym, uName)       begin       	foreach i in GetStores() do       		begin       			local hackoRef := GetPkgRef(pName, i);       			if hackoRef then break;       		end;       	if hackoRef and IsPackageActive(hackoRef) then       		begin       			if debugOn then print("BUSTER B-I-ITCHES ON THE PREMISES!");       			:sysbeep();       			if ModalConfirm("Message from Dash Board:\n\nThe package \"" & uName & "\" is incompatible with Dash Board. Dash Board cannot be opened until this package is frozen or deleted." &&       			"Would you like to freeze it now?", 'yesNo) then       				begin       					SafeFreezePackage(hackoRef);       				end       			else       				GetRoot().(kAppSymbol).(slotSym) := true;       		end;       end,     cmdRotate90R:       func()       begin       	:DB_Rotate('R);       end,     SOrNot:       func(theInt)       begin       	if theInt = 1 then       		""       	else       		"s";       end,     DashBoardFakePNButton:       func(whereTapped, howTapped)       begin       	local p1, p2;  //these are the params we'll pass the fake powernames tap call       	local p1OK := true;       	local p2OK := true;       	local l := GetRoot().(kAppSymbol):GlobalBox().left;       	local t := GetRoot().(kAppSymbol):GlobalBox().top;       	       	if whereTapped = 'icon then       		p1 := NIL       	else if whereTapped = 'text then       		p1 := true       	else       		p1OK := NIL;       		       	if 	howTapped = 'tap then       		p2 := NIL;       	else if howTapped = 'hold then       		p2 := TRUE;       	else       		p2OK := NIL;       		       	if not p1OK then       		GetRoot():Notify(kNotifyAlert, "Script Parameter Error", "The current script called the DashBoardFakePNButton() method with bad parameters." &        			" (The whereTapped parameter must be either 'icon or 'text).");       	else if not p2OK then       		GetRoot():Notify(kNotifyAlert, "Script Parameter Error", "The current script called the DashBoardFakePNButton() method with bad parameters." &        			" (The howTapped parameter must be either 'tap or 'hold).");       	else       		begin       			if GetRoot().|PowerNames:SilverWARE| and GetRoot().|PowerNames:SilverWare| then       				GetRoot().|PNNames:SilverWARE|:DoPopup(l, t, p1, p2);       			else       				GetRoot():Notify(kNotifyAlert, "PowerNames Not Installed", "PowerNames and/or PN Names Button is not currently installed (or is frozen). " &       				"This script works only with PowerNames from SilverWARE.");       		end;       end,     DB_GetDefaultMenuData:       func() //get default array for NewtonMenu       begin       	//get folders for extras       	local symList := GetFolderList('extrasdrawer, TRUE);        	       	// AddArraySlot(symList, '_help); //eliminated cuz most wont use often       	//AddArraySlot(symList, '_setup); //eliminated cuz most wont use often       	local theMenuData := [];       	local theText;       	foreach theSym in symList do       		begin       			theText := GetFolderStr(theSym);       			AddArraySlot(theMenuData, {type: 'folder, submenu: true, icon: 'iFolder, data: theSym, text: theText});       		end;       	Sort(theMenuData, '|str<|, 'text);       	ArrayInsert(theMenuData, {type: 'folder, submenu: true, icon: 'iFolder, data: NIL, text: GetFolderStr(NIL)}, 0);       	       	//set up top menu items       	ArrayInsert(theMenuData, {type: 'cmd, data: 'cmdQuit, icon: 'iClose, text: "Close Dash Board"}, 0);       	ArrayInsert(theMenuData, {type: 'cmd, data: 'cmdAbout, icon: 'iAbout, text: "About Dash Board"}, 1);       	ArrayInsert(theMenuData, {type: 'cmd, data: 'cmdPrefs, icon: 'iPrefs, text: "Dash Board Prefs"}, 2);       	ArrayInsert(theMenuData, {type: 'separator, data: NIL, icon: 'iNone, text: ""}, 3);       	ArrayInsert(theMenuData, {type: 'dynSub, data: 'dynRunning, subMenu: TRUE, icon: 'iRunning, text: "Running Apps"}, 4);       	ArrayInsert(theMenuData, {type: 'separator, data: NIL, icon: 'iNone,  text: ""}, 5);       	ArrayInsert(theMenuData, {type: 'dynSub, data: 'dynRecent, icon: 'iRecent, submenu: TRUE, text: "Recent Apps"}, 6);       	ArrayInsert(theMenuData, {type: 'separator, data: NIL, icon: 'iNone,  text: ""}, 7);       	ArrayInsert(theMenuData, {type: 'dynSub, data: 'dynExtras, icon: 'iExtras, submenu: TRUE, text: "Extras Drawer"}, 8);       	ArrayInsert(theMenuData, {type: 'separator, data: NIL, icon: 'iNone, text: ""}, 9);                     	       	//set up bottom menu items       	AddArraySlot(theMenuData, {type: 'separator, data: NIL, icon: 'iNone,  text: ""});       	AddArraySlot(theMenuData, {type: 'dynSub, data: 'dynSpecials, icon: 'iSpecials, submenu: TRUE, text: "All Special Items"});       	AddArraySlot(theMenuData, {type: 'separator, data: NIL, icon: 'iNone,  text: ""});       	AddArraySlot(theMenuData, {type: 'dynSub, data: 'dynScripts, icon: 'iScript, submenu: TRUE, text: "All Scripts"});       	AddArraySlot(theMenuData, {type: 'separator, data: NIL, icon: 'iNone, text: ""});       	AddArraySlot(theMenuData, {type: 'pkg, data: :GetIdiots().calendar, icon: 'iPackage, text: "Dates"});       	AddArraySlot(theMenuData, {type: 'pkg, data: :GetIdiots().cardfile, icon: 'iPackage, text: "Names"});       	AddArraySlot(theMenuData, {type: 'pkg, data: :GetIdiots().stylePalette, icon: 'iPackage, text: "Styles"});                                   	return theMenuData;       	        end       ,     iAlignPen:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 143}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iDollar:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 182}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     i61:       MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 1}),           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 1}),           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 1}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);,     GetBigIcon:       func(ikeSym) //takes a symbol for a little icon and returns the corresponding big icon (actual icon data)       begin              	return @233[2].iconPro.unhilited;       end,     cmdTest:       func()       begin       	ModalConfirm("TEST.", ["Done"]);       end,     iReboot:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 181}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DB_SymToRomIcon:       func(slotSym)       begin       	if debugOn then       		begin       			Print("Entering DB_SymToRomIcon & processing" && SPrintObject(slotSym));       		end;       		       	//hack for dual-named cardfile app!       	if slotSym = 'cardfile then       		begin       			if IsString(GetRoot().cardfile.title) then       				if StrEqual(GetRoot().cardfile.title, "Owner Info") then       					slotSym := '|ownerinfo:fivespeed|;       		end;       	       	local symList := '[copperfield, tinytim, paperroll, callapp, calculator, worldClock, alarm, stylePalette, preferenceRoll, |ownerinfo:fivespeed|,       	handwritingpractice, iobox, cardfile, calendar, extrasdrawer, findDrawer, assistant];       	local indexList := [0,1,11,12,14,15,16,17,18, 19, 20, 21, 22, 23, 24, 26, 27];       	       	local theIndex := LSearch(symList, slotSym, 0, '|=|, nil);       	if theIndex then       		return @233[indexList[theIndex]].iconPro.unhilited       	else       		return NIL;       end,     dieBBP: nil,     AliasToBigIcon:       func(theALias)       begin       	local e := ResolveENtryAlias(theAlias);       	if e then       		:DB_EntryBigIcon(e);       end,     iToggleBB:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                 resource: 2364}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                   resource: 2364}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     lCardIcon: nil,     cmdBLOn:       func()       begin       	Backlight(true);       end,     DB_Hide:       func()       begin       	       	:DB_ShowScreenRebuildSlip(NIL);       	GetRoot():LockScreen(true);              	GetRoot().(kAppSymbol).hideInProgress := true;       	GetRoot().(kAppSymbol).youCantSeeMe := true;       	local bPos := GetUserConfig('buttonBarPositions);       	       	if not IsArray(bPos) then       		begin       			SetUserConfig('buttonBarPositions, '[bottom, right, bottom, right]);       			bPos := GetUserConfig('buttonBarPositions);       		end       	else	//YAH! foudn the cause of -48406 errors: NIL elements in this fuckin array!       		begin       			if not bPos[0] then       				bPos[0] := 'bottom;       			if not bPos[1] then       				bPos[1] := 'right;       			if not bPos[2] then       				bPos[2] := 'bottom;       			if not bPos[3] then       				bPos[3] := 'right;       			SetUserConfig('buttonBarPositions, bPos);       		end;       		       //BEGIN 1.2b14 CODE REPLACEMENT       //***********ORIGINAL SOURCE***************	       //	KillStdButtonBar(       //		[        //			{buttonBarPosition: bPos[0], buttonBarThickness: 0},       //			{buttonBarPosition: bPos[1], buttonBarThickness: 0},       //			{buttonBarPosition: bPos[2], buttonBarThickness: 0},       //			{buttonBarPosition: bPos[3], buttonBarThickness: 0},       //		]);                     //************** BEGIN NEW 1.2b14 SOURCE ***************       	if getRoot().buttons.viewCObject then       		begin       			getRoot().buttons:Close()       		end;       	KillStdButtonBar(Array(4, {buttonBarPosition: 'none}));              //************** END NEW 1.2b14 SOURCE ***************              		       	GetRoot().(kAppSymbol).hideInProgress := NIL;       	       	//fix for incorrect initial minibar position??       	if GetRoot().|DBminibar:fivespeed| then       		SetValue(GetRoot().|DBminibar:fivespeed|, 'viewBounds, GetRoot().|DBminibar:fivespeed|.viewBounds);       	       	GetRoot():LockScreen(NIL);       	       end,     iGuestModeOff:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 135}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     ReFreeze:       func()        begin              	if debugON then       		begin       			local sT := Ticks();       		end;       		       	if (dbPrefs.rf = NIL) and (dbPrefs.launchFrozen = NIL) then	       		begin       			return NIL;       		end;       		       	:compatCheckFreezing();                     	local rfList := GetRoot().(kAppSymbol).refreezees;       	if Length(rfList) = 0 then       		return NIL;       	else       		begin       			//if debugOn then	Print("entering ReFreeze()...and Length(refreezees) is not 0...");       			local currIndex := 0;       			foreach package in rfList do       				begin       					local inUse := NIL;       					foreach part in package.parts do       						begin       							if part.partClass = 'BookEntry then       								begin       									if :IsBookOpen(part.partISBN) then inUse := true;       								end       							else if part.partClass = 'helpBookEntry then       								begin       									if :IsHelpBookOpen(part.partISBN) then inUse := true;       								end       							else        								begin       									if :IsAppOpen(part.partSym) then inUse := true;       								end;       						end;       						       					if debugOn then       						begin       							Print("Here is inUse and package:");       							print(inUse);       							print(package);       						end;       						       					if not inUse then        						begin       							call kShowBusyBoxFUnc with (true);       							if debugOn then Print("Freezing the package!!!@!@!!@!@!@!@!@");       							If IsPackageActive(package.pkg) then       								SafeFreezePackage(package.pkg);       							else       								begin       									if debugOn then print("%%%%%%%%%%% Didn't freeze pkg because somebody else beat me to it!");       								end;       							ArrayRemoveCount(rfList, currIndex, 1);       						end;       					currIndex := currIndex + 1;       				end;       		end;       	       	if debugOn then       		begin       			local eT := Ticks();       			Print("ReFreeze() took " & (eT - sT) & " ticks to execute");       		end;       	       end,     iMI:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 2}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 2}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DashBoardGetScriptResult:       func(scriptName, scriptID)  //return result of script, or '|scriptNotFound:FiveSpeed| if not found       begin              	if IsString(scriptName) = NIL and IsSymbol(scriptID) = NIL then       		begin       			:Notify(kNotifyALert, "Dash Board Script Warning", "WARNING: The currently executing script (\"" & self.|scriptName:FiveSpeed| & "\") called the DashBoardGetScriptResult() method with" &&       			"bad parameters. It is returning '|scriptNotFound:FiveSpeed|.");       			return '|scriptNotFound:FiveSpeed|;       		end;       	       	local s := :GetScriptSoupRef();       	local c := s:query({indexPath: ['name, 'date], beginKey: [scriptName, NIL], endKey: [scriptName, NIL]});       	e:= c:entry();       	       	local scriptEntry;       	       	if not scriptID then       		begin       			scriptEntry := e; 	//get first entry whose name matches scriptName       		end       	else       		begin       			while e do        				begin       					if e.id = scriptID then		//get first script whose name and id match       						begin       							scriptEntry := e;       							break;       						end;       					e := c:Next();       				end;       		       		end;       		       	if not scriptEntry then        		return '|scriptNotFound:FiveSpeed|;       	else       		return GetRoot().(kAppSymbol):DBRunScript({type: 'script, data: scriptEntry, icon: 'iScript, text: Clone(scriptEntry.name)});       	              end,     DB_FolderSymToMenuData:       func(theSym) //takes folder sym and returns a complete menuData array       begin              if debugON then sTicks := Ticks();              	local theMenuData := [];       	theCurse := GetRoot().extrasDrawer:GetPartCursor(nil, nil, theSym);       	theEntry := theCurse:Entry();              	while theEntry do       		begin	       			AddArraySlot(theMenuData, {text: theEntry.text,       											submenu: nil,       											type: 'pkg,       											icon: (if theEntry.class = 'frozenEntry then        													'iSnowflake        												else if (theEntry.class = 'helpBookEntry) or (theEntry.class = 'bookEntry) then        													'iBook        												else if (theEntry.class = 'AutoEntry) or (theEntry.class = '|????Entry|) then       													'iCube       												else        													'iPackage),       											data: MakeEntryAlias(theEntry)});       			theEntry := theCurse:Next();       		end;       	Sort(theMenuData, '|str<|, 'text);       	       if debugON then eTicks := Ticks();       if debugON then Print("Sorting the folder took:");       if debugON then PRint(eTicks - sTicks);              	return theMenuData;              end,     iRotate180:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 166}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 166}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewClass: 74 /* clView */,     iRotate90R:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 139}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 139}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cardIcon: nil,     DBRedoIcons:       func()       begin       	:LockScreen(true);       	iconHolder:Close();       	iconHolder:Open();       	:LockScreen(nil);       end;,     DB_SetSystemVolume:       func(dbVol)       begin       	SetSystemVolume(dbVol);       	SetUserConfig('soundVolumeDB, dbVol); //fuckin RETARDED ASS BULLSHIT!       	if dbVol <= -32768.0 then       		volBtn:DoMute()       	else       		volBtn:UnMute();       end,     iKbd234:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 148}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdNewOutline:       func()       begin       	:DB_NewNote('list);	       end,     DBHandleIconDrop:       func(dropType,dropData,dropPt) //dropdata.dragref.droppedEntries array contains the part entries dropped       begin              	if debugOn then Print("ENTERING DBHandleIconDrop().....>>>>>....<<<<<...\nDROP TYPE:");       	local currCfg := Clone(getroot().buttons:getPartEntries());              	local ihBounds := iconHolder:GlobalBox();       	       	local theO := GetRoot().(kAppSymbol).Orient;       	local dropPosition;       	if theO = 0 or theO = 2 then  //then we're horizontal       		dropPosition := dropPt.x div ((ihBounds.right - ihBounds.left) div 7);       	else  //else we're vertical       		dropPosition := dropPt.y div ((ihBounds.bottom - ihBounds.top) div 7);       		       	if debugOn then Print("DROP POSITION: " & dropPosition);       	       	if droptype = '|icon:db:fivespeed| then  //handle drag and drop within DB icon bar!       		begin       			local tgtIndex;       			if self.dropIndex then  //self shoud refer to destination icon or iconholder       				tgtIndex := Max(0,dropIndex); //fixed icons will have -1 dropIndex       			else       				begin       					tgtIndex := Max(0, dropPosition - Length(currCfg.fixed));    //dropPos is absolute pos on bbar and starts with 1, so subtaract 1, then subtract lnegth of fixed array       					if debugOn then print("dropped on iconHolder!!!!!!!!!!!!!!!!!");       				end;       				       			if debugOn then Print("TGTINDEX: " & tgtIndex);       			       			local movedPkg := currCfg.mobile[dropData.droppedIndex];       			       			if debugOn then PRINT("MOVEDPKG");       			if debugOn then PRINT(movedPkg);       			       			ArrayRemoveCount(currCfg.mobile, dropData.droppedIndex, 1); //remove dropped icon from array       			       			//1.2 FIX FOR CRASH DRAGGING LAST ICON NOWHERE (dragging the last icon on bar farther down the bar)       			if tgtIndex > Length(currCfg.mobile) - 1 then //then user is dragging the last item on bar to the empty area       				AddArraySlot(currCfg.mobile, movedPkg)		       			else       				ArrayInsert(currCfg.mobile, movedPkg, tgtIndex);       			       			GetRoot():LockScreen(true);       			AddDeferredSend(GetRoot().buttons, 'Reconfigure, [currCfg]);       			AddDeferredSend(GetRoot().(kAppSymbol), 'DBRedoIcons, nil);       			AddDeferredSend(GetRoot(), 'LockScreen, [nil]);       			return true;       		end;       	       	local dropees := dropData.dragRef.droppedEntries;       	local dropNum := Length(dropees);              	foreach i in dropees do       		begin       			if i.class = 'FrozenEntry then       				begin       					:Notify(kNotifyAlert, kAppName, "Sorry, you cannot drag frozen icons onto the Dash Board button bar. To add an entry to the button bar, please unfreeze it first.");       					return NIL;       				end;       		end;       	       	local freeSpots := 7 - (Length(currCfg.fixed) + Length(currCfg.mobile));       	              	              	if freeSpots < Length(dropees) then //there is no room on btn bar without removing anything       		begin       			if debugOn then PRINT("DBHandleIconDrop says: there is no room on the button bar,  removing last" && Length(dropees) & ".....");       			local numToRemove := Length(dropees) - freeSpots;       			for i := 1 to numToRemove do       				ArrayRemoveCount(currCfg.mobile, Length(currCfg.mobile) - 1, 1);       		end;       				       	local insertIndex := Min(dropPosition - Length(currCfg.fixed), Length(currCfg.mobile));       	insertIndex := Max(insertIndex,0);       	       	foreach i in dropees do       		begin       			ArrayInsert(currCfg.mobile, i, insertIndex);       			insertIndex := insertIndex + 1;       		end;       	AddDeferredSend(GetRoot().buttons, 'Reconfigure, [currCfg]);       	AddDeferredSend(GetRoot().(kAppSymbol), 'DBRedoIcons, nil);       	       	       	       	       	return nil;                end,     AliasIdiotsForced:       func()       begin       	local biPrefs := GetAppPrefs('|BuiltIn:DB:FiveSpeed|, {init: NIL});       	EntryRemoveFromSoupXmit(biPrefs, kAppSymbol);       	biPrefs := NIL;       	:AliasIdiots();       end,     debug: "dashBoard",     iDate:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 256}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdRegister:       func()       begin       	if not :DB_Kakunin() then       		begin       			GetRoot().(kAppSymbol).regSlip := BuildContext(GetLayout("RegSlip.t"));       			regSlip:Open();       		end       	else       		begin       			local theInfo := :NamaeBango();       			local theName := theInfo.name;       			local theSN := theInfo.number;       			:Notify(kNotifyAlert, kVsnStr, "\nThis copy of Dash Board is registered to:\n" & theName & "\n" & theSN & "\n\nThanks for your support!");		       		end;       end,     IsHelpBookOpen:       func(theISBN) //true or nil whether tinytim book is open       begin       	if not theISBN then       		begin       			if debugOn then Print("*******************WARNING! RED ALERT! MOON DOG! ARF! IsHelpBookOpen() called without valid ISBN numero! ***");       			return NIL;       		end;       	else if GetRoot().tinyTim.viewCobject and StrEqual(GetRoot().tinyTim.isbn, theISBN) then       		return TRUE       	else       		return NIL;       end,     youCantSeeMe: nil,     DB_SymToActiveAppItem:       func(appSym) //returns alias of a NON_FROZEN app or NIL, given the appsymbol. not work with book readers.       begin              	if debugOn then       		begin       			Print("Calling DB_SymToActiveAppItem(" & SPrintObject(appSym) & ")...........");       		end;       		       	local theAlias := NIL;       		       	if LSearch(GetRoot().(kAppSymbol).idiotSyms, appSym, 0, '|=|, nil) then       		theAlias := GetAppPrefs('|BuiltIn:DB:FiveSpeed|, {init: NIL}).(appSym);       		       	//HANDLE BOOKS! sym will be Copperfield.         	if appSym = 'copperfield then       		begin       			if GetRoot().copperfield.viewCobject then       				begin       					local pRef := ObjectPkgRef(getroot().copperfield.library.(Intern(GetRoot().copperfield.isbn)).book);       					theAlias := :DB_GetBookFromPkgRef(GetRoot().copperfield.isbn, pRef, 'BookEntry);       				end       			else       				return NIL;  //ABORT early cuz we know it copperfield and we know it is closed       		end;       	       	       	if not theALias then       		begin       			local pRef := ObjectPkgRef(GetRoot().(appSym)._proto);       			if not pRef then return NIL;    // abort and return NIL at this point if there is not a valid pkgRef ******************EARLY RETURN       			pInfo := GetPkgRefInfo(pRef);       			local curse1 := GetRoot().extrasDrawer:GetPartCursor(pInfo.title, pInfo.store, '_all);       			local curse2 := GetRoot().extrasDrawer:GetPartCursor(pInfo.title, pInfo.store, '_buttonbar);       			local e1 := curse1:Entry();       			local e2 := curse2:Entry();       			while e1 or e2 do       				begin       					if e1 then       						begin       							if e1.app = appSym then       								begin       									theAlias := MakeEntryAlias(e1);       									break;       								end;       						end;       					if e2 then       						begin       							if e2.app = appSym then       								begin       									theAlias := MakeEntryAlias(e2);       									break;       								end;       						end;       					e1 := curse1:Next();       					e2 := curse2:Next();       				end;       		end;              	//now we should have an alias if possible       	if theAlias then       		begin       			local theEntry := ResolveEntryAlias(theAlias);       			if theEntry then       				begin       					return {type: 'pkg, text: Clone(theEntry.text), icon: 'iPackage, data: theAlias};       				end       			else       				return NIL;       		end       	else       		return NIL;       			       end,     FSNotify:       func(theMsg)       begin       	:Notify(kNotifyAlert, kAppName, theMsg);       end,     iLCard3:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 190}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 190}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdBLToggle:       func()       begin       	if BackLightStatus() then       		Backlight(NIL);       	else       		BackLight(true);       end,     AddDefaultScripts:       func()       begin       	local sSoup := :GetScriptSoupRef();       	       	local s1 :=        		{       			Name: "Example Script 1",        			Date: TimeInSeconds(),       			Info: "A simple example Dash Board script.",       			ID: '|example1:FiveSpeed|,       			scriptText: "// EXAMPLE SCRIPT 1\n" &       			"//This script is a basic example\n" &       			"//of how to write a script\n" &       			"//within Dash Board.\n" &       			"//It does nothing useful.\n\n" &       			"local theAnswer;\n" &       			"if ModalConfirm(\"Have you stopped beating your spouse? Yes or No?\", 'yesNo) then\n" &       			"\ttheAnswer := \"Yes.\"\n" &       			"else\n" &       			"\ttheAnswer := \"No.\";\n" &       			"\tGetRoot():Notify(3, \"Example Script 1\", \"\\n\\nYou answered\" && theAnswer);\n\n\n\n\n\n\n\n\n\n\n\n\n\n",       		};       	       	local s2 :=        		{       			Name: "Example Script 2",        			Date: TimeInSeconds(),       			Info: "A simple example Dash Board script.",       			ID: '|example2:FiveSpeed|,       			scriptText: "// EXAMPLE SCRIPT 2\n" &       			"//This script clears the clipboard, removing\n" &       			"//any clipping that has been dragged\n" &       			"//to the side of the screen.\n\n" &       			"if ModalConfirm(\"Are you sure you want to delete all data from the clipboard?\", 'yesNo) then\n" &       			"\tSetClipboard(nil);\n\n\n\n\n\n\n\n\n\n\n\n\n\n",       		};       		       	local s3 :=        		{       			Name: "Example Script 3",        			Date: TimeInSeconds(),       			Info: "Shows how to use the DashBoardDoDialog() method to prompt for user input.",       			ID: '|example3:FiveSpeed|,       			scriptText: "// EXAMPLE SCRIPT 3\n" &       			"//This script shows how to use\n" &       			"//DashBoardDoDialog() to get\n" &       			"//user input for your script.\n\n" &       			"       //let's do a very generic dialog       local theUserResponse :=        	:DashBoardDoDialog(NIL, NIL, NIL, NIL, NIL, NIL);              if theUserResponse then       	:Notify(3, \"User Response\", theUserResponse);       else       	:Notify(3, \"User Response\", \"The user cancelled.\");                     //now let's customize the next dialog       theUserResponse :=        	:DashBoardDoDialog(       		'string, //return value type       		\"Isn't Dash Board cool?\", //prompt message       		\"Stupid Question Dialog\", //dialog window title       		\"Yes, very\", //default answer       		\"I Refuse To Answer\", //cancel button text       		\"Enter My Answer\" //ok button text       	);              if theUserResponse then       	:Notify(3, \"User Response\", theUserResponse);       else       	:Notify(3, \"User Response\", \"The user cancelled.\");       	       			"       		};       	       	local s4 :=        		{       			Name: "Example Script 4",        			Date: TimeInSeconds(),       			Info: "Shows how to use the DashBoardDoSpecialItem() method.",       			ID: '|example4:FiveSpeed|,       			scriptText: "// EXAMPLE SCRIPT 2\n" &       			"//This script shows how to use\n" &       			"//the DashBoardDoSpecialItem()\n" &       			"//method to execute a DB Special\n" &       			"//item from your script.\n" &       			"       if ModalConfirm(\"Do you want to make a new checklist in the Notes app?\", [\"Yes, Please\", \"No, Thanks\"]) = 0 then       	:DashBoardDoSpecialItem('cmdNewChecklist);              "       		};       		       		       	sSoup:AddToDefaultStoreXmit(s1, kAppSymbol);       	sSoup:AddToDefaultStoreXmit(s2, kAppSymbol);       	sSoup:AddToDefaultStoreXmit(s3, kAppSymbol);       	sSoup:AddToDefaultStoreXmit(s4, kAppSymbol);       	return NIL;                     end,     cmdInsertTimeDate:       func()       begin       	local theText := LongDateStr(Time(), ROM_dateTimeStrSpecs.longDateStrSpec) & ", " & HourMinute(Time());       	:DashBoardInsertText(theText);       end,     iBLon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 152}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iBook:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 238}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iLeft:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 176}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 176}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdBtnsR:       func()       begin              	local e0, e2;              	local x := GetUserConfig('buttonBarPositions);       	if not IsArray(x) then       		begin       			e0 := 'bottom;       			e2 := 'bottom;       		end       	else       		begin       			e0 := x[0];       			e2 := x[2];       		end;       	SetUserConfig('buttonBarPositions, [e0,'right,e2,'right]);              end,     battStatSlip: nil,     iCard3:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 159}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 159}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdSDS1:       func()       begin       	if Length(GetStores()) >= 2 and (not GetStores()[1]:IsReadOnly()) then       		begin       			SetDefaultStore(GetStores()[1]);       		end       	else       		:SysBeep();       end,     DB_GetGMode:       func() //is guest mode on?       begin       	return GetUserConfig('savedWritingStyleOptions);       end,     iNewt1:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 158}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iRunning:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 184}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cmdMIAAG:       func() //opens More Info At-A-Glance app       begin       	if GetRoot().|AtAGlance:SilverWARE| then       		begin       			GetRoot().|AtAGlance:SilverWARE|:Open();       			GetRoot().|AtAGlance:SilverWARE|:MoveBehind(NIL);       		end       	else       		:SysBeep();       end,     DB_MakeSpecialSub:       func()       begin       	AddArraySlot(dbPrefs.nMenu, {type: 'sub, data: DeepClone(db_SpecialItems), icon: 'iMenu, submenu: true, text: "SpEciAL iTeMs"});              end,     DB_Blink:       func()       begin       	:Hilite(nil);       	RefreshViews();       	sleep(5);       	:Hilite(true);       	refreshviews();       	sleep(5);       	:Hilite(nil);       	refreshviews();       	sleep(5);       	:hilite(true);       	refreshviews();       	sleep(5);       	:Hilite(nil);              end,     cmdCtrlsR:       func()       begin       	GetRoot().(kAppSymbol).dbPrefs.ctrlsLeft := NIL;       	EntryCHangeXmit(GetRoot().(kAppSymbol).dbPrefs, kAppSymbol);       	:DB_RedoDB();       end,     PNButtonHeld:       func()       begin       	if GetRoot().|PowerNames:SilverWARE| then       		GetRoot().|PNNames:SilverWARE|:DoPopup(0, 434, NIL, true)       	else       		:Notify(kNotifyAlert, "PowerNames Not Installed", "PowerNames is not currently installed (or is frozen). This button works only with PowerNames from SilverWARE.");       end,     iScript:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 133}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     WasWere:       func(theInt)       begin       	if theInt = 1 then       		"was"       	else       		"were";       end,     viewFillPattern:       kRGB_Gray5       ,     GetScriptSoupRef:       func()       begin       	//NOTE! if you modify this soupDef you must modify the UninstallScript too! um, maybe...is there one? hehe       	       	local mySoupDef := {name: "DashBoardPrefs:FiveSpeed",       		userName: "Dash Board Scripts",       		ownerApp: '|DashBoardPrefs:FiveSpeed|,       		ownerAppName : "Dash Board",       		userDescr: "This soup is where Dash Board's user scripts are stored.",       		indexes: [{structure: 'multiSlot, path: ['name, 'date], type: ['string, 'int]}],       		};       		       	       	local myUsoup := RegUnionSoup('|DashBoardPrefs:FiveSpeed|, mySoupDef);       	return myUsoup;       end,     iHideBB:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                 resource: 4010}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                   resource: 4010}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EC", resource: })             ,             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     T_SymToAlias:       func(appSym) //returns alias of a NON_FROZEN app, give the appsymbol. not work with book readers.       begin       	local biPrefs := GetAppPrefs('|BuiltIn:DB:FiveSpeed|, {init: NIL});       	local theAlias := biPrefs.(appSym);       	       	if not theALias then       		begin       			local pRef := ObjectPkgRef(GetRoot().(appSym)._proto);       			       			       			//************************************* BEGIN SCHLICK BUG INVESTIGATION 990226 *********************       			if pRef = NIL then       				begin       				PRINT("DEBUG_DUMP: SCHLICK990226, [pRef = NIL in T_SymToAlias], dumping GetRoot().(appSym)");       				PRINT(GetRoot().(appSym));       				return NIL; //************EARLY RETURN, failed for weird reason. ADDED IN 1.2b14 TO FIX BUG REPORT FROM Rupert Schlick <rupert@ip-net.at>       			end;       			//****************************************** END SCHLICK BUG INVESTIGATION *************************       				       			pInfo := GetPkgRefInfo(pRef);       			local curse1 := GetRoot().extrasDrawer:GetPartCursor(pInfo.title, pInfo.store, '_all);       			local curse2 := GetRoot().extrasDrawer:GetPartCursor(pInfo.title, pInfo.store, '_buttonbar);       			local e1 := curse1:Entry();       			local e2 := curse2:Entry();       			while e1 or e2 do       				begin       					if e1 then       						begin       							if e1.app = appSym then       								begin       									theAlias := MakeEntryAlias(e1);       									break;       								end;       						end;       					if e2 then       						begin       							if e2.app = appSym then       								begin       									theAlias := MakeEntryAlias(e2);       									break;       								end;       						end;       					e1 := curse1:Next();       					e2 := curse2:Next();       				end;       		end;              			       	return theAlias;       end,     HBCrap:       func(theISBN)       begin              	if debugON then Print("Entering HBCrap().........HBCrap()...............HBCrap()................");       	       	local pRef := ObjectPkgRef(getroot().tinytim.bookref);       	       	if not pRef then return;	//DIE if book not really in package.       		       	if not IsPackageActive(pRef) then return;  //die if frozen, it cant be really open then       	       	local theHB := :DB_GetBookFromPkgRef(theISBN, pRef, 'HelpBookEntry);       		       		       	if theHB then       		begin       			if debugOn then Print("HBCrap() says: A help book was discovered: " && Clone(ResolveEntryAlias(theHB).text));       			:DB_AddRecent({type: 'pkg, data: theHB, text: Clone(ResolveEntryAlias(theHB).text), icon: 'iBook});       		end       	else       		begin       			if debugOn then Print("HBCrap() says: NO VALID HELP BOOK WAS UNEARTHED.");       		end;       	       end,     iNone: nil    };iconHolder :=    {viewBounds: {left: 0, top: 0, right: 233, bottom: 31},     viewFlags: 545,     viewFormat: 0,     viewSetupChildrenScript:       func()       begin       	local myKids := [icon1,icon2,icon3,icon4,icon5,icon6,icon7];       	local theCunt := 0;       	local theEntries := GetRoot().buttons:GetPartEntries();       	       	If Length(theEntries.fixed) + Length(theEntries.mobile) > 7 then //handle too many icons on bbar       		begin       			local remCt := 0;       			while Length(theEntries.fixed) + Length(theEntries.mobile) > 7 do       				begin       					call kSetExtrasInfoFunc with (theEntries.mobile[Length(theEntries.mobile) -1], {labels: NIL}); //put last icon in mobile array back into Extras/Unfiled       					remCt := remCt + 1;       					theEntries := GetRoot().buttons:GetPartEntries();       				end;       			:Notify(kNotifyALert, kAppName, remCt && "icon" & :SOrNot(remCt) && :WasWere(remCt) && "were moved to the Extras Drawer because they could not fit on the Dash Board button bar. (It holds 7 icons).");       		       		end;       	       	foreach i in theEntries.fixed do       		begin       			if theCunt > 6 then break;       			myKids[theCunt].dbPkg := MakeEntryAlias(i);       			myKids[theCunt].noDrag := true;       			myKids[theCunt].dropIndex := -1; //-1 for fixed icons       			theCunt := theCunt + 1;       		end;       	       	local dIndex := 0;       	foreach i in theEntries.mobile do       		begin       			if theCunt > 6 then break;       			myKids[theCunt].dbPkg := MakeEntryAlias(i);       			myKids[theCunt].dropIndex := dIndex;       			dIndex := dIndex + 1;       			theCunt := theCunt + 1;       		end;              end,     totalIconWidth: 0,     viewSetupDoneScript:       func()       begin       		       	if GetRoot().(kAppSymbol).Orient = 0 or GetRoot().(kAppSymbol).Orient = 2 then  //then we're horizontal       		begin       			RemoveSlot(self, 'icon);       			local freeSpace := 233 - self.totalIconWidth;       			if freespace < 6 then return; //in case lots of super wide ass icons       			local theDiv := freespace div 6;       			local theMod := freespace mod 6;       			local myKids := :childviewframes();       			local newBounds, theEnd, extraPixel, iWidth;       			       			              		for i := 0 to 5 do //skip index 0, but we get its bounds, so use i+1 for index of icon being moved       			begin       				extraPixel := 0;       				if theMod > 0 then       					begin       						extraPixel := 1;       						theMod := theMod - 1;       					end;       	       					       				theEnd := myKids[i].viewBounds.right;       				newBounds := Clone(myKids[i + 1].viewBounds);       				iWidth := newBounds.right - newBounds.left;       				newBounds.left := (theEnd + theDiv + extraPixel);       				newBounds.right := (newBounds.left + iWidth);       				SetValue(myKids[i+1], 'viewBounds, newBounds);       			end;       		end       	else			//else we're vertical       		begin 		       			self.icon := self.vIcon;       			local myWidth := self.viewbounds.right - self.viewbounds.left;       			local freeSpace := 232 - self.totalIconHeight;       			if freespace < 6 then return; //in case lots of super wide ass icons       			local theDiv := freespace div 6;       			local theMod := freespace mod 6;       			local myKids := :childviewframes();       			local newBounds, theEnd, extraPixel, iHeight;              		for i := 0 to 5 do //skip index 0, but we get its bounds, so use i+1 for index of icon being moved       			begin       				extraPixel := 0;	//FUCK the extraPixel for vertical--usually too much free space anywayz       				theEnd := myKids[i].viewBounds.bottom;       				newBounds := Clone(myKids[i + 1].viewBounds);       				iHeight := newBounds.bottom - newBounds.top;       				newBounds.left := 0;       				newBounds.right := myWidth;       				newBounds.top := (theEnd + theDiv + extraPixel);       				newBounds.bottom := (newBounds.top + iHeight);       				SetValue(myKids[i+1], 'viewBounds, newBounds);       			end;       		end;       	       	       end,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	self.viewBounds := myBounds[GetRoot().(kAppSymbol).Orient];       	self.totalIconHeight := 0;       	self.totalIconWidth := 0;       	       	inherited:?ViewSetupFormScript();       end,     myBounds:       [       	SetBounds(0,0,233,31),       	SetBounds(1,0,33,232),       	SetBounds(45,0, 277, 31),       	SetBounds(13,0,45,232)       ],     totalIconHeight: 0,     ViewGetDropTypesScript:       func(currentPoint)        begin       	return ['icon, '|icon:db:fivespeed|];       	//return an array of symbols       end,     ViewDropScript:       func(dropType,dropData,dropPt)       begin       	:DBHandleIconDrop(dropType,dropData,dropPt);       end,     viewQuitScript:       // must return the value of inherited:?ViewQuitScript()       func()       begin       	inherited:?ViewQuitScript();       end,     icon:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 187}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);,     vIcon:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 188}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);,     deathRow:       '[       	icon,       	totalIconHeight,       	totalIconWidth,       ],     dbType: '|dbIconBtn:FiveSpeed|,     viewClickScript:       func(unit)       begin       	:BLOT();       	true;       	// Return true if click has been completely handled, nil otherwise       end,     debug: "iconHolder",     viewClass: 76 /* clPictureView */    };AddStepForm(dashBoard, iconHolder);StepDeclare(dashBoard, iconHolder, 'iconHolder);icon1 :=    {viewBounds: {left: 1, top: 1, right: 33, bottom: 30},     bbarIndex: 0,     debug: "icon1",     _proto: _v76_0    };AddStepForm(iconHolder, icon1);StepDeclare(iconHolder, icon1, 'icon1);icon2 :=    {viewBounds: {left: 34, top: 1, right: 66, bottom: 30},     bbarIndex: 1,     debug: "icon2",     _proto: _v76_0    };AddStepForm(iconHolder, icon2);StepDeclare(iconHolder, icon2, 'icon2);icon3 :=    {viewBounds: {left: 67, top: 1, right: 99, bottom: 30},     bbarIndex: 2,     debug: "icon3",     _proto: _v76_0    };AddStepForm(iconHolder, icon3);StepDeclare(iconHolder, icon3, 'icon3);icon4 :=    {viewBounds: {left: 100, top: 1, right: 132, bottom: 30},     bbarIndex: 3,     debug: "icon4",     _proto: _v76_0    };AddStepForm(iconHolder, icon4);StepDeclare(iconHolder, icon4, 'icon4);icon5 :=    {viewBounds: {left: 134, top: 1, right: 166, bottom: 30},     bbarIndex: 4,     debug: "icon5",     _proto: _v76_0    };AddStepForm(iconHolder, icon5);StepDeclare(iconHolder, icon5, 'icon5);icon6 :=    {viewBounds: {left: 167, top: 1, right: 199, bottom: 30},     bbarIndex: 5,     debug: "icon6",     _proto: _v76_0    };AddStepForm(iconHolder, icon6);StepDeclare(iconHolder, icon6, 'icon6);icon7 :=    {viewBounds: {left: 200, top: 1, right: 232, bottom: 30},     bbarIndex: 6,     debug: "icon7",     _proto: _v76_0    };AddStepForm(iconHolder, icon7);StepDeclare(iconHolder, icon7, 'icon7);newtMenu :=    {viewBounds: {left: 1, top: 31, right: 59, bottom: 45},     menuCOntents: [],     text: "",     DBDestroyHierarchy:       func()       begin              	if debugOn then print("Calling DBDestroyHierarchy() now...");       	       	i := Length(self.hierarchy) - 1; 	       	       	while i > -1 do       	begin       		self.hierarchy[i]:Close();       		i := i -1;       	end;       	       	self.hierarchy := [];       	       	:Hilite(nil);       end,     DBMenuCancelled:       func()       begin              	if Length(self.hierarchy) > 0 then 		//then menu cancelled was not last, must reactivate older menu       		begin       			local hLevel := Length(self.hierarchy) - 1;       			self.hierarchy[hLevel]:DBMenuReactivate();       		end       	else									//the menu cancelled was last; we should unhilite        		begin       			:Hilite(nil);       		end;              end,     buttonClickScript:       func()       begin	       	       	:Hilite(true);       	local myBounds := :GlobalBox();       	       	local menuData := Clone(:DB_GetNMenuData().nMenu);  //this clone and shit immediately below are NEW in 1.5d23       	AddArraySlot(menuData, {type: 'separator, text: "", submenu: NIL, data: nil, icon: 'iNone});       	AddArraySlot(menuData, {type: 'cmd, text: "Hide Button Bar", submenu: NIL, data: 'DB_Hide, icon: 'iHideBB});       	       	if GetRoot().(kAppSymbol).Orient = 0 or GetRoot().(kAppSymbol).Orient = 2 then       		begin       			local fakeBounds := SetBounds(myBounds.left, myBounds.top, myBounds.left, myBounds.top);        			:DBBuildHierMenu(fakeBounds, menuData, self)       		end       	else       		:DBBuildHierMenu(myBounds, menuData, self);       		       	       end,     viewSetupChildrenScript:       func()       begin       	if dbPrefs.triBtn then       		triBtn:Open();       	else       		if triBtn.viewCobject then triBtn:Close();       end,     debug: "newtMenu",     _proto: theBtn    };AddStepForm(dashBoard, newtMenu);newtMenuIcon :=    {     icon:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021", resource:                  }),           GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021", resource:                  }),           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);,     viewBounds: {left: 1, top: 1, right: -1, bottom: -1},     viewFlags: 1,     viewFormat: nil,     viewTransferMode: 8,     viewJustify: 240,     icon0:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021", resource:                  }),           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 171}),           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 170}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);,     icon1:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021", resource:                  }),           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 175}),           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 173}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);,     icon3:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021", resource:                  }),           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 174}),           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 172}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	local theO := GetRoot().(kAppSymbol).Orient;       	if theO = 1 then       		self.icon := self.icon1       	else if theO = 3 then       		self.icon := self.icon3       	else       		self.icon := self.icon0;       	inherited:?ViewSetupFormScript();       end,     debug: "newtMenuIcon",     viewClass: 76 /* clPictureView */    };AddStepForm(newtMenu, newtMenuIcon);triBtn :=    {viewBounds: {left: 0, top: 0, right: 0, bottom: 0},     viewFlags: 512,     viewFormat: 14,     viewJustify: 240,     viewFillPattern: kRGB_Gray5,     DB_CalcBounds:       func(oBounds) //OVERRIDES APP Base METHOD, for special case//calculates the proper bounds for the miniButtons, depending on Dash Boards Orient slot (orientation)       begin       	if self.dontCalcBounds then //slots which shoudl have same bounds in all orientations should get a dontCalcBounds slot set to true (i.e., triBtn)       		return oBounds;       		       	local TheO := GetRoot().(kAppSymbol).Orient;       	local l,t,r,b;       	if theO = 0 then       		return oBounds       	else if theO = 1 then       		begin       			l := oBounds.top; //no +1 cuz triBtn is inside a greyBtnProto already       			t := oBounds.left;       			r := oBounds.bottom;       			b := oBounds.right;       		end       	else if theO = 2 then       		begin       			l := oBounds.left; //no + 45 cuz we are special child of other greybtn       			t := oBounds.top;       			r := oBounds.right;       			b := oBounds.bottom       		end       	else if theO = 3 then       		begin       			l := 0;       			t := oBounds.left;       			r := 14;       			b := oBounds.right;       		end	;       	return SetBounds(l,t,r,b);       end,     viewClickScript:       func(unit)       begin       	return true;       	// Return true if click has been completely handled, nil otherwise       end,     dontCalcBounds: true,     debug: "triBtn",     viewClass: 74 /* clView */    };AddStepForm(newtMenu, triBtn);StepDeclare(newtMenu, triBtn, 'triBtn);triBtn_v0_0 :=    {viewBounds: {left: 0, top: 0, right: 28, bottom: 14},     buttonClickScript:       func()       begin	       		       	:Hilite(true);       	local myBounds := :GlobalBox();       	       	local menuData := Clone(:DB_GetNMenuData().nMenu);  //this clone and shit immediately below are NEW in 1.5d23       	AddArraySlot(menuData, {type: 'separator, text: "", submenu: NIL, data: nil, icon: 'iNone});       	AddArraySlot(menuData, {type: 'cmd, text: "Hide Button Bar", submenu: NIL, data: 'DB_Hide, icon: 'iHideBB});       	       	if GetRoot().(kAppSymbol).Orient = 0 or GetRoot().(kAppSymbol).Orient = 2 then       		begin       			local fakeBounds := SetBounds(myBounds.left, myBounds.top, myBounds.left, myBounds.top);        			:DBBuildHierMenu(fakeBounds, menuData, self)       		end       	else       		:DBBuildHierMenu(myBounds, menuData, self);       		       	       end,     DBDestroyHierarchy:       func()       begin              	if debugOn then print("Calling DBDestroyHierarchy() now...");       	       	i := Length(self.hierarchy) - 1; 	       	       	while i > -1 do       	begin       		self.hierarchy[i]:Close();       		i := i -1;       	end;       	       	self.hierarchy := [];       	       	:Hilite(nil);       end,     DBMenuCancelled:       func()       begin              	if Length(self.hierarchy) > 0 then 		//then menu cancelled was not last, must reactivate older menu       		begin       			local hLevel := Length(self.hierarchy) - 1;       			self.hierarchy[hLevel]:DBMenuReactivate();       		end       	else									//the menu cancelled was last; we should unhilite        		begin       			:Hilite(nil);       		end;              end,     icon: nil,     icon1:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 197}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     icon2:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 199}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     icon3:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 198}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	local theO := GetRoot().(kAppSymbol).Orient;       	if theO = 1 then       		self.icon := self.icon2       	else if theO = 3 then       		self.icon := self.icon3       	else       		self.icon := self.icon1;       	inherited:?ViewSetupFormScript();       end,     _proto: theBtn    };AddStepForm(triBtn, triBtn_v0_0);triBtn_v0_1 :=    {viewBounds: {left: 29, top: 0, right: 43, bottom: 14},     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 184}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     buttonClickScript:       func()       begin              	:DBHandleCommand({type: 'dynSub, data: 'dynRunning, icon: 'iRunning, submenu: TRUE, text: "Running Apps"}, :GlobalBox(), self);       	//:Hilite(nil); //unhilite button after action completes       end,     _proto: theBtn    };AddStepForm(triBtn, triBtn_v0_1);triBtn_v0_2 :=    {viewBounds: {left: 44, top: 0, right: 58, bottom: 14},     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 183}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E3\uP", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     buttonClickScript:       func()       begin              	:DBHandleCommand({type: 'dynSub, data: 'dynRecent, icon: 'iRecent, submenu: TRUE, text: "Recent Apps"}, :GlobalBox(), self);       	//:Hilite(nil); //unhilite button after action completes       end,     _proto: theBtn    };AddStepForm(triBtn, triBtn_v0_2);timeBtn :=    {viewBounds: {left: 60, top: 31, right: 103, bottom: 45},     buttonClickScript:       func()       begin       	x := :DB_GetPrefs();       	if x.noDBTD then       		begin       			GetRoot().alarm:Toggle();       			if GetRoot().alarm.viewCObject then       				GetRoot().alarm:MoveBehind(NIL);       		end       	else       		:DB_OpenTimeSlip();       		       	:Update();       	:Hilite(nil);       end,     Update:       func()       begin       	       	try       	       		SetValue(timeTxt, 'text, StringFilter(HourMinute(time()), ".:1234567890", 'passAll));              		local theO := GetRoot().(kAppSymbol).Orient;       		if theO = 1 or theO = 3 then       		begin       			txtPic.icon:=MakeBitmap(29,12,nil);       			timetxt:viewIntoBitmap(nil,nil,txtPic.icon);       			if theO = 1 then       				MungeBitmap(txtPic.icon, 'rotateRight, nil)       			else       				MungeBitmap(txtPic.icon, 'rotateLeft, nil);       			txtPic:dirty();       		end;       		refreshviews()       	onexception |evt.ex| do       		begin       			if debugOn then Print("¥¥¥¥TimeBtn.Update exception handler trapped and annihilated the exception...");       		end;       end,     viewSetupDoneScript:       func()       begin       	AddDeferredSend(self, 'Update, nil);       end,     viewFlags: 545,     debug: "timeBtn",     _proto: theBtn    };AddStepForm(dashBoard, timeBtn);StepDeclare(dashBoard, timeBtn, 'timeBtn);timeTxt :=    {viewBounds: {left: 13, top: 1, right: 42, bottom: 13},     viewJustify: 8388614,     viewFormat: 0,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	//SetValue(self, 'text, TimeStr(time(), ROM_dateTimeStrSpecs.shortestTimeStrSpec));       	//SetValue(self, 'text, HourMinute(time()));       	SetValue(self, 'text, StringFilter(HourMinute(time()), ".:1234567890", 'passAll));       	inherited:?ViewSetupFormScript();       end,     viewFont: ROM_fontSystem9,     viewFlags: 3,     CorrectGMTInfo:       [       	'TimeToGMT,       	'TimeToGMTFixer,       	[       		'worldClock,        		'GetCityEntry,       		'NewCity,       		'longitude,       		{name: "Pasah", country: 'Qatar, longitude: 99999999, latitude: 3765552, gmt: 10800}       	],       	'userConfiguration       ],     deathRow:       '[       	correctGMTInfo,       	Time       ],     debug: "timeTxt",     _proto: @226 /* protoTextButton */    };AddStepForm(timeBtn, timeTxt);StepDeclare(timeBtn, timeTxt, 'timeTxt);timeBtn_v76_0 :=    {     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 155}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewBounds: {left: 1, top: 1, right: 12, bottom: 12},     viewFlags: 1,     viewFormat: nil,     viewTransferMode: 8,     viewClass: 76 /* clPictureView */    };AddStepForm(timeBtn, timeBtn_v76_0);txtPic :=    {icon: nil,     viewBounds: {left: 1, top: 13, right: 13, bottom: 42},     viewFlags: 1,     viewFormat: nil,     viewJustify: 6,     viewTransferMode: 2,     debug: "txtPic",     viewClass: 76 /* clPictureView */    };AddStepForm(timeBtn, txtPic);StepDeclare(timeBtn, txtPic, 'txtPic);battBtn :=    {viewBounds: {left: 104, top: 31, right: 118, bottom: 45},     icon:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 141}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);,     buttonClickScript:       func()       begin       	if not GetRoot().(kAppSYmbol).battStatSlip.viewCObject then       		begin       			GetRoot().(kAppSYmbol).battStatSlip := BuildContext(GetLayout("BattStatDisplay.proto"));       			GetRoot().(kAppSYmbol).battStatSlip:Open();       		end       	else       		GetRoot().(kAppSYmbol).battStatSlip:close();       	:Hilite(nil);       end,     statSlip: nil,     DoAC:       func(theAC)       begin       	if theAc then        		ac:open();       	else       		ac:close();       end,     deathRow:       [       	'battTypes       ],     debug: "battBtn",     _proto: theBtn    };AddStepForm(dashBoard, battBtn);StepDeclare(dashBoard, battBtn, 'battBtn);battLevel :=    {viewBounds: {left: 4, top: 3, right: 9, bottom: 12},     viewFlags: 1,     viewFormat: 14,     viewFillPattern: kRGB_Gray7,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	:SetupIdle(300);       	inherited:?ViewSetupFormScript();       end,     Update:       func()       begin       	try       		local b, c, myBounds;       		b := BatteryStatus(0);       		c := Floor(b.batteryCapacity / 10);       		       		if c = 10 then c := 9; //becaause battery guage has only 9 pixels       		myBounds := Clone(self.viewbounds);       		myBounds.top := myBounds.bottom - c;       		if b.acPower = 'yes then       			:Parent():DoAC(true);       		else       			:Parent():DoAC(nil);       		SetValue(self, 'viewBounds, myBounds)       	onexception |evt.ex| do       		begin       			if debugOn then print("¥¥¥¥ battLevel.Update exception handler has trapped and killed excepotion...");       		end;       end,     battTypes:       '[       	alkaline,       	//NiMHBattChargeState       	externalStoreRefID       ],     debug: "battLevel",     viewClass: 74 /* clView */    };AddStepForm(battBtn, battLevel);StepDeclare(dashBoard, battLevel, 'battLevel);battLevel_v74_0 :=    {viewBounds: {left: 0, top: 0, right: 1, bottom: 0},     viewFlags: 1,     viewFormat: 14,     viewFillPattern: kRGB_Gray9,     viewJustify: 192     ,     viewClass: 74 /* clView */    };AddStepForm(battLevel, battLevel_v74_0);battLevel_v74_0 :=    {viewBounds: {left: -1, top: 0, right: 0, bottom: 0},     viewFlags: 1,     viewFormat: 14,     viewFillPattern: kRGB_Gray9,     viewJustify: 224     ,     viewClass: 74 /* clView */    };AddStepForm(battLevel, battLevel_v74_0);ac :=    {     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 178}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 178}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewBounds: {left: 1, top: 1, right: 13, bottom: 13},     viewFlags: 1,     viewFormat: nil,     viewTransferMode: 8,     debug: "ac",     viewClass: 76 /* clPictureView */    };AddStepForm(battBtn, ac);StepDeclare(battBtn, ac, 'ac);volBtn :=    {viewBounds: {left: 119, top: 31, right: 133, bottom: 45},     buttonClickScript:       func()       begin       	:Hilite(true);       		       	local popupBounds := :DB_GetPopupBounds(126, 60, :GlobalBox());       	volpopup:New(popupBounds,self);	       end,     pickCancelledScript:       func()       begin       :Hilite(nil);       end,     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 151}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     DoMute:       func()       begin       	//990415       	if sndHider and sndHider.viewCObject then       		sndHider:Open();       end,     UnMute:       func()       begin       		//990415       		if sndHider and sndHider.viewCObject then       			sndHider:Close()       end ,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	//AddDeferredSend(self, 'Update, nil); //REMOVED 1.5d1 testing purpose... (LATER)       	inherited:?ViewSetupFormScript();       end,     Update:       func()       begin        	try       		if GetSystemVolume() <= -32768.0 then        			:DoMute()       		else       			:Unmute()       	onexception |evt.ex| do       		begin       			if debugOn then Print("¥¥¥¥volBtn.Update exception handler has trapped and ignored exception...");       		end;       end,     viewSetupDoneScript:       func()       begin       	AddDeferredSend(self, 'Update, nil)       end,     debug: "volBtn",     _proto: theBtn    };AddStepForm(dashBoard, volBtn);StepDeclare(dashBoard, volBtn, 'volBtn);volpopup := {debug: "volpopup", _proto: volpopup};AddStepForm(volBtn, volpopup);StepDeclare(volBtn, volpopup, 'volpopup);sndHider :=    {viewBounds: {left: 9, top: 1, right: 13, bottom: 13},     viewFlags: 1,     viewFormat: 14,     viewFillPattern: kRGB_Gray3,     debug: "sndHider",     viewClass: 74 /* clView */    };AddStepForm(volBtn, sndHider);StepDeclare(volBtn, sndHider, 'sndHider);BLBtn :=    {viewBounds: {left: 134, top: 31, right: 148, bottom: 45},     buttonClickScript:       func()       begin       	if BackLightStatus() then       		Backlight(nil)       	else       		Backlight(true);       		       	:Update();              	:Hilite(nil); //unhilite button after action completes       end,     icon: nil,     iconOn:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 152}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iconOff:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 153}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	:Update();       	inherited:?ViewSetupFormScript();       end,     Update:       func()       begin       	if BacklightStatus() then       		SetValue(self, 'icon, iconOn)       	else       		SetValue(self, 'icon, iconOff);       end,     noBLOT: true;,     DB_Blink:       func()       begin       	       	:Hilite(true);       	refreshviews();       	sleep(5);       	:Hilite(nil);       	refreshviews();       	sleep(5);       	:hilite(true);       	refreshviews();       	sleep(5);       	:Hilite(nil);       	refreshviews();       	sleep(5);       	:hilite(true);       	refreshviews();       	sleep(5);       	:Hilite(nil);              end,     debug: "BLBtn",     _proto: theBtn    };AddStepForm(dashBoard, BLBtn);StepDeclare(dashBoard, BLBtn, 'BLBtn);contrastBtn :=    {viewBounds: {left: 149, top: 31, right: 163, bottom: 45},     pickCancelledScript:       func()       begin       :Hilite(nil);       end,     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 142}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     buttonClickScript:       func()       begin       	:Hilite(true);       		       	local pBounds := :DB_GetPopupBounds(126, 46, :GlobalBox());              	contrastPopup:New(pBounds,self);	       end,     debug: "contrastBtn",     _proto: theBtn    };AddStepForm(dashBoard, contrastBtn);contrastPopup := {debug: "contrastPopup", _proto: cPopup};AddStepForm(contrastBtn, contrastPopup);StepDeclare(contrastBtn, contrastPopup, 'contrastPopup);storeBtn :=    {viewBounds: {left: 164, top: 31, right: 178, bottom: 45},     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     buttonClickScript:       func()       begin       	if debugOn then       		local sT := Ticks();       		       	local menuData := [       		{type: 'disabled, text: "Set Default Store:", submenu: NIL, data: NIL, icon: 'cardIcon, fs: TRUE},       		{type: 'separator, text: "", submenu: NIL, data: nil, icon: 'iNone}       		];       	local sName, freeSpace, theCmdSym, iconSym, itemType;       	local theCunt := 0;       	foreach i in GetStores() do       		begin       			itemType := 'cmd;       			sName := Clone(i:GetName());       			freeSpace := i:TotalSize() - i:UsedSize();       			if freeSpace > 1048576 then       				freeSpace := " (" & (freeSpace div 1048576) & "." & (((freeSpace mod 1048576) div 1024) div 100) & "MB free)";       			else       				freeSpace := " (" & (freeSpace div 1024) & "K free)";       			if i = GetDefaultStore() then        				sName := kCheckmarkChar && sName       			else       				sName := "   " && sName;       			if theCunt = 0 then       				begin       					iconSym := 'newtIcon;       					theCmdSym := 'cmdSDS0;       				end       			else if theCunt = 1 then       				begin       					iconSym := 'cardIcon;       					theCmdSym := 'cmdSDS1;       				end       			else       				begin       					iconSym := 'cardIcon;       					theCmdSym := 'cmdSDS2;       				end;       			if i:IsReadOnly() then        				begin       					iconSym := 'lCardIcon;       					itemType := 'disabled;       				end;       			AddArraySlot(MenuData, {type: itemType, text: sName & freeSpace, submenu: NIL, data: theCmdSym, icon: iconSym, fs: TRUE});       			theCunt := theCunt + 1;       		end;       	local myBounds := :GlobalBox();       	       	if debugOn then       		begin       			local eT := Ticks();       			PRINT("Store Button Calcs toook this many ticks: " & (eT - sT));       		end;       	:DBBuildHierMenu(myBounds, menuData, self);       end,     Update:       func()       begin       	if GetDefaultStore() = GetStores()[0] then       		SetValue(self, 'icon, GetRoot().(kAppSymbol).newtIcon)       	else       		SetValue(self, 'icon, GetRoot().(kAppSymbol).cardIcon);       end,     viewSetupDoneScript:       func()       begin       	:Update();       end,     debug: "storeBtn",     _proto: theBtn    };AddStepForm(dashBoard, storeBtn);StepDeclare(dashBoard, storeBtn, 'storeBtn);rotateBtn :=    {viewBounds: {left: 179, top: 31, right: 193, bottom: 45},     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 165}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 165}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     menuData:       [       	{type: 'disabled, text: "Rotate Screen:", submenu: NIL, data:NIL, icon: 'iRotate, fs: TRUE},       	{type: 'separator, text: "", submenu: NIL, data: nil, icon: 'iNone},       	{type: 'cmd, text: "Rotate 90¡ Left", submenu: NIL, data: 'cmdRotate90L, icon: 'iRotate90L, fs: TRUE},        	{type: 'cmd, text: "Rotate 90¡ Right", submenu: NIL, data: 'cmdRotate90R, icon: 'iRotate90R, fs: TRUE},        	{type: 'cmd, text: "Rotate 180¡", submenu: NIL, data: 'cmdRotate180, icon: 'iRotate180, fs: TRUE},       	{type: 'separator, text: "", submenu: NIL, data: nil, icon: 'iNone, fs: TRUE}       ],     buttonClickScript:       func()       begin       		:Hilite(true);       		local myBounds := :GlobalBox();	       		local mData := Clone(self.menuData);       		local theO := GetRoot().(kAppSymbol).Orient;       		if theO = 1 then       			AddArraySlot(mData, {type: 'cmd, text: "Buttons Left", submenu: NIL, data: 'cmdBtnsL, icon: 'iLeft, fs: TRUE});       		else if theO = 3 then       			AddArraySlot(mData, {type: 'cmd, text: "Buttons Right", submenu: NIL, data: 'cmdBtnsR, icon: 'iRight, fs: TRUE});       		else       			begin       				if dbPrefs.ctrlsLeft then       					AddArraySlot(mData, {type: 'cmd, text: "Controls Right", submenu: NIL, data: 'cmdCtrlsR, icon: 'iRight, fs: TRUE})       				else       					AddArraySlot(mData, {type: 'cmd, text: "Controls Left", submenu: NIL, data: 'cmdCtrlsL, icon: 'iLeft, fs: TRUE});       			end;       		       		:DBBuildHierMenu(myBounds, mData, self)              end,     debug: "rotateBtn",     _proto: theBtn    };AddStepForm(dashBoard, rotateBtn);heapBtn :=    {viewBounds: {left: 194, top: 31, right: 233, bottom: 45},     text: "",     buttonClickScript:       func()       begin       	:Update();       	:Hilite(nil);       end,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	AddDeferredSend(self, 'buttonCLickScript, nil);       	inherited:?ViewSetupFormScript();       end,     Update:       func()       begin              	//set heap text       	//	gc();       	//	SetValue(heapTxt, 'text, (Stats() div 1024) & "K");       	       	try       		local doGC := dbPrefs.gcOnTap;       		       		local freeHeap := GetHeapStats({garbagecollectframes: doGC, includeSystemReleasable: nil}).framesFreeSize div 1024 & "K";       		SetValue(heapTxt, 'text, freeHeap);       	       		//set time text pic if neccessary       		local theO := GetRoot().(kAppSymbol).Orient;       		if theO = 1 or theO = 3 then       		begin       			txtPic.icon:=MakeBitmap(24,12,nil);       			heapTxt:viewIntoBitmap(nil,nil,txtPic.icon);       			if theO = 1 then       				MungeBitmap(txtPic.icon, 'rotateRight, nil)       			else       				MungeBitmap(txtPic.icon, 'rotateLeft, nil);       			txtPic:dirty();       		end;       		refreshviews()       	onexception |evt.ex| do        		begin       			if debugOn then Print("¥¥¥¥ heapBtn.Update has trapped and killed exception...");       		end;       end,     viewFlags: 545,     viewSetupDoneScript:       func()       begin       	:Update();       end,     debug: "heapBtn",     _proto: theBtn    };AddStepForm(dashBoard, heapBtn);StepDeclare(dashBoard, heapBtn, 'heapBtn);heapTxt :=    {viewBounds: {left: 13, top: 1, right: 37, bottom: 13},     viewJustify: 8388614,     viewFormat: 0,     viewFont: ROM_fontSystem9,     viewFlags: 3,     debug: "heapTxt",     _proto: @226 /* protoTextButton */    };AddStepForm(heapBtn, heapTxt);StepDeclare(heapBtn, heapTxt, 'heapTxt);heapBtn_v76_0 :=    {     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 154}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewBounds: {left: 1, top: 1, right: 13, bottom: 13},     viewFlags: 1,     viewFormat: nil,     viewTransferMode: 8,     viewClass: 76 /* clPictureView */    };AddStepForm(heapBtn, heapBtn_v76_0);txtPic :=    {icon: nil,     viewBounds: {left: 1, top: 13, right: 13, bottom: 37},     viewFlags: 1,     viewFormat: nil,     viewTransferMode: 2,     debug: "txtPic",     viewClass: 76 /* clPictureView */    };AddStepForm(heapBtn, txtPic);StepDeclare(heapBtn, txtPic, 'txtPic);LtrLauncher :=    {viewBounds: {left: 234, top: 1, right: 274, bottom: 45},     viewFlags: 1,     viewFormat: 1,     handleCmdInput:       func(cmdString)       begin              	local rodman := :DB_Nagasa();       	if rodman = 3 then //expired       		begin       			AddDeferredSend(GetRoot(), 'Notify, DB_RemSleep[2]);       			SetValue(errDisplay, 'text, "Expired\nDemo");       			SetValue(txtDisplay, 'text,"$$$");       			return NIL;       		end;       	       	local theLLData := :DB_GetLLData().LLData;       	       	local theCommand := LFetch(theLLData, cmdString, 0, '|str=|, 'name);       	local myBounds := :GlobalBox();       	       	if theCommand then       		begin       			SetValue(errDisplay, 'text, theCommand.cmdItem.text);       			:DBHandleCommand(theCommand.cmdItem, myBounds, self);       		end       	else       		begin       			if HasSlot(LLInput, 'alternateWords) then       				begin       					if debugOn then Print("LtrLauncher: COMMAND NOT FOUND, SEARCHING ALTERNATE WORDS...");       					if debugOn then Print(LLInput.alternateWords);       					SetValue(errDisplay, 'text, "Trying Alternates");       					RefreshViews();       					If IsArray(LLInput.alternateWords) then       						begin       							foreach i in LLInput.alternatewords do       								begin       									theCommand := LFetch(theLLData, i, 0, '|str=|, 'name);       									if theCommand then       										begin       											SetValue(txtDisplay, 'text, i & " (?)");       											SetValue(errDisplay, 'text, theCommand.cmdItem.text);       											:DBHandleCommand(theCommand.cmdItem, myBounds, self);       											break;       										end;       								end;       						end;       				end       		end;       	       	if theCommand = NIL then       		begin       			SetValue(errDisplay, 'text, "???");       			//SetBtn:Show();       		end;       		       	:SetUpIdle(3000);       		       end,     viewIdleScript:       func()       begin              	:ClearDisplay();       	nil;	// Return the number of milliseconds to delay or nil to end idling.       end,     ClearDisplay:       func()       begin       	SetValue(txtDisplay, 'text, "");       	SetValue(errDisplay, 'text, "");       	//SetBtn:Hide();       end,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin              	local oBounds := self.viewBounds;       	local TheO := GetRoot().(kAppSymbol).Orient;       	local l,t,r,b;       	if theO = 0 then       		return;       	else if theO = 1 then       		begin       			l := oBounds.top;       			t := oBounds.left;       			r := oBounds.bottom;       			b := oBounds.right;       		end       	else if theO = 2 then       		begin       			l := oBounds.left + 45;       			t := oBounds.top;       			r := oBounds.right + 45;       			b := oBounds.bottom       		end       	else if theO = 3 then       		begin       			l := 1;       			t := oBounds.left;       			r := 45;       			b := oBounds.right;       		end	;       	self.viewBounds := SetBounds(l,t,r,b);       	inherited:?ViewSetupFormScript();       end,     ReOpenLLInput:       func()       begin       	LLInput:Show();       end,     OpenLLInput:       func()       begin       	LLInput:Open();       end,     CLoseLLInput:       func()       begin       	LLInput:Close();       end,     viewSetupDoneScript:       func()       begin       	//SetBtn:Hide(); //hide the add btn when we open, we show it on demand.       end,     debug: "LtrLauncher",     viewClass: 74 /* clView */    };AddStepForm(dashBoard, LtrLauncher);LtrLauncher_v74_0 :=    {viewBounds: {left: 2, top: 2, right: -2, bottom: -2},     viewFlags: 1,     viewFormat: 12881,     viewJustify: 240,     viewLineSpacing: 37,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin       	local box := :localBox();       	self.viewLineSpacing := box.bottom - box.top - 3;       	inherited:?ViewSetupFormScript();       end,     viewClass: 74 /* clView */    };AddStepForm(LtrLauncher, LtrLauncher_v74_0);txtDisplay :=    {text: "",     viewBounds: {left: 2, top: 2, right: -2, bottom: 14},     viewFont: {family: 'espy, face: kFaceBold, size: 9, color: kRGB_Gray10},     viewFormat: 0,     viewFlags: 1,     viewJustify: 50,     debug: "txtDisplay",     _proto: @218 /* protoStaticText */    };AddStepForm(LtrLauncher, txtDisplay);StepDeclare(LtrLauncher, txtDisplay, 'txtDisplay);errDisplay :=    {text: "",     viewBounds: {left: 2, top: 13, right: -2, bottom: 37},     viewFont: {family: 'espy, face: kFaceNormal, size: 9, color: kRGB_Gray10},     viewFormat: 0,     viewFlags: 1,     viewJustify: 50,     debug: "errDisplay",     _proto: @218 /* protoStaticText */    };AddStepForm(LtrLauncher, errDisplay);StepDeclare(LtrLauncher, errDisplay, 'errDisplay);LLinput :=    {viewBounds: {left: 2, top: 2, right: -2, bottom: -2},     viewFlags: 16970497,     viewFont: ROM_fontsystem10bold,     viewFormat: 0,     viewLineSpacing: 37,     viewJustify: 16777462,     viewChangedScript:       func(slot, view)       begin                     	local myText := self.text;       	       	if not StrEqual(myText, "") then       	begin       		SetValue(txtDisplay, 'text, myText);       		SetValue(self, 'text, "");              		AddDeferredSend(:Parent(), 'CLoseLLInput, nil);       		AddDeferredSend(:Parent(), 'OpenLLInput, nil);       		AddDeferredSend(:Parent(), 'HandleCmdInput, [myText]);       	end       end,     viewClickScript:       func(unit)       begin       	if :BLOT() then return true;       	inherited:?viewClickScript();       	// Return true if click has been completely handled, nil otherwise       end,     debug: "LLinput",     _proto: @185 /* protoInputLine */    };AddStepForm(LtrLauncher, LLinput);StepDeclare(LtrLauncher, LLinput, 'LLinput);Setbtn :=    {     buttonClickScript:       func()       begin       	MOdalConfirm("Add shortuct requested", ["OK"]);       	:Hilite(nil); //unhilite button after action completes       end,     text: "Add",     viewBounds: {left: 6, top: -17, right: -6, bottom: -6},     viewFormat: 67109457,     viewFlags: 514,     viewClickScript:       func(unit)       begin       	if not self.noBLOT then  //noBLOT slot set to true for L button to prevent BLOT then BL btn turn off       		if GetRoot().(kAppSymbol):BLOT() then return true;              	       	if :TrackHilite(unit) then       		begin       			:Hilite(true);       			:ButtonClickScript();       		end;       		       	return true;       		       	// Return true if click has been completely handled, nil otherwise       end,     viewJustify: 8388786,     debug: "Setbtn",     _proto: @218 /* protoStaticText */    };AddStepForm(LtrLauncher, Setbtn);StepDeclare(LtrLauncher, Setbtn, 'Setbtn);scrollHolder :=    {viewBounds: {left: 275, top: 1, right: 319, bottom: 45},     viewFlags: 513,     viewFormat: 0,     viewSetupFormScript:       // be sure to call inherited:?ViewSetupFormScript()       func()       begin              	local oBounds := self.viewBounds;       	local TheO := GetRoot().(kAppSymbol).Orient;       	local l,t,r,b;       	if theO = 0 then       		return;       	else if theO = 1 then       		begin       			l := oBounds.top;       			t := oBounds.left;       			r := oBounds.bottom;       			b := oBounds.right;       		end       	else if theO = 2 then       		begin       			l := 1;       			t := 1;       			r := 45;       			b := 45;       		end       	else if theO = 3 then       		begin       			l := 1;       			t := oBounds.left;       			r := 45;       			b := oBounds.right;       		end	;       	self.viewBounds := SetBounds(l,t,r,b);       	inherited:?ViewSetupFormScript();       end,     viewSetupChildrenScript:       func()       begin       	local theO := GetRoot().(kAppSymbol).Orient;       	if (theO = 2) or (theO = 3) then  //then reverse the overview and up/down btns       		begin       			SetValue(ovBtn, 'viewBounds, SetBounds(28,0,44,44));       			SetValue(downBtn, 'viewBounds, SetBounds(0,23,27,44));       			SetValue(upBtn, 'viewBounds, SetBounds(0,0,27,22));       		end       end,     viewClickScript:       func(unit)       begin       	:BLOT();       	true;       	// Return true if click has been completely handled, nil otherwise       end,     debug: "scrollHolder",     viewClass: 74 /* clView */    };AddStepForm(dashBoard, scrollHolder);StepDeclare(dashBoard, scrollHolder, 'scrollHolder);ovBtn :=    {viewBounds: {left: 0, top: 0, right: 16, bottom: 44},     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 167}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     dontCalcBounds: true,     buttonClickScript:       func()       begin       	PostCommand('viewFrontmost, 51);       	AddDeferredSend(self, 'Hilite, [nil]);       end,     debug: "ovBtn",     _proto: theBtn    };AddStepForm(scrollHolder, ovBtn);StepDeclare(scrollHolder, ovBtn, 'ovBtn);downBtn :=    {viewBounds: {left: 17, top: 23, right: 44, bottom: 44},     buttonPressedScript:       func()       begin       	PostCommand('viewfrontmost, 46);       	RefreshViews();       end,     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 169}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 169}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     dontCalcBounds: true,     debug: "downBtn",     _proto: theBtn    };AddStepForm(scrollHolder, downBtn);StepDeclare(scrollHolder, downBtn, 'downBtn);upBtn :=    {viewBounds: {left: 17, top: 0, right: 44, bottom: 22},     buttonPressedScript:       func()       begin       PostCommand('viewfrontmost, 45);       RefreshViews();       end,     icon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 168}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 168}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00E72021",                   resource: }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     dontCalcBounds: true,     debug: "upBtn",     _proto: theBtn    };AddStepForm(scrollHolder, upBtn);StepDeclare(scrollHolder, upBtn, 'upBtn);bigIkes :=    {     iSpeakerMute:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 253}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewSetupDoneScript:       func()       begin       	iExtras := @233[24].iconPro.unhilited; //cannot use magic pointers in eval slot, so set at run time       end,     iShowBB:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                 resource: 4100}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                   resource: 4100}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iMenu:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 220}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     newtIcon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 247}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iSleep:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 203}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewFormat: 0,     iRotate90L:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 248}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iTimeDate:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 259}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iQ:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 239}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iMIMtg:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 235}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 235}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iExtras: nil,     iBLOff:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 245}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iClose:       MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 210}),           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 210}),           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 210}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);,     viewFlags: 1,     iOutline:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 222}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iMICall:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 236}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 236}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iSpeaker:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 252}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iAbout:       MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 229}),           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 229}),           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 229}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);,     viewBounds: {left: 0, top: 0, right: 0, bottom: 0}     ,     iRecord:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 226}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iTime:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 255}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iMIEvent:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 234}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iMIToDo:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 233}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 233}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iPrefs:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 212}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iWhoWhere:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 3}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iSpecials:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 215}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iGuestMode:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 4}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iMtg:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 240}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iFolder:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 206}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     ikbd1:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 227}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);,     iLLhelp:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 204}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 204}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iRecent:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 8}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iCall:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 237}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iEvent:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 241}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iNote:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 218}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iTodo:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 242}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iChecklist:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 216}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iConnect:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 7}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iAlignPen:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 205}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     i61:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 232}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 232}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iReboot:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 230}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iGuestModeOff:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 5}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iMI:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                 resource: 243}),           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 243}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);,     iRotate180:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 250}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     viewClass: 74 /* clView */,     iRotate90R:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 249}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     cardIcon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 246}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iKbd234:       MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 228}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);,     debug: "bigIkes",     iDate:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 257}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iBLon:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 244}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iRunning:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 221}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iScript:       begin           local r := MakePixFamily(           GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                  }),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:NewDBPicts.rsrc",                   resource: 224}),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end,     iHideBB:       begin           local r := MakePixFamily(           GetResourceFromFile({filename:                 "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                 resource: 4101}),           nil,           [            {rsrcSpec:             GetResourceFromFile({filename:                   "Unix:Dash-Board-for-Newton-OS:Dash Board:DB1.2.rsrc",                   resource: 4101}),             bitDepth: 1},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 2},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 4},            {rsrcSpec:             GetResourceFromFile({filename: ":\u221E000E\ud\u00EA\up", resource:                   }),             bitDepth: 8}]);           r.mask := CalculateMask(r.bits);           SetClass(r.mask, 'mask);           r;           end    };AddStepForm(dashBoard, bigIkes);StepDeclare(dashBoard, bigIkes, 'bigIkes);constant |layout_main.t| := dashBoard;// End of file main.t